"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4093],{84093:function(e,a,r){r.d(a,{Z:function(){return S}});var t=r(57437),n=r(2265),d=r(14493),o=r(29251),i=r(77480),l=r(21271),s=r(17810),c=r(33344),b=r(86712),m=r(67405),u=r(4035),x=r(17187),f=r(67842),h=r(69057),g=r(56643),p=r(16235),v=r(34822),k=r(71738),y=r(66654),j=r(82549),N=r(41298),w=r(28203),Z=r(86264),C=r(25727),q=r(93750);let $=[{nome:"Plane",icon:d.Z},{nome:"Car",icon:o.Z},{nome:"Home",icon:i.Z},{nome:"Smartphone",icon:l.Z},{nome:"Heart",icon:s.Z},{nome:"GraduationCap",icon:c.Z},{nome:"ShoppingCart",icon:b.Z},{nome:"Gamepad",icon:m.Z},{nome:"Camera",icon:u.Z},{nome:"Music",icon:x.Z},{nome:"Dumbbell",icon:f.Z},{nome:"Briefcase",icon:h.Z},{nome:"Gift",icon:g.Z},{nome:"PiggyBank",icon:p.Z},{nome:"Wallet",icon:v.Z},{nome:"CreditCard",icon:k.Z}];function S(e){let{onClose:a,onMetaCriada:r,metaParaEditar:d}=e,[o,i]=(0,n.useState)((null==d?void 0:d.nome)||""),[l,s]=(0,n.useState)(d?d.meta_total.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),[c,b]=(0,n.useState)((null==d?void 0:d.valor_max_por_bau)?d.valor_max_por_bau.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),[m,u]=(0,n.useState)((null==d?void 0:d.periodicidade)||"semanal"),[x,f]=(0,n.useState)((null==d?void 0:d.icone)||"Plane"),[h,g]=(0,n.useState)(!1),[p,v]=(0,n.useState)(null),[k,S]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=(0,q.d)(l),a=(0,q.d)(c);e>0&&a>0?S(Math.ceil(e/a)):S(null)},[l,c]);let _=async e=>{if(e.preventDefault(),v(null),!o.trim()){v("Por favor, d\xea um nome para sua meta");return}let a=(0,q.d)(l);if(!a||a<=0){v("Por favor, informe um valor v\xe1lido para a meta");return}let t=(0,q.d)(c);if(!t||t<=0){v("Por favor, informe quanto voc\xea pode guardar por ba\xfa");return}g(!0);try{localStorage.setItem("meta_icone_".concat(o),x);let e=new FormData;e.append("nome",o),e.append("valor_objetivo",a.toString()),e.append("periodicidade",m);let t=d?await (0,C.gp)(d.id,e):await (0,C.Ju)(e);if(t.error){v(t.error),g(!1);return}t.data?(g(!1),r(t.data)):(g(!1),t.error||setTimeout(()=>{window.location.href="/minhas-metas"},500))}catch(e){v(e.message||"Erro ao criar meta"),g(!1)}};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 z-[9999] flex items-center justify-center p-4 animate-fade-in",onClick:a,children:(0,t.jsxs)("div",{className:"bg-white dark:bg-brand-royal rounded-2xl w-full max-w-md shadow-2xl border border-gray-200 dark:border-white/10 animate-slide-up max-h-[85vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-200 dark:border-white/10 flex-shrink-0 bg-white dark:bg-brand-midnight",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-1.5 bg-brand-aqua rounded-lg",children:(0,t.jsx)(y.Z,{size:16,className:"text-brand-midnight"})}),(0,t.jsx)("h2",{className:"text-lg font-display text-brand-midnight dark:text-brand-clean",children:d?"Editar Meta":"Criar Nova Meta"})]}),(0,t.jsx)("button",{onClick:a,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-smooth",children:(0,t.jsx)(j.Z,{size:18,className:"text-brand-midnight dark:text-brand-clean"})})]}),(0,t.jsxs)("form",{onSubmit:_,className:"flex flex-col flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"overflow-y-auto scrollbar-hide flex-1",children:(0,t.jsxs)("div",{className:"px-5 py-4",children:[p&&(0,t.jsx)("div",{className:"mb-3 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-xs",children:p}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Nome da Meta"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(y.Z,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-brand-clean/50",size:14}),(0,t.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"Ex: Viagem, Novo celular...",className:"w-full pl-8 pr-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-sm text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50",maxLength:50})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Escolha um \xedcone"}),(0,t.jsx)("div",{className:"border border-gray-300 dark:border-white/10 rounded-lg overflow-hidden bg-gray-50 dark:bg-brand-midnight/50",children:(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1.5 max-h-28 overflow-y-auto p-1.5 scrollbar-hide",children:$.map(e=>{let a=e.icon,r=x===e.nome;return(0,t.jsx)("button",{type:"button",onClick:()=>f(e.nome),className:"p-1.5 rounded-lg border transition-all ".concat(r?"bg-brand-aqua border-brand-aqua shadow-sm":"bg-white dark:bg-brand-royal border-gray-300 dark:border-white/10 hover:border-brand-aqua hover:bg-brand-aqua/10 dark:hover:bg-brand-aqua/20"),title:e.nome,children:(0,t.jsx)(a,{size:16,className:"mx-auto ".concat(r?"text-white":"text-blue-500")})},e.nome)})})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight mb-1",children:"Valor total da meta"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(N.Z,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-400",size:14}),(0,t.jsx)("input",{type:"text",value:l,onChange:e=>{s((0,q.v)(e.target.value))},placeholder:"0,00",className:"w-full pl-8 pr-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-sm font-semibold text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Valor m\xe1ximo por ba\xfa"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(N.Z,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-brand-clean/50",size:14}),(0,t.jsx)("input",{type:"text",value:c,onChange:e=>{b((0,q.v)(e.target.value))},placeholder:"0,00",className:"w-full pl-8 pr-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-sm font-semibold text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50"})]}),null!==k&&(0,t.jsxs)("p",{className:"mt-1 text-xs text-gray-600 dark:text-brand-clean/60",children:[k," ba\xfas ser\xe3o criados"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Frequ\xeancia"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-1.5",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>u("diario"),className:"p-1.5 rounded-lg border transition-smooth ".concat("diario"===m?"bg-brand-aqua border-brand-aqua text-brand-midnight shadow-sm":"bg-white dark:bg-brand-royal border-gray-300 dark:border-white/10 text-brand-midnight dark:text-brand-clean hover:border-brand-aqua"),children:[(0,t.jsx)(w.Z,{size:14,className:"mx-auto mb-0.5"}),(0,t.jsx)("span",{className:"font-semibold block text-[10px]",children:"Di\xe1rio"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>u("semanal"),className:"p-1.5 rounded-lg border transition-smooth ".concat("semanal"===m?"bg-brand-aqua border-brand-aqua text-brand-midnight shadow-sm":"bg-white dark:bg-brand-royal border-gray-300 dark:border-white/10 text-brand-midnight dark:text-brand-clean hover:border-brand-aqua"),children:[(0,t.jsx)(w.Z,{size:14,className:"mx-auto mb-0.5"}),(0,t.jsx)("span",{className:"font-semibold block text-[10px]",children:"Semanal"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>u("mensal"),className:"p-1.5 rounded-lg border transition-smooth ".concat("mensal"===m?"bg-brand-aqua border-brand-aqua text-brand-midnight shadow-sm":"bg-white dark:bg-brand-royal border-gray-300 dark:border-white/10 text-brand-midnight dark:text-brand-clean hover:border-brand-aqua"),children:[(0,t.jsx)(w.Z,{size:14,className:"mx-auto mb-0.5"}),(0,t.jsx)("span",{className:"font-semibold block text-[10px]",children:"Mensal"})]})]})]})]})]})}),(0,t.jsxs)("div",{className:"flex gap-2 px-5 py-4 border-t border-gray-200 dark:border-white/10 flex-shrink-0 bg-white dark:bg-brand-midnight",children:[(0,t.jsx)("button",{type:"button",onClick:a,disabled:h,className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean rounded-lg hover:bg-gray-200 dark:hover:bg-white/10 transition-smooth font-medium text-sm disabled:opacity-50 border border-gray-200 dark:border-white/10",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:h,className:"flex-1 px-4 py-2.5 bg-brand-aqua text-brand-midnight rounded-lg hover:bg-brand-aqua/90 transition-smooth font-bold text-sm disabled:opacity-50",children:h?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(Z.Z,{size:16,className:"animate-spin"}),"Criando..."]}):d?"Salvar Altera\xe7\xf5es":"Criar Meta"})]})]})]})})})}},25727:function(e,a,r){r.d(a,{CG:function(){return m},HR:function(){return v},It:function(){return f},Ju:function(){return h},M0:function(){return b},Qs:function(){return n},Ti:function(){return p},Vq:function(){return x},Xc:function(){return y},Yw:function(){return l},criarRegistro:function(){return d},gp:function(){return g},ho:function(){return c},ht:function(){return u},pL:function(){return o},uX:function(){return k},ue:function(){return s},v2:function(){return i}}),r(15355);var t=r(31162),n=(0,t.$)("0677e679ab9ad88dcae5f5ed21d3e091a8ece2a2"),d=(0,t.$)("230f57158249c34d410702e12e5ed20109a82cb5"),o=(0,t.$)("331e00a8bd55fbc4647894e75deb9d622e65262b"),i=(0,t.$)("7a5812df7fa537449e30af8482b959119bb5a3b9"),l=(0,t.$)("189acde9d8ba09cf1fa4502a831d11adfdef214a"),s=(0,t.$)("1c6f6257e327d1a8298c81a2c176b2cf4f67c259"),c=(0,t.$)("c2c5c8dc8a684f1448fe15864b09bb63a503a1f0"),b=(0,t.$)("0a9ef55d10fe0c4ac929c2a10460a36a857f415e"),m=(0,t.$)("05ebcbba5892735c1439f199b8d0bb629920a73c"),u=(0,t.$)("515d1ab9d9a146a826a501e3cbfac0b203edf4ac"),x=(0,t.$)("c57ff1267c026993a0b18696f79e908f72fbb6ab");(0,t.$)("8a3728cd313d0e727c1792c87e6ea0e6968cbfbf");var f=(0,t.$)("9cf5ff030e23581d3720e53c2dc93d2fe8cf283c");(0,t.$)("38ec628be9394ddc2becfcdf37826b7d2bab44a1");var h=(0,t.$)("7af002ae1f9efeacd79c403b3fa388cff4789c53"),g=(0,t.$)("5aaa6054274ead32c9c2f1bfde761a706bb325fc"),p=(0,t.$)("f4f80106626033d46b812b45e7973e34bc6c73f6");(0,t.$)("55c7e515dbccb193beccc282665c7cd0068bb3f0");var v=(0,t.$)("0305e3a8646bd650b9adafe954666989ab036d34"),k=(0,t.$)("028c880afc441a7abca2ca63f71e47d33a85bc72"),y=(0,t.$)("d7385b3e8fa7fcedf5527c95854e0457bfbb991c")},93750:function(e,a,r){function t(e){try{if(!e||""===e.trim())return"";let a=e.replace(/\D/g,"");if(!a)return"";a.length>8&&(a=a.slice(0,8));let r=parseInt(a,10);if(isNaN(r)||!isFinite(r))return"";let t=r/100;if(t>1e6)return"1.000.000,00";return new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}).format(t)}catch(e){return console.error("Erro ao formatar valor:",e),""}}function n(e){return parseFloat(e.replace(/\./g,"").replace(",","."))||0}r.d(a,{d:function(){return n},v:function(){return t}})}}]);