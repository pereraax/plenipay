(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7693],{11981:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},72894:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},92457:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3021:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},28203:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},20173:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},71738:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},49168:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]])},77216:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},99670:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},76637:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},77480:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},74056:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},50774:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]])},86264:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},65883:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},68004:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},93088:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},16235:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]])},37189:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]])},9883:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},15432:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},29409:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},53589:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},44135:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},45367:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},67972:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},25750:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},81597:function(e,a,r){Promise.resolve().then(r.bind(r,76710)),Promise.resolve().then(r.bind(r,15438)),Promise.resolve().then(r.bind(r,9353)),Promise.resolve().then(r.bind(r,53468)),Promise.resolve().then(r.bind(r,31441)),Promise.resolve().then(r.bind(r,94513))},76710:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return D}});var t=r(57437),n=r(2265),s=r(24033),o=r(25727),i=r(29409),d=r(25750),l=r(67972),c=r(72894),u=r(15432),m=r(49168),x=r(50774),b=r(77216),h=r(99670),f=r(1295),g=r(65883),p=r(9883),y=r(82549),v=r(53589),k=r(45367),j=r(53468),N=r(54175),w=r(34599),C=r(83302),Z=r(99616);function D(e){var a,r,D,S,E,_,q,z;let{tabAtivo:P}=e,M=(0,s.useRouter)(),A=(0,s.useSearchParams)(),[T,R]=(0,n.useState)(P),[$,U]=(0,n.useState)([]),[F,V]=(0,n.useState)(!1),[I,W]=(0,n.useState)(!1),[L,O]=(0,n.useState)(""),[H,B]=(0,n.useState)(null),[G,K]=(0,n.useState)(null),[J,X]=(0,n.useState)(null),[Y,Q]=(0,n.useState)(null),[ee,ea]=(0,n.useState)(!0),[er,et]=(0,n.useState)(!1),[en,es]=(0,n.useState)(""),[eo,ei]=(0,n.useState)(""),[ed,el]=(0,n.useState)(""),[ec,eu]=(0,n.useState)(!1),[em,ex]=(0,n.useState)(!1),[eb,eh]=(0,n.useState)(!1),[ef,eg]=(0,n.useState)(!1),[ep,ey]=(0,n.useState)(!1),[ev,ek]=(0,n.useState)(!1),[ej,eN]=(0,n.useState)(""),[ew,eC]=(0,n.useState)(!1),[eZ,eD]=(0,n.useState)(!1),[eS,eE]=(0,n.useState)(null),[e_,eq]=(0,n.useState)(""),[ez,eP]=(0,n.useState)(!1),[eM,eA]=(0,n.useState)(!1),[eT,eR]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=A.get("tab");"usuarios"===e?R("usuarios"):"perfil"===e?R("perfil"):R("geral"),eF(),"perfil"===e&&e$()},[A]),(0,n.useEffect)(()=>{let{data:{subscription:e}}=(0,w.createClient)().auth.onAuthStateChange((e,a)=>{var r;console.log("\uD83D\uDD14 Auth state changed:",e,(null==a?void 0:null===(r=a.user)||void 0===r?void 0:r.email)||"no user"),"SIGNED_IN"===e&&(null==a?void 0:a.user)?(console.log("✅ Usu\xe1rio autenticado, recarregando perfil..."),e$()):"SIGNED_OUT"===e?(console.log("\uD83D\uDC4B Usu\xe1rio deslogado"),Q(null)):"TOKEN_REFRESHED"===e&&(null==a?void 0:a.user)&&(console.log("\uD83D\uDD04 Token atualizado, recarregando perfil..."),e$())});return()=>{e.unsubscribe()}},[]),(0,n.useEffect)(()=>{"perfil"!==T||Y||ee||(console.log("\uD83D\uDD04 Recarregando perfil porque est\xe1 na aba perfil e n\xe3o h\xe1 userProfile"),e$())},[T]),(0,n.useEffect)(()=>{console.log("\uD83D\uDD0D userProfile mudou:",{exists:!!Y,email:null==Y?void 0:Y.email,emailConfirmed:null==Y?void 0:Y.email_confirmed_at,hasProfile:!!(null==Y?void 0:Y.profile),loading:ee})},[Y,ee]);let e$=async()=>{ea(!0);try{let e=(0,w.createClient)(),{data:{session:a},error:r}=await e.auth.getSession();if(null==a?void 0:a.user){console.log("✅ Sess\xe3o encontrada via getSession:",a.user.email),await eU(a.user,e);return}console.log("⚠️ getSession n\xe3o retornou sess\xe3o, tentando getUser..."),r&&console.log("⚠️ Erro no getSession:",r.message);let{data:{user:t},error:n}=await e.auth.getUser();if(n){if(console.error("❌ Erro ao buscar usu\xe1rio:",n.message),n.message.includes("session missing")||n.message.includes("Auth session missing")){console.log("⚠️ Sess\xe3o n\xe3o encontrada - tentando buscar usu\xe1rio via API...");try{Q({error:"session_missing",message:"Sess\xe3o n\xe3o encontrada. Por favor, fa\xe7a login novamente ou tente recarregar a p\xe1gina."}),ea(!1),setTimeout(()=>{console.log("\uD83D\uDD04 Tentando recarregar perfil ap\xf3s delay..."),e$()},2e3);return}catch(e){console.error("❌ Erro ao tentar buscar via API:",e),Q({error:"session_missing",message:"Sess\xe3o n\xe3o encontrada. Por favor, fa\xe7a login novamente."}),ea(!1);return}}Q({error:"load_failed",message:n.message||"Erro ao carregar perfil"}),ea(!1);return}if(!t||!t.email){console.error("❌ Usu\xe1rio n\xe3o encontrado ou sem email"),Q({error:"user_not_found",message:"Usu\xe1rio n\xe3o encontrado. Por favor, fa\xe7a login novamente."}),ea(!1);return}console.log("✅ Usu\xe1rio encontrado via getUser:",t.email),await eU(t,e)}catch(e){console.error("❌ Erro inesperado ao carregar perfil:",e),Q({error:"unexpected_error",message:e.message||"Erro inesperado ao carregar perfil"}),ea(!1)}},eU=async(e,a)=>{try{if(console.log("✅ Carregando perfil para usu\xe1rio:",e.email,e.id),!e.email){console.error("❌ Usu\xe1rio sem email - pode ser problema de sess\xe3o"),Q({error:"user_incomplete",message:"Dados do usu\xe1rio incompletos. Por favor, fa\xe7a login novamente."}),ea(!1);return}let n={...e,email:e.email||"",email_confirmed_at:e.email_confirmed_at||null,profile:null};try{console.log("\uD83D\uDD0D Buscando perfil para user.id:",e.id);let{data:s,error:o}=await a.from("profiles").select("*").eq("id",e.id).maybeSingle();if(o)console.error("⚠️ Erro ao buscar perfil:",o);else if(s){if(s.id!==e.id){console.error("❌ ERRO CR\xcdTICO: Perfil encontrado n\xe3o pertence ao usu\xe1rio atual!",{profileId:s.id,userId:e.id}),Q({error:"data_mismatch",message:"Erro: Dados de perfil n\xe3o correspondem ao usu\xe1rio atual. Por favor, fa\xe7a logout e login novamente."}),ea(!1);return}console.log("✅ Perfil encontrado e validado para o usu\xe1rio:",e.id,{email:s.email,plano:s.plano,nome:s.nome}),n.profile=s,s.plano&&["teste","basico","premium"].includes(s.plano)||(console.warn('⚠️ Plano inv\xe1lido no perfil, usando "teste" como padr\xe3o'),n.profile.plano="teste"),s.cpf&&eq(s.cpf)}else{var r,t;console.log("ℹ️ Perfil ainda n\xe3o criado na tabela profiles - isso \xe9 normal para novos usu\xe1rios"),n.profile={id:e.id,email:e.email||"",nome:(null===(r=e.user_metadata)||void 0===r?void 0:r.nome)||(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"Usu\xe1rio",plano:"teste",plano_status:null}}}catch(e){console.error("⚠️ Erro ao buscar perfil da tabela:",e)}let s=e.email_confirmed_at,o=e.created_at;console.log("\uD83D\uDD0D Verificando email_confirmed_at do usu\xe1rio:",{valorOriginal:s,tipo:typeof s,isNull:null===s,isUndefined:void 0===s,createdAt:o,emailConfirmedAt:s});let i=null;if(s&&o)try{let e=new Date(s),a=new Date(o),r=Math.abs((e.getTime()-a.getTime())/1e3);console.log("\uD83D\uDD0D Diferen\xe7a entre cria\xe7\xe3o e confirma\xe7\xe3o:",{diffSeconds:r,foiConfirmadoAutomaticamente:r<5}),r>=5?i=s:(console.log("⚠️ Email foi confirmado automaticamente pelo sistema, for\xe7ando verifica\xe7\xe3o manual"),i=null)}catch(e){console.error("Erro ao comparar datas:",e),i=s}else s&&(i=s);console.log("\uD83D\uDD0D Resultado final do email_confirmed_at:",{valorFinal:i,isConfirmed:!!i});let d={id:n.id,email:n.email||"",email_confirmed_at:i,created_at:n.created_at,updated_at:n.updated_at,profile:n.profile||null};console.log("✅ Definindo userProfile:",{email:d.email,hasProfile:!!d.profile,emailConfirmed:!!d.email_confirmed_at,emailConfirmedAtValue:d.email_confirmed_at,userId:d.id}),Q(d),ea(!1)}catch(e){console.error("❌ Erro ao continuar carregamento:",e),Q(null),ea(!1)}},eF=async()=>{let e=await (0,o.CG)();e.data&&U(e.data)},eV=async()=>{if(!L.trim())return;V(!0);let e=new FormData;e.append("nome",L.trim());let a=await (0,o.ht)(e);a.error?(0,j.createNotification)("Erro ao criar usu\xe1rio: "+a.error,"warning"):((0,j.createNotification)('Usu\xe1rio "'.concat(L.trim(),'" criado com sucesso!'),"success"),await eF(),"usuarios"!==T&&(R("usuarios"),M.push("/configuracoes?tab=usuarios")),O(""),W(!1)),V(!1)},eI=async()=>{if(!en||!eo||!ed){(0,j.createNotification)("Preencha todos os campos","warning");return}if(eo.length<6){(0,j.createNotification)("A nova senha deve ter pelo menos 6 caracteres","warning");return}if(eo!==ed){(0,j.createNotification)("As senhas n\xe3o coincidem","warning");return}eg(!0);let e=await (0,N.CJ)(en,eo);e.error?(0,j.createNotification)("Erro: "+e.error,"warning"):((0,j.createNotification)("Senha atualizada com sucesso!","success"),es(""),ei(""),el(""),et(!1)),eg(!1)},eW=async()=>{if(!(null==Y?void 0:Y.email)){(0,j.createNotification)("Email n\xe3o encontrado","warning");return}V(!0);let e=await (0,N.r7)();e.error?((0,j.createNotification)("Erro: "+e.error,"warning"),V(!1)):((0,j.createNotification)("C\xf3digo reenviado! Verifique sua caixa de entrada e spam.","success"),V(!1),eR(!0))},eL=async()=>{try{let e=(0,w.createClient)();await e.auth.signOut(),(0,j.createNotification)("Logout realizado com sucesso!","success"),window.location.href="/login"}catch(e){console.error("Erro ao fazer logout:",e),(0,j.createNotification)("Erro ao fazer logout","warning")}},eO=async()=>{if("RESETAR"!==ej){(0,j.createNotification)('Digite "RESETAR" para confirmar',"warning");return}ek(!0);let e=await (0,o.Vq)();e.error?(0,j.createNotification)("Erro ao resetar registros: "+e.error,"warning"):((0,j.createNotification)("Todos os registros foram resetados com sucesso!","success"),ey(!1),eN(""),setTimeout(()=>{window.location.reload()},1e3)),ek(!1)},eH=[{id:"geral",label:"Geral",icon:i.Z},{id:"usuarios",label:"Usu\xe1rios/Pessoas",icon:d.Z},{id:"perfil",label:"Perfil",icon:l.Z}];return(0,t.jsxs)("div",{className:"bg-brand-white dark:bg-brand-royal rounded-2xl shadow-lg border border-brand-clean dark:border-white/10 overflow-hidden",children:[(0,t.jsx)("div",{className:"border-b border-brand-clean overflow-x-auto scrollbar-hide",children:(0,t.jsx)("div",{className:"flex min-w-max",children:eH.map(e=>{let a=e.icon;return(0,t.jsxs)("button",{onClick:()=>{R(e.id),M.push("/configuracoes?tab=".concat(e.id))},className:"flex items-center gap-2 px-6 py-4 font-medium transition-smooth whitespace-nowrap flex-shrink-0 ".concat(T===e.id?"bg-brand-aqua/10 text-brand-aqua border-b-2 border-brand-aqua":"text-brand-midnight dark:text-brand-clean/60 hover:text-brand-midnight dark:text-brand-clean hover:bg-brand-clean dark:bg-brand-royal/50"),children:[(0,t.jsx)(a,{size:20,strokeWidth:2}),e.label]},e.id)})})}),(0,t.jsxs)("div",{className:"p-6",children:["geral"===T&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h2",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean mb-4",children:"Configura\xe7\xf5es Gerais"})}),(0,t.jsx)("div",{className:"space-y-3 pb-6 border-b border-gray-200 dark:border-white/10",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-green-600 dark:text-green-400",children:(0,t.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z",fill:"currentColor"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-brand-midnight dark:text-brand-clean mb-1",children:"Suporte no WhatsApp"}),(0,t.jsx)("p",{className:"text-sm text-brand-midnight/70 dark:text-brand-clean/70 mb-3",children:"Precisa de ajuda? Entre em contato conosco pelo WhatsApp. Nossa equipe est\xe1 pronta para ajudar voc\xea!"}),(0,t.jsxs)("a",{href:"https://wa.me/5511999999999?text=Ol\xe1!%20Preciso%20de%20ajuda%20com%20o%20PLENIPAY",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-green-600 dark:bg-green-500 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-600 transition-smooth font-medium text-sm",children:[(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-white",children:(0,t.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z",fill:"currentColor"})}),"Abrir WhatsApp"]})]})]})}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg",children:(0,t.jsx)(c.Z,{className:"text-red-600 dark:text-red-400",size:20,strokeWidth:2})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-brand-midnight dark:text-brand-clean mb-1",children:"Resetar Todos os Registros"}),(0,t.jsxs)("p",{className:"text-sm text-brand-midnight/70 dark:text-brand-clean/70 mb-3",children:["Esta a\xe7\xe3o ir\xe1 ",(0,t.jsx)("strong",{children:"permanentemente deletar"})," todos os seus registros financeiros, incluindo entradas, sa\xeddas e d\xedvidas. Esta a\xe7\xe3o n\xe3o pode ser desfeita."]}),(0,t.jsxs)("button",{onClick:()=>ey(!0),className:"inline-flex items-center gap-2 px-3 py-1.5 bg-red-600 dark:bg-red-500 text-white rounded-lg hover:bg-red-700 dark:hover:bg-red-600 transition-smooth font-medium text-sm",children:[(0,t.jsx)(u.Z,{size:16,strokeWidth:2}),"Resetar Todos os Registros"]})]})]})})]}),"perfil"===T&&(0,t.jsx)("div",{className:"space-y-6",children:ee?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-brand-midnight dark:text-brand-clean/60",children:"Carregando perfil..."})}):(null==Y?void 0:Y.error)?(0,t.jsx)("div",{className:"bg-brand-royal/30 dark:bg-brand-royal/20 rounded-xl p-6 border border-red-500/30",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(c.Z,{className:"mx-auto text-red-500 dark:text-red-400",size:48,strokeWidth:2}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-brand-midnight dark:text-brand-clean",children:"Erro ao carregar perfil"}),(0,t.jsx)("p",{className:"text-brand-midnight/70 dark:text-brand-clean/70",children:Y.message||"N\xe3o foi poss\xedvel carregar suas informa\xe7\xf5es do perfil."}),"session_missing"===Y.error&&(0,t.jsx)("p",{className:"text-sm text-brand-midnight/60 dark:text-brand-clean/60",children:"Sua sess\xe3o pode ter expirado. Por favor, fa\xe7a login novamente."}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center pt-2",children:[(0,t.jsx)("button",{onClick:()=>e$(),className:"px-6 py-2.5 bg-brand-aqua text-white rounded-lg hover:bg-brand-aqua/90 transition-smooth font-medium",children:"Tentar Novamente"}),"session_missing"===Y.error&&(0,t.jsx)("button",{onClick:()=>{(0,N.w7)().then(()=>{window.location.href="/login"})},className:"px-6 py-2.5 bg-brand-midnight dark:bg-brand-royal text-white rounded-lg hover:opacity-90 transition-smooth font-medium",children:"Fazer Login"})]})]})}):Y?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean mb-4",children:"Informa\xe7\xf5es do Perfil"}),(0,t.jsxs)("div",{className:"bg-brand-clean dark:bg-brand-royal/30 rounded-xl p-6 space-y-5 border border-brand-aqua/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 pb-4 border-b border-brand-midnight/10 dark:border-white/10",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-brand-aqua/20 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-brand-aqua font-bold text-2xl",children:((null===(a=Y.profile)||void 0===a?void 0:a.nome)||Y.email||"U").charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-brand-midnight dark:text-brand-clean",children:(null===(r=Y.profile)||void 0===r?void 0:r.nome)||(null===(D=Y.email)||void 0===D?void 0:D.split("@")[0])||"Usu\xe1rio"}),(0,t.jsx)("p",{className:"text-sm text-brand-midnight dark:text-brand-clean/60",children:Y.email||"Email n\xe3o dispon\xedvel"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-brand-midnight dark:text-brand-clean/70",children:"Email confirmado:"}),(0,t.jsx)("div",{className:"flex items-center gap-3",children:(()=>{let e=Y.email_confirmed_at,a=Y.created_at,r=!1;if(e){if(e&&a)try{let t=new Date(e),n=new Date(a),s=Math.abs((t.getTime()-n.getTime())/1e3);r=s>=30,console.log("\uD83D\uDD0D Verifica\xe7\xe3o de confirma\xe7\xe3o:",{diffSeconds:s,isConfirmed:r,motivo:s<30?"confirmado pelo bypass (n\xe3o contar)":"confirmado manualmente"})}catch(e){console.error("Erro ao comparar datas:",e),r=!1}}else r=!1;return console.log("\uD83D\uDD0D Status de confirma\xe7\xe3o de email no perfil:",{emailConfirmedAt:e,createdAt:a,isConfirmed:r,tipo:typeof e}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"font-medium ".concat(r?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400"),children:r?"✓ Confirmado":"✗ N\xe3o confirmado"}),!r&&(0,t.jsx)("button",{onClick:()=>eR(!0),className:"px-4 py-2 bg-brand-aqua text-white rounded-lg hover:bg-brand-aqua/90 transition-smooth font-medium text-sm",children:"Verificar agora"})]})})()})]}),(null===(S=Y.profile)||void 0===S?void 0:S.whatsapp)&&(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-brand-midnight dark:text-brand-clean/70",children:"WhatsApp:"}),(0,t.jsx)("span",{className:"text-brand-midnight dark:text-brand-clean",children:Y.profile.whatsapp})]}),(null===(E=Y.profile)||void 0===E?void 0:E.telefone)&&(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-brand-midnight dark:text-brand-clean/70",children:"Telefone:"}),(0,t.jsx)("span",{className:"text-brand-midnight dark:text-brand-clean",children:Y.profile.telefone})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-brand-midnight dark:text-brand-clean/70",children:"CPF:"}),ez?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"text",value:e_,onChange:e=>{let a=e.target.value.replace(/\D/g,"");a.length<=11&&eq(a.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"))},placeholder:"000.000.000-00",maxLength:14,className:"px-3 py-2 bg-white dark:bg-brand-midnight border border-brand-aqua rounded-lg text-brand-midnight dark:text-brand-clean text-sm w-full max-w-xs focus:outline-none focus:border-brand-aqua"}),(0,t.jsx)("button",{onClick:async()=>{eA(!0);try{let e=(0,w.createClient)(),{data:{user:a}}=await e.auth.getUser();if(a){let{error:r}=await e.from("profiles").update({cpf:e_.replace(/\D/g,"")}).eq("id",a.id);r?(0,j.createNotification)("Erro ao salvar CPF: "+r.message,"warning"):((0,j.createNotification)("CPF salvo com sucesso!","success"),eP(!1),e$())}}catch(e){(0,j.createNotification)("Erro ao salvar CPF","warning")}finally{eA(!1)}},disabled:eM||!e_.replace(/\D/g,"").match(/^\d{11}$/),className:"px-4 py-2 bg-brand-aqua text-white rounded-lg hover:bg-brand-aqua/90 transition-smooth font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:eM?"Salvando...":"Salvar"}),(0,t.jsx)("button",{onClick:()=>{var e;eP(!1),eq((null===(e=Y.profile)||void 0===e?void 0:e.cpf)||"")},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-smooth font-medium text-sm",children:"Cancelar"})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-brand-midnight dark:text-brand-clean",children:(null===(_=Y.profile)||void 0===_?void 0:_.cpf)?Y.profile.cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):"N\xe3o informado"}),(0,t.jsx)("button",{onClick:()=>{var e;eq((null===(e=Y.profile)||void 0===e?void 0:e.cpf)||""),eP(!0)},className:"text-brand-aqua hover:text-brand-aqua/80 transition-smooth font-medium text-sm underline",children:(null===(q=Y.profile)||void 0===q?void 0:q.cpf)?"Editar":"Adicionar"})]})]}),(null===(z=Y.profile)||void 0===z?void 0:z.plano)&&(0,t.jsxs)(t.Fragment,{children:["teste"===Y.profile.plano&&(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-brand-midnight dark:text-brand-clean/70",children:"Fazer Upgrade:"}),(0,t.jsxs)("button",{onClick:()=>M.push("/upgrade"),className:"w-full max-w-xs px-4 py-2.5 bg-gradient-to-r from-brand-aqua to-blue-500 text-white rounded-lg font-semibold hover:from-brand-aqua/90 hover:to-blue-400 transition-smooth flex items-center justify-center gap-2 shadow-md hover:shadow-lg",children:[(0,t.jsx)(m.Z,{size:18}),"Fazer Upgrade"]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-brand-midnight dark:text-brand-clean/70",children:"Plano:"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"px-3 py-1.5 bg-brand-aqua/20 text-brand-aqua rounded-lg font-medium capitalize",children:Y.profile.plano}),Y.profile.plano_status&&(0,t.jsx)("span",{className:"px-2 py-1 text-xs rounded-lg font-medium ".concat("ativo"===Y.profile.plano_status?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"),children:Y.profile.plano_status})]})]})]}),!1]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean mb-4",children:"Seguran\xe7a"}),(0,t.jsx)("div",{className:"space-y-4",children:er?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Senha Atual"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:ec?"text":"password",value:en,onChange:e=>es(e.target.value),className:"w-full px-4 py-3 bg-white dark:bg-brand-midnight border border-gray-300 rounded-xl focus:outline-none focus:border-brand-aqua transition-smooth pr-12 text-brand-midnight dark:text-brand-clean",placeholder:"Digite sua senha atual"}),(0,t.jsx)("button",{type:"button",onClick:()=>eu(!ec),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-brand-midnight dark:text-brand-clean/60 hover:text-brand-aqua",children:ec?(0,t.jsx)(b.Z,{size:20}):(0,t.jsx)(h.Z,{size:20})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Nova Senha"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:em?"text":"password",value:eo,onChange:e=>ei(e.target.value),className:"w-full px-4 py-3 bg-white dark:bg-brand-midnight border border-gray-300 rounded-xl focus:outline-none focus:border-brand-aqua transition-smooth pr-12 text-brand-midnight dark:text-brand-clean",placeholder:"Digite a nova senha"}),(0,t.jsx)("button",{type:"button",onClick:()=>ex(!em),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-brand-midnight dark:text-brand-clean/60 hover:text-brand-aqua",children:em?(0,t.jsx)(b.Z,{size:20}):(0,t.jsx)(h.Z,{size:20})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Confirmar Nova Senha"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:eb?"text":"password",value:ed,onChange:e=>el(e.target.value),className:"w-full px-4 py-3 bg-white dark:bg-brand-midnight border border-gray-300 rounded-xl focus:outline-none focus:border-brand-aqua transition-smooth pr-12 text-brand-midnight dark:text-brand-clean",placeholder:"Confirme a nova senha"}),(0,t.jsx)("button",{type:"button",onClick:()=>eh(!eb),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-brand-midnight dark:text-brand-clean/60 hover:text-brand-aqua",children:eb?(0,t.jsx)(b.Z,{size:20}):(0,t.jsx)(h.Z,{size:20})})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:eI,disabled:ef,className:"flex-1 px-4 py-3 bg-brand-aqua text-brand-midnight dark:text-brand-clean rounded-xl font-semibold hover:bg-brand-aqua/90 shadow-md transition-smooth disabled:opacity-50",children:ef?"Atualizando...":"Atualizar Senha"}),(0,t.jsx)("button",{onClick:()=>{et(!1),es(""),ei(""),el("")},className:"px-4 py-3 bg-brand-clean dark:bg-brand-royal text-brand-midnight dark:text-brand-clean rounded-xl font-semibold hover:bg-brand-clean dark:bg-brand-royal/80 transition-smooth",children:"Cancelar"})]})]}):(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsxs)("button",{onClick:()=>et(!0),className:"px-3 py-1.5 text-brand-aqua hover:text-brand-aqua/80 hover:bg-brand-aqua/10 rounded-lg font-medium transition-smooth flex items-center gap-2 text-sm",children:[(0,t.jsx)(x.Z,{size:16}),"Redefinir Senha"]})})})]}),Y&&(!Y.email_confirmed_at||null===Y.email_confirmed_at||void 0===Y.email_confirmed_at||""===Y.email_confirmed_at)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean mb-4",children:"Confirma\xe7\xe3o de Email"}),(0,t.jsx)("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-xl p-6",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-16 h-16 bg-orange-100 dark:bg-orange-900/40 rounded-full",children:(0,t.jsx)(f.Z,{className:"text-orange-600 dark:text-orange-400",size:32})}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("p",{className:"text-orange-800 dark:text-orange-200 font-semibold text-base",children:"Seu email ainda n\xe3o foi confirmado"}),(0,t.jsx)("p",{className:"text-orange-700 dark:text-orange-300 text-sm max-w-md",children:"Verifique sua caixa de entrada e spam. Se n\xe3o recebeu o email, clique no bot\xe3o abaixo para reenviar."})]}),(0,t.jsxs)("button",{onClick:eW,disabled:F,className:"w-full max-w-xs px-4 py-2.5 bg-orange-600 dark:bg-orange-500 text-white rounded-lg font-semibold hover:bg-orange-700 dark:hover:bg-orange-600 shadow-md transition-smooth disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,t.jsx)(f.Z,{size:18}),F?"Enviando...":"Reenviar Email de Confirma\xe7\xe3o"]})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean mb-4",children:"Sess\xe3o"}),(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsxs)("button",{onClick:()=>eC(!0),className:"px-3 py-1.5 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-medium transition-smooth flex items-center gap-2 text-sm",children:[(0,t.jsx)(g.Z,{size:16}),"Sair da Conta"]})})]})]})}):null===Y?(0,t.jsx)("div",{className:"bg-brand-royal/30 dark:bg-brand-royal/20 rounded-xl p-6 border border-red-500/30",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(c.Z,{className:"mx-auto text-red-500 dark:text-red-400",size:48,strokeWidth:2}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-brand-midnight dark:text-brand-clean",children:"Erro ao carregar perfil"}),(0,t.jsx)("p",{className:"text-brand-midnight/70 dark:text-brand-clean/70",children:"N\xe3o foi poss\xedvel carregar suas informa\xe7\xf5es do perfil. Isso pode acontecer se sua sess\xe3o expirou."}),(0,t.jsx)("p",{className:"text-sm text-brand-midnight/60 dark:text-brand-clean/60",children:"Por favor, tente novamente ou fa\xe7a login novamente se o problema persistir."}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center pt-2",children:[(0,t.jsx)("button",{onClick:async()=>{console.log("\uD83D\uDD04 Tentando recarregar perfil..."),ea(!0),await new Promise(e=>setTimeout(e,500)),e$()},className:"px-6 py-2.5 bg-brand-aqua text-white rounded-lg hover:bg-brand-aqua/90 transition-smooth font-medium",children:"Tentar Novamente"}),(0,t.jsx)("button",{onClick:async()=>{try{await (0,N.w7)()}catch(e){console.error("Erro ao fazer logout:",e)}window.location.href="/login"},className:"px-6 py-2.5 bg-brand-midnight dark:bg-brand-royal text-white rounded-lg hover:opacity-90 transition-smooth font-medium",children:"Fazer Login"})]})]})}):(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-brand-midnight dark:text-brand-clean/60",children:"Carregando..."})})}),"usuarios"===T&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("h2",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean",children:"Gerenciar Usu\xe1rios/Pessoas"}),(0,t.jsxs)("button",{onClick:()=>W(!I),className:"px-3 py-1.5 bg-brand-aqua/90 text-brand-midnight dark:text-brand-clean rounded-lg font-medium hover:bg-brand-aqua shadow-sm hover:shadow-md transition-smooth flex items-center gap-1.5 text-sm whitespace-nowrap",children:[(0,t.jsx)(p.Z,{size:16,strokeWidth:2.5}),(0,t.jsx)("span",{children:"Novo Usu\xe1rio"})]})]}),I&&(0,t.jsx)("div",{className:"p-4 bg-brand-clean dark:bg-brand-royal/30 rounded-xl border border-gray-200 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:L,onChange:e=>O(e.target.value),onKeyPress:e=>"Enter"===e.key&&eV(),placeholder:"Nome do novo usu\xe1rio",className:"flex-1 px-4 py-2 bg-white dark:bg-brand-midnight border border-gray-300 rounded-lg text-brand-midnight dark:text-brand-clean placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-smooth"}),(0,t.jsx)("button",{onClick:eV,disabled:F||!L.trim(),className:"px-6 py-2 bg-brand-aqua text-white rounded-lg hover:bg-blue-600 shadow-md transition-smooth disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:F?"Criando...":"Criar"}),(0,t.jsx)("button",{onClick:()=>{W(!1),O("")},className:"px-4 py-2 bg-brand-clean dark:bg-brand-royal text-brand-midnight dark:text-brand-clean rounded-lg hover:bg-brand-clean dark:bg-brand-royal/80 transition-smooth",children:(0,t.jsx)(y.Z,{size:18})})]})}),(0,t.jsx)("div",{className:"space-y-3",children:0===$.length?(0,t.jsx)("div",{className:"text-center py-12 bg-brand-clean dark:bg-brand-royal/30 rounded-xl",children:(0,t.jsx)("p",{className:"text-brand-midnight dark:text-brand-clean/60",children:"Nenhum usu\xe1rio cadastrado ainda"})}):$.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-white dark:bg-brand-midnight/60 border border-gray-200 rounded-xl hover:bg-brand-clean dark:bg-brand-royal/50 transition-smooth backdrop-blur-sm flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-brand-aqua/20 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-brand-aqua font-bold text-xl",children:e.nome.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-brand-midnight dark:text-brand-clean",children:e.nome}),(0,t.jsxs)("p",{className:"text-xs text-brand-midnight dark:text-brand-clean/50",children:["Criado em ",new Date(e.created_at).toLocaleDateString("pt-BR")]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>B(e),className:"p-2 text-brand-aqua hover:bg-brand-aqua/10 rounded-lg transition-smooth",title:"Editar",children:(0,t.jsx)(v.Z,{size:18,strokeWidth:2})}),(0,t.jsx)("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-smooth",title:"Excluir",onClick:()=>{eE(e),eD(!0)},children:(0,t.jsx)(k.Z,{size:18,strokeWidth:2})})]})]},e.id))})]})]}),ep&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 glass-backdrop",children:(0,t.jsxs)("div",{className:"bg-brand-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-slide-up border border-brand-clean",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,t.jsx)(c.Z,{className:"text-red-600",size:24,strokeWidth:2})}),(0,t.jsx)("h3",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean",children:"Confirmar Reset de Registros"})]}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("p",{className:"text-brand-midnight dark:text-brand-clean/80",children:["Voc\xea est\xe1 prestes a ",(0,t.jsx)("strong",{className:"text-red-600",children:"permanentemente deletar"})," todos os seus registros financeiros."]}),(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[(0,t.jsx)("p",{className:"text-sm text-red-800 font-medium",children:"⚠️ Esta a\xe7\xe3o n\xe3o pode ser desfeita!"}),(0,t.jsxs)("ul",{className:"mt-2 text-sm text-red-700 space-y-1 list-disc list-inside",children:[(0,t.jsx)("li",{children:"Todos os registros de entrada ser\xe3o deletados"}),(0,t.jsx)("li",{children:"Todos os registros de sa\xedda ser\xe3o deletados"}),(0,t.jsx)("li",{children:"Todas as d\xedvidas ser\xe3o deletadas"}),(0,t.jsx)("li",{children:"Todos os empr\xe9stimos ser\xe3o deletados"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-brand-midnight dark:text-brand-clean mb-2",children:["Digite ",(0,t.jsx)("strong",{className:"text-red-600",children:"RESETAR"})," para confirmar:"]}),(0,t.jsx)("input",{type:"text",value:ej,onChange:e=>eN(e.target.value),placeholder:"Digite RESETAR",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:border-red-500 transition-smooth text-brand-midnight dark:text-brand-clean bg-white dark:bg-brand-midnight",autoFocus:!0})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>{ey(!1),eN("")},disabled:ev,className:"flex-1 px-4 py-2 bg-brand-clean dark:bg-brand-royal text-brand-midnight dark:text-brand-clean rounded-xl hover:bg-brand-clean dark:bg-brand-royal/80 transition-smooth font-medium disabled:opacity-50",children:"Cancelar"}),(0,t.jsx)("button",{onClick:eO,disabled:ev||"RESETAR"!==ej,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-smooth font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ev?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{children:"Resetando..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{size:18,strokeWidth:2}),(0,t.jsx)("span",{children:"Confirmar Reset"})]})})]})]})}),ew&&(0,t.jsx)(C.Z,{titulo:"Confirmar Sa\xedda",mensagem:"Tem certeza que deseja sair da sua conta?",onConfirmar:eL,onCancelar:()=>eC(!1),textoConfirmar:"Sair",tipo:"warning"}),eZ&&eS&&(0,t.jsx)(C.Z,{titulo:"Excluir Usu\xe1rio",mensagem:'Tem certeza que deseja excluir "'.concat(eS.nome,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita.'),onConfirmar:()=>{(0,j.createNotification)("Funcionalidade de exclus\xe3o em desenvolvimento","info"),eD(!1),eE(null)},onCancelar:()=>{eD(!1),eE(null)},textoConfirmar:"Excluir",tipo:"danger"}),eT&&(null==Y?void 0:Y.email)&&(0,t.jsx)(Z.Z,{email:Y.email,obrigatorio:!1,onConfirmado:()=>{eR(!1),e$(),(0,j.createNotification)("Email confirmado com sucesso!","success")},onClose:()=>{eR(!1)}})]})}},83302:function(e,a,r){"use strict";r.d(a,{Z:function(){return o}});var t=r(57437),n=r(72894),s=r(82549);function o(e){let{titulo:a,mensagem:r,onConfirmar:o,onCancelar:i,textoConfirmar:d="Confirmar",textoCancelar:l="Cancelar",tipo:c="warning",loading:u=!1}=e,m={danger:{bg:"bg-red-100",icon:"text-red-600",botao:"bg-red-600 hover:bg-red-700",border:"border-red-200"},warning:{bg:"bg-orange-100",icon:"text-orange-600",botao:"bg-orange-600 hover:bg-orange-700",border:"border-orange-200"},info:{bg:"bg-blue-100",icon:"text-blue-600",botao:"bg-blue-600 hover:bg-blue-700",border:"border-blue-200"}}[c];return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-white via-white to-gray-50 dark:from-brand-royal dark:via-brand-midnight dark:to-brand-royal rounded-3xl shadow-2xl max-w-sm w-full p-6 animate-slide-up border-2 border-brand-aqua/30 dark:border-brand-aqua/40",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-5",children:[(0,t.jsx)("div",{className:"p-3 ".concat(m.bg," rounded-xl shadow-lg"),children:(0,t.jsx)(n.Z,{className:m.icon,size:24,strokeWidth:2.5})}),(0,t.jsx)("h3",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean flex-1",children:a}),(0,t.jsx)("button",{onClick:i,disabled:u,className:"p-2 hover:bg-red-500/20 dark:hover:bg-red-500/30 rounded-xl transition-smooth disabled:opacity-50",children:(0,t.jsx)(s.Z,{size:20,className:"text-brand-midnight dark:text-brand-clean",strokeWidth:2.5})})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("p",{className:"text-sm text-brand-midnight/80 dark:text-brand-clean/70 leading-relaxed",children:r})}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:i,disabled:u,className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-brand-midnight text-brand-midnight dark:text-brand-clean rounded-xl hover:bg-gray-200 dark:hover:bg-white/10 transition-smooth font-semibold disabled:opacity-50 text-sm border-2 border-gray-200 dark:border-white/20",children:l}),(0,t.jsx)("button",{onClick:o,disabled:u,className:"flex-1 px-4 py-3 ".concat(m.botao," text-white rounded-xl transition-smooth font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm shadow-lg hover:shadow-xl"),children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{children:"Processando..."})]}):d})]})]})})}},25727:function(e,a,r){"use strict";r.d(a,{CG:function(){return m},HR:function(){return y},It:function(){return h},Ju:function(){return f},M0:function(){return u},Qs:function(){return n},Ti:function(){return p},Vq:function(){return b},Xc:function(){return k},Yw:function(){return d},criarRegistro:function(){return s},gp:function(){return g},ho:function(){return c},ht:function(){return x},pL:function(){return o},uX:function(){return v},ue:function(){return l},v2:function(){return i}}),r(15355);var t=r(31162),n=(0,t.$)("0677e679ab9ad88dcae5f5ed21d3e091a8ece2a2"),s=(0,t.$)("230f57158249c34d410702e12e5ed20109a82cb5"),o=(0,t.$)("331e00a8bd55fbc4647894e75deb9d622e65262b"),i=(0,t.$)("7a5812df7fa537449e30af8482b959119bb5a3b9"),d=(0,t.$)("189acde9d8ba09cf1fa4502a831d11adfdef214a"),l=(0,t.$)("1c6f6257e327d1a8298c81a2c176b2cf4f67c259"),c=(0,t.$)("c2c5c8dc8a684f1448fe15864b09bb63a503a1f0"),u=(0,t.$)("0a9ef55d10fe0c4ac929c2a10460a36a857f415e"),m=(0,t.$)("05ebcbba5892735c1439f199b8d0bb629920a73c"),x=(0,t.$)("515d1ab9d9a146a826a501e3cbfac0b203edf4ac"),b=(0,t.$)("c57ff1267c026993a0b18696f79e908f72fbb6ab");(0,t.$)("8a3728cd313d0e727c1792c87e6ea0e6968cbfbf");var h=(0,t.$)("9cf5ff030e23581d3720e53c2dc93d2fe8cf283c");(0,t.$)("38ec628be9394ddc2becfcdf37826b7d2bab44a1");var f=(0,t.$)("7af002ae1f9efeacd79c403b3fa388cff4789c53"),g=(0,t.$)("5aaa6054274ead32c9c2f1bfde761a706bb325fc"),p=(0,t.$)("f4f80106626033d46b812b45e7973e34bc6c73f6");(0,t.$)("55c7e515dbccb193beccc282665c7cd0068bb3f0");var y=(0,t.$)("0305e3a8646bd650b9adafe954666989ab036d34"),v=(0,t.$)("028c880afc441a7abca2ca63f71e47d33a85bc72"),k=(0,t.$)("d7385b3e8fa7fcedf5527c95854e0457bfbb991c")},67447:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e,a){for(var r in a)Object.defineProperty(e,r,{enumerable:!0,get:a[r]})}(a,{unstable_getImgProps:function(){return d},default:function(){return l}});let t=r(21024),n=r(38630),s=r(76184),o=r(81749),i=t._(r(10536)),d=e=>{(0,s.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:a}=(0,n.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(a))void 0===r&&delete a[e];return{props:a}},l=o.Image},31162:function(e,a,r){"use strict";Object.defineProperty(a,"$",{enumerable:!0,get:function(){return n}});let t=r(15355);function n(e){let{createServerReference:a}=r(6671);return a(e,t.callServer)}},16691:function(e,a,r){e.exports=r(67447)},61396:function(e,a,r){e.exports=r(25250)},24033:function(e,a,r){e.exports=r(15313)}},function(e){e.O(0,[5250,4962,889,1749,3468,982,9616,2971,4938,1744],function(){return e(e.s=81597)}),_N_E=e.O()}]);