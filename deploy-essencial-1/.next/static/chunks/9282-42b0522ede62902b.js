"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9282],{89282:function(a,e,r){r.d(e,{Z:function(){return S}});var t=r(57437),d=r(2265),n=r(25727),i=r(97980),o=r(29251),s=r(77480),l=r(86712),c=r(17810),b=r(33344),m=r(69057),u=r(67405),x=r(67842),g=r(14493),h=r(82549),p=r(67972),f=r(9883),v=r(21271),k=r(71738),y=r(34822),j=r(45367),w=r(24033),N=r(53468),q=r(500),_=r(93750);function S(a){let{registro:e,onClose:S}=a,C=(0,w.useRouter)(),[Z,D]=(0,d.useState)(!1),[$,z]=(0,d.useState)([]),[E,I]=(0,d.useState)([]),[R,F]=(0,d.useState)(""),[P,W]=(0,d.useState)(!1),[O,A]=(0,d.useState)(null),[L,U]=(0,d.useState)([]),[B,G]=(0,d.useState)([]),[T,V]=(0,d.useState)({nome:"",observacao:"",user_id:"",tipo:"saida",valor:"",categoria:"",metodo_pagamento:"dinheiro",parcelas_totais:"1",parcelas_pagas:"0",data_registro:""}),J=[{id:"alimentacao",nome:"Alimenta\xe7\xe3o",icon:i.Z},{id:"transporte",nome:"Transporte",icon:o.Z},{id:"moradia",nome:"Moradia",icon:s.Z},{id:"compras",nome:"Compras",icon:l.Z},{id:"saude",nome:"Sa\xfade",icon:c.Z},{id:"educacao",nome:"Educa\xe7\xe3o",icon:b.Z},{id:"trabalho",nome:"Trabalho",icon:m.Z},{id:"entretenimento",nome:"Entretenimento",icon:u.Z},{id:"fitness",nome:"Fitness",icon:x.Z},{id:"viagem",nome:"Viagem",icon:g.Z}],M=a=>{var e;if(!a)return null;let r=a.split("\n"),t=null===(e=r[r.length-1])||void 0===e?void 0:e.trim();if(t&&t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t),t}catch(a){}return null},X=a=>a?a.split("\n").filter(a=>{let e=a.trim();return!(e.startsWith("[")&&e.endsWith("]"))}).join("\n").trim():"",K=async a=>{try{let e=a.nome.replace(/\s*-\s*Parcela\s*\d+.*$/i,"").trim(),r=await (0,n.ho)({tipo:"divida",user_id:a.user_id});if(r.data){let t=r.data.filter(r=>r.nome.replace(/\s*-\s*Parcela\s*\d+.*$/i,"").trim()===e&&r.id!==a.id);G([a,...t]);let d=[a,...t].map(a=>{let e=parseFloat(a.valor.toString()),r=a.parcelas_totais||1;return{id:a.id,valor:new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(r>0?e/r:e),data:new Date(a.data_registro).toISOString().slice(0,16),quantidade:r.toString()}});U(d)}}catch(a){console.error("Erro ao buscar parcelas relacionadas:",a)}};(0,d.useEffect)(()=>{if(e){var a,r;let t=(null===(a=e.etiquetas)||void 0===a?void 0:a.find(a=>["pix","cartao","dinheiro"].includes(a)))||"dinheiro",d=X(e.observacao);V({nome:e.nome.replace(/\s*-\s*Parcela\s*\d+.*$/i,"").trim(),observacao:d,user_id:e.user_id,tipo:e.tipo,valor:e.valor.toString(),categoria:e.categoria||"",metodo_pagamento:t,parcelas_totais:e.parcelas_totais.toString(),parcelas_pagas:e.parcelas_pagas.toString(),data_registro:new Date(e.data_registro).toISOString().slice(0,16)}),I((null===(r=e.etiquetas)||void 0===r?void 0:r.filter(a=>!["pix","cartao","dinheiro"].includes(a)))||[]),e.user&&A(e.user),"divida"===e.tipo?K(e):(U([]),G([]))}else V({nome:"",observacao:"",user_id:"",tipo:"saida",valor:"",categoria:"",metodo_pagamento:"dinheiro",parcelas_totais:"1",parcelas_pagas:"0",data_registro:new Date().toISOString().slice(0,16)}),I([]),A(null),U([]),G([]);aa()},[e]);let Q=a=>{L.length>1&&U(L.filter((e,r)=>r!==a))},H=(a,e,r)=>{let t=[...L];"valor"===e?t[a].valor=(0,_.v)(r):t[a][e]=r,U(t)},Y=()=>L.reduce((a,e)=>a+(0,_.d)(e.valor)*(parseInt(e.quantidade)||1),0),aa=async()=>{let a=await (0,n.CG)();a.data&&z(a.data)},ae=()=>{R.trim()&&!E.includes(R.trim())&&(I([...E,R.trim()]),F(""))},ar=a=>{I(E.filter(e=>e!==a))},at=async a=>{a.preventDefault(),D(!0);let t=(0,_.d)(T.valor);if(isNaN(t)){(0,N.createNotification)("Valor inv\xe1lido","warning"),D(!1);return}if(e){let a=M(e.observacao),r=T.observacao.trim();a&&(r=r?"".concat(r,"\n").concat(a):a);let d=t,i=new Date(T.data_registro).toISOString(),o=T.parcelas_totais,s=T.nome;if("divida"===e.tipo&&L.length>0){let a=L.find(a=>a.id===e.id)||L[0],r=(0,_.d)(a.valor),t=parseInt(a.quantidade)||1;if(d=r*t,i=new Date(a.data).toISOString(),o=t.toString(),L.length>1){let a=L.findIndex(a=>a.id===e.id);a>=0&&(s="".concat(T.nome," - Parcela ").concat(a+1))}let l=L.filter(a=>a.id&&a.id!==e.id).map(async a=>{let e=(0,_.d)(a.valor),r=parseInt(a.quantidade)||1,t=new FormData,d=L.findIndex(e=>e.id===a.id),i=L.length>1?"".concat(T.nome," - Parcela ").concat(d+1):T.nome;t.append("nome",i),t.append("observacao",T.observacao),t.append("user_id",T.user_id),t.append("tipo","divida"),t.append("valor",(e*r).toFixed(2)),t.append("categoria",T.categoria);let o=E.find(a=>["pix","cartao","dinheiro"].includes(a))||T.metodo_pagamento,s=[...E.filter(a=>!["pix","cartao","dinheiro"].includes(a)),o];return t.append("etiquetas",JSON.stringify(s)),t.append("parcelas_totais",r.toString()),t.append("parcelas_pagas","0"),t.append("data_registro",new Date(a.data).toISOString()),(0,n.pL)(a.id,t).catch(a=>(console.error("Erro ao atualizar parcela:",a),{error:a.message}))});await Promise.all(l)}let l=new FormData;l.append("nome",s),l.append("observacao",r),l.append("user_id",T.user_id),l.append("tipo",T.tipo),l.append("valor",d.toString()),l.append("categoria",T.categoria);let c=E.find(a=>["pix","cartao","dinheiro"].includes(a))||T.metodo_pagamento,b=[...E.filter(a=>!["pix","cartao","dinheiro"].includes(a)),c];l.append("etiquetas",JSON.stringify(b)),l.append("parcelas_totais",o),l.append("parcelas_pagas",T.parcelas_pagas),l.append("data_registro",i);let m=await (0,n.pL)(e.id,l);m.error?(0,N.createNotification)("Erro ao atualizar registro: "+m.error,"warning"):((0,N.createNotification)('Registro "'.concat(s,'" atualizado com sucesso!'),"success"),S(),C.refresh())}else{let{criarRegistro:a}=await Promise.resolve().then(r.bind(r,25727)),e=new FormData;e.append("nome",T.nome),e.append("observacao",T.observacao),e.append("user_id",T.user_id),e.append("tipo",T.tipo),e.append("valor",t.toString()),e.append("categoria",T.categoria);let d=E.find(a=>["pix","cartao","dinheiro"].includes(a))||T.metodo_pagamento,n=[...E.filter(a=>!["pix","cartao","dinheiro"].includes(a)),d];e.append("etiquetas",JSON.stringify(n)),e.append("parcelas_totais",T.parcelas_totais),e.append("parcelas_pagas",T.parcelas_pagas),e.append("data_registro",new Date(T.data_registro).toISOString());let i=await a(e);i.error?(0,N.createNotification)("Erro ao criar registro: "+i.error,"warning"):((0,N.createNotification)('Registro "'.concat(T.nome,'" criado com sucesso!'),"success"),S(),C.refresh())}D(!1)};return(0,t.jsxs)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4 animate-fade-in",style:{top:0,left:0,right:0,bottom:0,width:"100vw",height:"100vh"},children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-white via-white to-gray-50 dark:from-brand-royal dark:via-brand-midnight dark:to-brand-royal rounded-3xl max-w-xl w-full max-h-[85vh] flex flex-col shadow-2xl animate-slide-up overflow-hidden border-2 border-brand-aqua/30 dark:border-brand-aqua/40",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 border-b-2 border-brand-aqua/20 dark:border-brand-aqua/30 px-6 py-5 flex items-center justify-between bg-gradient-to-r from-brand-aqua/10 via-brand-aqua/5 to-transparent dark:from-brand-aqua/20 dark:via-brand-aqua/10",children:[(0,t.jsx)("h2",{className:"text-2xl font-display font-bold text-brand-midnight dark:text-brand-clean",children:e?"Editar Registro":"Novo Registro"}),(0,t.jsx)("button",{onClick:S,className:"p-2 hover:bg-red-500/20 dark:hover:bg-red-500/30 rounded-xl transition-smooth",children:(0,t.jsx)(h.Z,{size:22,className:"text-brand-midnight dark:text-brand-clean",strokeWidth:2.5})})]}),(0,t.jsxs)("form",{onSubmit:at,className:"flex flex-col flex-1 min-h-0 bg-white/50 dark:bg-brand-midnight/60 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-5 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Nome do registro *"}),(0,t.jsx)("input",{type:"text",required:!0,value:T.nome,onChange:a=>V({...T,nome:a.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50",placeholder:"Ex: Sal\xe1rio mensal, Aluguel, Supermercado, Conta de luz..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Observa\xe7\xe3o"}),(0,t.jsx)("textarea",{value:T.observacao,onChange:a=>V({...T,observacao:a.target.value}),rows:2,className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50 resize-none",placeholder:"Adicione detalhes sobre este registro. Ex: 'Pagamento da conta de luz do m\xeas de novembro', 'Compra de mantimentos para a semana'..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Usu\xe1rio/Envolvido"}),(0,t.jsxs)("button",{type:"button",onClick:()=>W(!0),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg hover:bg-gray-50 dark:hover:bg-white/5 focus:outline-none focus:border-brand-aqua transition-smooth flex items-center justify-between text-left text-sm",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:O?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-7 h-7 rounded-full bg-brand-aqua/20 dark:bg-brand-aqua/30 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-brand-aqua font-bold text-xs",children:O.nome.charAt(0).toUpperCase()})}),(0,t.jsx)("span",{className:"text-brand-midnight dark:text-brand-clean text-sm",children:O.nome})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Z,{size:18,className:"text-brand-midnight/50 dark:text-brand-clean/50"}),(0,t.jsx)("span",{className:"text-brand-midnight/50 dark:text-brand-clean/50 text-sm",children:"Selecione um usu\xe1rio"})]})}),(0,t.jsx)(f.Z,{size:18,className:"text-brand-aqua"})]}),(0,t.jsx)("p",{className:"mt-1 text-[10px] text-brand-midnight/60 dark:text-brand-clean/60",children:"Selecione a pessoa respons\xe1vel ou envolvida neste registro. Ex: Voc\xea mesmo, C\xf4njuge, Filho, etc."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Tipo de registro *"}),(0,t.jsxs)("div",{className:"grid gap-2 ".concat(e&&"divida"===e.tipo?"grid-cols-3":"grid-cols-2"),children:[(0,t.jsx)("button",{type:"button",onClick:()=>V({...T,tipo:"entrada"}),className:"px-4 py-2.5 rounded-lg font-medium transition-smooth text-sm ".concat("entrada"===T.tipo?"bg-green-500 text-white shadow-md":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800"),children:"Entrada"}),(0,t.jsx)("button",{type:"button",onClick:()=>V({...T,tipo:"saida"}),className:"px-4 py-2.5 rounded-lg font-medium transition-smooth text-sm ".concat("saida"===T.tipo?"bg-red-500 text-white shadow-md":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-800"),children:"Sa\xedda"}),e&&"divida"===e.tipo&&(0,t.jsx)("button",{type:"button",onClick:()=>V({...T,tipo:"divida"}),className:"px-4 py-2.5 rounded-lg font-medium transition-smooth text-sm ".concat("divida"===T.tipo?"bg-orange-500 text-white shadow-md":"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 border border-orange-200 dark:border-orange-800"),children:"D\xedvida"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Valor *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-brand-midnight/70 dark:text-brand-clean/70 font-medium text-sm",children:"R$"}),(0,t.jsx)("input",{type:"text",required:!0,value:T.valor,onChange:a=>{let e=(0,_.v)(a.target.value);V({...T,valor:e})},placeholder:"0,00",className:"w-full pl-10 pr-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Categoria"}),(0,t.jsx)("div",{className:"grid grid-cols-5 gap-2",children:J.map(a=>{let e=a.icon,r=T.categoria===a.id;return(0,t.jsxs)("button",{type:"button",onClick:()=>V({...T,categoria:r?"":a.id}),className:"flex flex-col items-center gap-1 px-2 py-2 rounded-lg font-medium transition-smooth text-xs overflow-hidden ".concat(r?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"),title:a.nome,children:[(0,t.jsx)(e,{size:18,strokeWidth:2}),(0,t.jsx)("span",{className:"text-[10px] leading-tight text-center break-words max-w-full px-1",children:a.nome})]},a.id)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"M\xe9todo de Pagamento *"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>V({...T,metodo_pagamento:"pix"}),className:"flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ".concat("pix"===T.metodo_pagamento?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"),children:[(0,t.jsx)(v.Z,{size:18,strokeWidth:2}),(0,t.jsx)("span",{children:"PIX"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>V({...T,metodo_pagamento:"cartao"}),className:"flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ".concat("cartao"===T.metodo_pagamento?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"),children:[(0,t.jsx)(k.Z,{size:18,strokeWidth:2}),(0,t.jsx)("span",{children:"Cart\xe3o"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>V({...T,metodo_pagamento:"dinheiro"}),className:"flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ".concat("dinheiro"===T.metodo_pagamento?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"),children:[(0,t.jsx)(y.Z,{size:18,strokeWidth:2}),(0,t.jsx)("span",{children:"Dinheiro"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Etiquetas"}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,t.jsx)("input",{type:"text",value:R,onChange:a=>F(a.target.value),onKeyPress:a=>"Enter"===a.key&&(a.preventDefault(),ae()),className:"flex-1 px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50",placeholder:"Adicionar etiqueta"}),(0,t.jsx)("button",{type:"button",onClick:ae,className:"px-3 py-2 bg-brand-aqua text-brand-midnight rounded-lg hover:bg-brand-aqua/90 transition-smooth text-sm",children:(0,t.jsx)(f.Z,{size:16})})]}),E.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:E.map((a,e)=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-brand-aqua/20 dark:bg-brand-aqua/30 text-brand-aqua rounded text-xs border border-brand-aqua/30 dark:border-brand-aqua/40",children:[a,(0,t.jsx)("button",{type:"button",onClick:()=>ar(a),className:"hover:text-brand-midnight",children:(0,t.jsx)(h.Z,{size:14})})]},e))})]}),e&&"divida"===e.tipo&&L.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Parcelas da D\xedvida *"}),(0,t.jsxs)("div",{className:"space-y-3",children:[L.map((a,r)=>{let d=a.id===e.id;return(0,t.jsxs)("div",{className:"rounded-lg p-3 border ".concat(d?"bg-brand-aqua/10 dark:bg-brand-aqua/20 border-brand-aqua dark:border-brand-aqua/50":"bg-gray-50 dark:bg-brand-midnight/50 border-gray-200 dark:border-white/10"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-brand-midnight dark:text-brand-clean",children:["Parcela ",r+1]}),d&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-brand-aqua/20 dark:bg-brand-aqua/30 text-brand-aqua text-xs rounded font-medium",children:"Editando"})]}),L.length>1&&(0,t.jsx)("button",{type:"button",onClick:()=>Q(r),className:"p-1 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-smooth",title:"Remover parcela",children:(0,t.jsx)(j.Z,{size:16})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight/70 dark:text-brand-clean/70 mb-1",children:"Valor *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-brand-midnight/50 dark:text-brand-clean/50 text-xs",children:"R$"}),(0,t.jsx)("input",{type:"text",required:!0,value:a.valor,onChange:a=>{H(r,"valor",(0,_.v)(a.target.value))},placeholder:"0,00",className:"w-full pl-7 pr-2 py-1.5 bg-white dark:bg-brand-royal border border-gray-300 dark:border-white/10 rounded focus:outline-none focus:border-brand-aqua transition-smooth text-xs text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight/70 dark:text-brand-clean/70 mb-1",children:"Data *"}),(0,t.jsx)("input",{type:"datetime-local",required:!0,value:a.data,onChange:a=>H(r,"data",a.target.value),className:"w-full px-2 py-1.5 bg-white dark:bg-brand-royal border border-gray-300 dark:border-white/10 rounded focus:outline-none focus:border-brand-aqua transition-smooth text-xs text-brand-midnight dark:text-brand-clean"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight/70 dark:text-brand-clean/70 mb-1",children:"Qtd *"}),(0,t.jsx)("input",{type:"number",min:"1",required:!0,value:a.quantidade,onChange:a=>H(r,"quantidade",a.target.value),placeholder:"1",className:"w-full px-2 py-1.5 bg-white dark:bg-brand-royal border border-gray-300 dark:border-white/10 rounded focus:outline-none focus:border-brand-aqua transition-smooth text-xs text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]})]},a.id||r)}),Y()>0&&(0,t.jsx)("div",{className:"bg-brand-aqua/10 dark:bg-brand-aqua/20 rounded-lg p-2.5 border border-brand-aqua/20 dark:border-brand-aqua/30",children:(0,t.jsxs)("p",{className:"text-xs font-medium text-brand-midnight dark:text-brand-clean text-center",children:["Total: ",(0,t.jsx)("span",{className:"text-brand-aqua font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Y())})]})})]})]}),(!e||"divida"!==e.tipo||0===L.length)&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Parcelas totais"}),(0,t.jsx)("input",{type:"number",min:"1",value:T.parcelas_totais,onChange:a=>V({...T,parcelas_totais:a.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Parcelas pagas"}),(0,t.jsx)("input",{type:"number",min:"0",value:T.parcelas_pagas,onChange:a=>V({...T,parcelas_pagas:a.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Data e hora"}),(0,t.jsx)("input",{type:"datetime-local",value:T.data_registro,onChange:a=>V({...T,data_registro:a.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm"})]})]}),(0,t.jsx)("div",{className:"flex-shrink-0 bg-white dark:bg-brand-midnight border-t border-gray-200 dark:border-white/10 px-5 py-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:S,className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-white/10 border border-gray-200 dark:border-white/10 transition-smooth text-sm",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:Z,className:"flex-1 px-4 py-2.5 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:Z?e?"Salvando...":"Registrando...":e?"Salvar Altera\xe7\xf5es":"REGISTRAR"})]})})]})]}),(0,t.jsx)(q.Z,{isOpen:P,onClose:()=>W(!1),onSelect:a=>{A(a),V({...T,user_id:a.id})},selectedUserId:T.user_id})]})}},500:function(a,e,r){r.d(e,{Z:function(){return m}});var t=r(57437),d=r(2265),n=r(25727),i=r(29409),o=r(82549),s=r(41827),l=r(9883),c=r(24033),b=r(53468);function m(a){let{isOpen:e,onClose:r,onSelect:m,selectedUserId:u}=a,x=(0,c.useRouter)(),[g,h]=(0,d.useState)([]),[p,f]=(0,d.useState)(!1),[v,k]=(0,d.useState)(""),[y,j]=(0,d.useState)(!1),[w,N]=(0,d.useState)("");(0,d.useEffect)(()=>{e&&q()},[e]);let q=async()=>{let a=await (0,n.CG)();a.data&&h(a.data)},_=async()=>{if(!w.trim())return;f(!0);let a=new FormData;a.append("nome",w.trim());let e=await (0,n.ht)(a);e.error?(0,b.createNotification)("Erro ao criar usu\xe1rio: "+e.error,"warning"):((0,b.createNotification)('Usu\xe1rio "'.concat(w.trim(),'" criado com sucesso!'),"success"),await q(),e.data&&(m(e.data),r()),N(""),j(!1)),f(!1)},S=g.filter(a=>a.nome.toLowerCase().includes(v.toLowerCase()));return e?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-white via-white to-gray-50 dark:from-brand-royal dark:via-brand-midnight dark:to-brand-royal rounded-3xl max-w-lg w-full max-h-[85vh] flex flex-col shadow-2xl animate-slide-up overflow-hidden border-2 border-brand-aqua/30 dark:border-brand-aqua/40",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 border-b-2 border-brand-aqua/20 dark:border-brand-aqua/30 px-6 py-5 flex items-center justify-between bg-gradient-to-r from-brand-aqua/10 via-brand-aqua/5 to-transparent dark:from-brand-aqua/20 dark:via-brand-aqua/10",children:[(0,t.jsx)("h2",{className:"text-2xl font-display text-brand-midnight dark:text-brand-clean",children:"Selecionar Usu\xe1rio"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{r(),x.push("/configuracoes?tab=usuarios")},className:"p-2 hover:bg-brand-aqua/20 dark:hover:bg-brand-aqua/30 rounded-xl transition-smooth",title:"Gerenciar usu\xe1rios",children:(0,t.jsx)(i.Z,{size:20,className:"text-brand-midnight dark:text-brand-clean",strokeWidth:2.5})}),(0,t.jsx)("button",{onClick:r,className:"p-2 hover:bg-red-500/20 dark:hover:bg-red-500/30 rounded-xl transition-smooth",children:(0,t.jsx)(o.Z,{size:20,className:"text-brand-midnight dark:text-brand-clean",strokeWidth:2.5})})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-5 space-y-4 bg-white/50 dark:bg-brand-midnight/60",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(s.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-brand-aqua dark:text-brand-aqua",size:20,strokeWidth:2.5}),(0,t.jsx)("input",{type:"text",value:v,onChange:a=>k(a.target.value),placeholder:"Buscar usu\xe1rio...",className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-brand-midnight border-2 border-gray-200 dark:border-white/20 rounded-xl focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/60 shadow-sm hover:shadow-md"})]}),(0,t.jsxs)("button",{onClick:()=>j(!y),className:"w-full px-5 py-3 bg-gradient-to-r from-brand-aqua to-brand-blue text-brand-midnight rounded-xl font-bold hover:from-brand-aqua/90 hover:to-brand-blue/90 transition-smooth flex items-center justify-center gap-2 text-sm shadow-lg hover:shadow-xl",children:[(0,t.jsx)(l.Z,{size:20,strokeWidth:3}),"Adicionar Novo Usu\xe1rio"]}),y&&(0,t.jsx)("div",{className:"p-4 bg-gradient-to-br from-brand-aqua/10 via-brand-aqua/5 to-transparent dark:from-brand-aqua/20 dark:via-brand-aqua/10 rounded-xl border-2 border-brand-aqua/30 dark:border-brand-aqua/40 shadow-lg",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:w,onChange:a=>N(a.target.value),onKeyPress:a=>"Enter"===a.key&&_(),placeholder:"Digite o nome do novo usu\xe1rio...",className:"flex-1 px-4 py-2.5 bg-white dark:bg-brand-midnight border-2 border-gray-200 dark:border-white/20 rounded-xl text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/60 focus:outline-none focus:border-brand-aqua transition-smooth text-sm shadow-sm"}),(0,t.jsx)("button",{onClick:_,disabled:p||!w.trim(),className:"px-5 py-2.5 bg-brand-aqua text-brand-midnight rounded-xl hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed font-bold text-sm shadow-md hover:shadow-lg",children:p?"Criando...":"Criar"}),(0,t.jsx)("button",{onClick:()=>{j(!1),N("")},className:"px-3 py-2.5 bg-gray-100 dark:bg-brand-midnight text-brand-midnight dark:text-brand-clean rounded-xl hover:bg-gray-200 dark:hover:bg-white/10 transition-smooth border-2 border-gray-200 dark:border-white/20",children:(0,t.jsx)(o.Z,{size:18,strokeWidth:2.5})})]})}),(0,t.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-2",children:0===S.length?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-brand-midnight/60 dark:text-brand-clean/70",children:v?"Nenhum usu\xe1rio encontrado":"Nenhum usu\xe1rio cadastrado"})}):S.map(a=>(0,t.jsx)("button",{onClick:()=>{m(a),r()},className:"w-full p-4 rounded-xl transition-all duration-300 text-left ".concat(u===a.id?"bg-gradient-to-r from-brand-aqua/30 via-brand-aqua/20 to-brand-blue/20 dark:from-brand-aqua/40 dark:via-brand-aqua/30 dark:to-brand-blue/30 border-2 border-brand-aqua shadow-xl shadow-brand-aqua/30 scale-[1.02]":"bg-white dark:bg-brand-midnight/80 border-2 border-gray-200 dark:border-white/20 hover:bg-gradient-to-r hover:from-brand-aqua/10 hover:to-brand-blue/10 dark:hover:from-brand-aqua/20 dark:hover:to-brand-blue/20 hover:border-brand-aqua/50 hover:shadow-lg"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-aqua/30 to-brand-blue/30 dark:from-brand-aqua/40 dark:to-brand-blue/40 flex items-center justify-center border-2 border-brand-aqua/30 dark:border-brand-aqua/50",children:(0,t.jsx)("span",{className:"text-brand-aqua dark:text-brand-aqua font-bold text-lg",children:a.nome.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-brand-midnight dark:text-brand-clean text-base",children:a.nome}),(0,t.jsxs)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/70 mt-0.5",children:["Criado em ",new Date(a.created_at).toLocaleDateString("pt-BR")]})]}),u===a.id&&(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-brand-aqua flex items-center justify-center shadow-md",children:(0,t.jsx)("span",{className:"text-white text-xs font-bold",children:"âœ“"})})]})},a.id))})]})]})}):null}},25727:function(a,e,r){r.d(e,{CG:function(){return m},HR:function(){return v},It:function(){return g},Ju:function(){return h},M0:function(){return b},Qs:function(){return d},Ti:function(){return f},Vq:function(){return x},Xc:function(){return y},Yw:function(){return s},criarRegistro:function(){return n},gp:function(){return p},ho:function(){return c},ht:function(){return u},pL:function(){return i},uX:function(){return k},ue:function(){return l},v2:function(){return o}}),r(15355);var t=r(31162),d=(0,t.$)("0677e679ab9ad88dcae5f5ed21d3e091a8ece2a2"),n=(0,t.$)("230f57158249c34d410702e12e5ed20109a82cb5"),i=(0,t.$)("331e00a8bd55fbc4647894e75deb9d622e65262b"),o=(0,t.$)("7a5812df7fa537449e30af8482b959119bb5a3b9"),s=(0,t.$)("189acde9d8ba09cf1fa4502a831d11adfdef214a"),l=(0,t.$)("1c6f6257e327d1a8298c81a2c176b2cf4f67c259"),c=(0,t.$)("c2c5c8dc8a684f1448fe15864b09bb63a503a1f0"),b=(0,t.$)("0a9ef55d10fe0c4ac929c2a10460a36a857f415e"),m=(0,t.$)("05ebcbba5892735c1439f199b8d0bb629920a73c"),u=(0,t.$)("515d1ab9d9a146a826a501e3cbfac0b203edf4ac"),x=(0,t.$)("c57ff1267c026993a0b18696f79e908f72fbb6ab");(0,t.$)("8a3728cd313d0e727c1792c87e6ea0e6968cbfbf");var g=(0,t.$)("9cf5ff030e23581d3720e53c2dc93d2fe8cf283c");(0,t.$)("38ec628be9394ddc2becfcdf37826b7d2bab44a1");var h=(0,t.$)("7af002ae1f9efeacd79c403b3fa388cff4789c53"),p=(0,t.$)("5aaa6054274ead32c9c2f1bfde761a706bb325fc"),f=(0,t.$)("f4f80106626033d46b812b45e7973e34bc6c73f6");(0,t.$)("55c7e515dbccb193beccc282665c7cd0068bb3f0");var v=(0,t.$)("0305e3a8646bd650b9adafe954666989ab036d34"),k=(0,t.$)("028c880afc441a7abca2ca63f71e47d33a85bc72"),y=(0,t.$)("d7385b3e8fa7fcedf5527c95854e0457bfbb991c")},93750:function(a,e,r){function t(a){try{if(!a||""===a.trim())return"";let e=a.replace(/\D/g,"");if(!e)return"";e.length>8&&(e=e.slice(0,8));let r=parseInt(e,10);if(isNaN(r)||!isFinite(r))return"";let t=r/100;if(t>1e6)return"1.000.000,00";return new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}).format(t)}catch(a){return console.error("Erro ao formatar valor:",a),""}}function d(a){return parseFloat(a.replace(/\./g,"").replace(",","."))||0}r.d(e,{d:function(){return d},v:function(){return t}})}}]);