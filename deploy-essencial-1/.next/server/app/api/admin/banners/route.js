"use strict";(()=>{var e={};e.id=3399,e.ids=[3399],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},72254:e=>{e.exports=require("node:buffer")},6005:e=>{e.exports=require("node:crypto")},47261:e=>{e.exports=require("node:util")},13554:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>b,patchFetch:()=>v,requestAsyncStorage:()=>f,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>w});var a={};r.r(a),r.d(a,{GET:()=>l,POST:()=>p});var o=r(95419),n=r(69108),i=r(99678),s=r(78070),c=r(81664),d=r(24698);async function l(e){try{if(!await (0,d.W)())return s.Z.json({error:"N\xe3o autorizado"},{status:401});let e=(0,c.i3)()||await (0,c.eI)(),{data:t,error:r}=await e.from("banners").select("*").order("ordem",{ascending:!0}).order("created_at",{ascending:!0});if(r){if(r.message?.includes("does not exist")||r.message?.includes("relation")||"42P01"===r.code)return s.Z.json({banners:[]});return s.Z.json({error:r.message,banners:[]},{status:200})}return s.Z.json({banners:t||[]})}catch(e){return console.error("Erro ao buscar banners:",e),s.Z.json({banners:[]})}}async function p(e){try{if(!await (0,d.W)())return s.Z.json({error:"N\xe3o autorizado"},{status:401});let{imagem_url:t,ordem:r,ativo:a,tempo_transicao:o}=await e.json();if(!t)return s.Z.json({error:"URL da imagem \xe9 obrigat\xf3ria"},{status:400});let n=(0,c.i3)()||await (0,c.eI)(),{data:i,error:l}=await n.from("banners").insert({imagem_url:t,ordem:r||0,ativo:void 0===a||a,tempo_transicao:o||5}).select().single();if(l)return s.Z.json({error:l.message},{status:500});return s.Z.json({success:!0,banner:i})}catch(e){return console.error("Erro ao criar banner:",e),s.Z.json({error:"Erro interno do servidor"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/banners/route",pathname:"/api/admin/banners",filename:"route",bundlePath:"app/api/admin/banners/route"},resolvedPagePath:"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/api/admin/banners/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:m,headerHooks:y,staticGenerationBailout:w}=u,b="/api/admin/banners/route";function v(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}},24698:(e,t,r)=>{r.d(t,{W:()=>i});var a=r(32455),o=r(24961);r(78070);let n=new TextEncoder().encode(process.env.ADMIN_JWT_SECRET||"your-secret-key-change-in-production");async function i(){try{let e=await (0,a.cookies)(),t=e.get("admin_token")?.value;if(!t)return null;let{payload:r}=await (0,o._)(t,n);return{id:r.id,email:r.email,nome:r.nome}}catch(e){return null}}},81664:(e,t,r)=>{r.d(t,{eI:()=>i,i3:()=>s,vv:()=>c});var a=r(77497),o=r(94128),n=r(32455);let i=(0,r(40002).cache)(async()=>{let e=await (0,n.cookies)();return(0,a.createServerClient)("https://frhxqgcqmxpjpnghsvoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyaHhxZ2NxbXhwanBuZ2hzdm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTM3NTYsImV4cCI6MjA3OTIyOTc1Nn0.p1OxLRA5DKgvetuy-IbCfYClNSjrvK6fm43aZNX3T7I",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:a})=>e.set(t,r,a))}catch{}}}})});function s(){let e=process.env.SUPABASE_SERVICE_ROLE_KEY;return e?(0,o.eI)("https://frhxqgcqmxpjpnghsvoe.supabase.co",e,{auth:{autoRefreshToken:!1,persistSession:!1}}):null}function c(){return(0,o.eI)("https://frhxqgcqmxpjpnghsvoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyaHhxZ2NxbXhwanBuZ2hzdm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTM3NTYsImV4cCI6MjA3OTIyOTc1Nn0.p1OxLRA5DKgvetuy-IbCfYClNSjrvK6fm43aZNX3T7I",{auth:{autoRefreshToken:!1,persistSession:!1}})}},50482:(e,t,r)=>{e.exports=r(20399)},40002:(e,t,r)=>{e.exports=r(50482).vendored["react-rsc"].React},95419:(e,t,r)=>{e.exports=r(30517)},24961:(e,t,r)=>{r.d(t,{_:()=>T});var a=r(1840),o=r(6005),n=r(47261),i=r(45452),s=r(80190),c=r(46508),d=r(34907);let l=(0,n.promisify)(o.verify),p=async(e,t,r,a)=>{let n=(0,d.Z)(e,t,"verify");if(e.startsWith("HS")){let t=await (0,c.Z)(e,n,a);try{return o.timingSafeEqual(r,t)}catch{return!1}}let p=(0,i.Z)(e),u=(0,s.Z)(e,n);try{return await l(p,a,u,r)}catch{return!1}};var u=r(30979),f=r(11798),h=r(72062),m=r(19233),y=r(90927),w=r(71081);let b=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};var v=r(6598);let g=e=>e.d?(0,o.createPrivateKey)({format:"jwk",key:e}):(0,o.createPublicKey)({format:"jwk",key:e});async function x(e,t){if(!(0,m.Z)(e))throw TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,a.Jx)(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new u.jq('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return g({...e,alg:t});default:throw new u.jq('Unsupported "kty" (Key Type) Parameter value')}}async function S(e,t,r){let o,n;if(!(0,m.Z)(e))throw new u.GW("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new u.GW('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new u.GW("JWS Protected Header incorrect type");if(void 0===e.payload)throw new u.GW("JWS Payload missing");if("string"!=typeof e.signature)throw new u.GW("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,m.Z)(e.header))throw new u.GW("JWS Unprotected Header incorrect type");let i={};if(e.protected)try{let t=(0,a.Jx)(e.protected);i=JSON.parse(f.xv.decode(t))}catch{throw new u.GW("JWS Protected Header is invalid")}if(!(0,h.Z)(i,e.header))throw new u.GW("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let s={...i,...e.header},c=(0,w.Z)(u.GW,new Map([["b64",!0]]),r?.crit,i,s),d=!0;if(c.has("b64")&&"boolean"!=typeof(d=i.b64))throw new u.GW('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:l}=s;if("string"!=typeof l||!l)throw new u.GW('JWS "alg" (Algorithm) Header Parameter missing or invalid');let g=r&&b("algorithms",r.algorithms);if(g&&!g.has(l))throw new u.FP('"alg" (Algorithm) Header Parameter value not allowed');if(d){if("string"!=typeof e.payload)throw new u.GW("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new u.GW("JWS Payload must be a string or an Uint8Array instance");let S=!1;"function"==typeof t?(t=await t(i,e),S=!0,(0,y.Y)(l,t,"verify"),(0,v.x)(t)&&(t=await x(t,l))):(0,y.Y)(l,t,"verify");let I=(0,f.zo)(f.g7.encode(e.protected??""),f.g7.encode("."),"string"==typeof e.payload?f.g7.encode(e.payload):e.payload);try{o=(0,a.Jx)(e.signature)}catch{throw new u.GW("Failed to base64url decode the signature")}if(!await p(l,t,o,I))throw new u.nx;if(d)try{n=(0,a.Jx)(e.payload)}catch{throw new u.GW("Failed to base64url decode the payload")}else n="string"==typeof e.payload?f.g7.encode(e.payload):e.payload;let k={payload:n};return(void 0!==e.protected&&(k.protectedHeader=i),void 0!==e.header&&(k.unprotectedHeader=e.header),S)?{...k,key:t}:k}async function I(e,t,r){if(e instanceof Uint8Array&&(e=f.xv.decode(e)),"string"!=typeof e)throw new u.GW("Compact JWS must be a string or Uint8Array");let{0:a,1:o,2:n,length:i}=e.split(".");if(3!==i)throw new u.GW("Invalid Compact JWS");let s=await S({payload:o,protected:a,signature:n},t,r),c={payload:s.payload,protectedHeader:s.protectedHeader};return"function"==typeof t?{...c,key:s.key}:c}var k=r(25331),J=r(5653);let W=e=>e.toLowerCase().replace(/^application\//,""),Z=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e))),j=(e,t,r={})=>{let a,o;try{a=JSON.parse(f.xv.decode(t))}catch{}if(!(0,m.Z)(a))throw new u.uv("JWT Claims Set must be a top-level JSON object");let{typ:n}=r;if(n&&("string"!=typeof e.typ||W(e.typ)!==W(n)))throw new u.YS('unexpected "typ" JWT header value',a,"typ","check_failed");let{requiredClaims:i=[],issuer:s,subject:c,audience:d,maxTokenAge:l}=r,p=[...i];for(let e of(void 0!==l&&p.push("iat"),void 0!==d&&p.push("aud"),void 0!==c&&p.push("sub"),void 0!==s&&p.push("iss"),new Set(p.reverse())))if(!(e in a))throw new u.YS(`missing required "${e}" claim`,a,e,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(a.iss))throw new u.YS('unexpected "iss" claim value',a,"iss","check_failed");if(c&&a.sub!==c)throw new u.YS('unexpected "sub" claim value',a,"sub","check_failed");if(d&&!Z(a.aud,"string"==typeof d?[d]:d))throw new u.YS('unexpected "aud" claim value',a,"aud","check_failed");switch(typeof r.clockTolerance){case"string":o=(0,J.Z)(r.clockTolerance);break;case"number":o=r.clockTolerance;break;case"undefined":o=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:h}=r,y=(0,k.Z)(h||new Date);if((void 0!==a.iat||l)&&"number"!=typeof a.iat)throw new u.YS('"iat" claim must be a number',a,"iat","invalid");if(void 0!==a.nbf){if("number"!=typeof a.nbf)throw new u.YS('"nbf" claim must be a number',a,"nbf","invalid");if(a.nbf>y+o)throw new u.YS('"nbf" claim timestamp check failed',a,"nbf","check_failed")}if(void 0!==a.exp){if("number"!=typeof a.exp)throw new u.YS('"exp" claim must be a number',a,"exp","invalid");if(a.exp<=y-o)throw new u.fy('"exp" claim timestamp check failed',a,"exp","check_failed")}if(l){let e=y-a.iat;if(e-o>("number"==typeof l?l:(0,J.Z)(l)))throw new u.fy('"iat" claim timestamp check failed (too far in the past)',a,"iat","check_failed");if(e<0-o)throw new u.YS('"iat" claim timestamp check failed (it should be in the past)',a,"iat","check_failed")}return a};async function T(e,t,r){let a=await I(e,t,r);if(a.protectedHeader.crit?.includes("b64")&&!1===a.protectedHeader.b64)throw new u.uv("JWTs MUST NOT use unencoded payload");let o={payload:j(a.protectedHeader,a.payload,r),protectedHeader:a.protectedHeader};return"function"==typeof t?{...o,key:a.key}:o}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[1638,2455,4128,7497,8070,5164],()=>r(13554));module.exports=a})();