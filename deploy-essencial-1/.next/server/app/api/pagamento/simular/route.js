"use strict";(()=>{var e={};e.id=6513,e.ids=[6513],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55805:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>d,originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>I,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>h});var r={};a.r(r),a.d(r,{POST:()=>p});var s=a(95419),o=a(69108),n=a(99678),i=a(81664),u=a(78070);async function p(e){try{let t=await (0,i.eI)(),{data:{user:a}}=await t.auth.getUser();if(!a)return u.Z.json({error:"N\xe3o autenticado"},{status:401});let{plano:r}=await e.json();if(!["basico","premium"].includes(r))return u.Z.json({error:"Plano inv\xe1lido"},{status:400});let s=new Date,o=new Date;o.setMonth(o.getMonth()+1);let{error:n}=await t.from("profiles").update({plano:r,plano_status:"ativo",plano_data_inicio:s.toISOString(),plano_data_fim:o.toISOString()}).eq("id",a.id);if(n)return console.error("Erro ao atualizar perfil:",n),u.Z.json({error:"Erro ao atualizar perfil: "+n.message},{status:500});return console.log("âœ… Pagamento simulado com sucesso:",{userId:a.id,plano:r,status:"ativo",dataFim:o.toISOString()}),u.Z.json({success:!0,message:`Plano ${r} ativado com sucesso!`,plano:r,plano_status:"ativo",data_fim:o.toISOString()})}catch(e){return console.error("Erro ao simular pagamento:",e),u.Z.json({error:e.message||"Erro ao simular pagamento"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/pagamento/simular/route",pathname:"/api/pagamento/simular",filename:"route",bundlePath:"app/api/pagamento/simular/route"},resolvedPagePath:"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/api/pagamento/simular/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:I,headerHooks:d,staticGenerationBailout:h}=c,g="/api/pagamento/simular/route";function x(){return(0,n.patchFetch)({serverHooks:I,staticGenerationAsyncStorage:m})}},81664:(e,t,a)=>{a.d(t,{eI:()=>n,i3:()=>i,vv:()=>u});var r=a(77497),s=a(94128),o=a(32455);let n=(0,a(40002).cache)(async()=>{let e=await (0,o.cookies)();return(0,r.createServerClient)("https://frhxqgcqmxpjpnghsvoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyaHhxZ2NxbXhwanBuZ2hzdm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTM3NTYsImV4cCI6MjA3OTIyOTc1Nn0.p1OxLRA5DKgvetuy-IbCfYClNSjrvK6fm43aZNX3T7I",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:a,options:r})=>e.set(t,a,r))}catch{}}}})});function i(){let e=process.env.SUPABASE_SERVICE_ROLE_KEY;return e?(0,s.eI)("https://frhxqgcqmxpjpnghsvoe.supabase.co",e,{auth:{autoRefreshToken:!1,persistSession:!1}}):null}function u(){return(0,s.eI)("https://frhxqgcqmxpjpnghsvoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyaHhxZ2NxbXhwanBuZ2hzdm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTM3NTYsImV4cCI6MjA3OTIyOTc1Nn0.p1OxLRA5DKgvetuy-IbCfYClNSjrvK6fm43aZNX3T7I",{auth:{autoRefreshToken:!1,persistSession:!1}})}},50482:(e,t,a)=>{e.exports=a(20399)},40002:(e,t,a)=>{e.exports=a(50482).vendored["react-rsc"].React},95419:(e,t,a)=>{e.exports=a(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1638,2455,4128,7497,8070],()=>a(55805));module.exports=r})();