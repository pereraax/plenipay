"use strict";(()=>{var e={};e.id=3092,e.ids=[3092],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},96096:(e,a,t)=>{t.r(a),t.d(a,{headerHooks:()=>M,originalPathname:()=>j,patchFetch:()=>N,requestAsyncStorage:()=>A,routeModule:()=>y,serverHooks:()=>q,staticGenerationAsyncStorage:()=>F,staticGenerationBailout:()=>U});var r={};t.r(r),t.d(r,{POST:()=>S});var i=t(95419),o=t(69108),s=t(99678),n=t(78070),d=t(81664),l=t(91433),c=t(40315);let p={},u={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 m\xeas",other:"cerca de {{count}} meses"},xMonths:{one:"1 m\xeas",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}};function m(e){return (a={})=>{let t=a.width?String(a.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}let g={date:m({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},defaultWidth:"full"}),time:m({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:m({formats:{full:"{{date}} '\xe0s' {{time}}",long:"{{date}} '\xe0s' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},f={lastWeek:e=>{let a=e.getDay();return"'"+(0===a||6===a?"\xfaltimo":"\xfaltima")+"' eeee '\xe0s' p"},yesterday:"'ontem \xe0s' p",today:"'hoje \xe0s' p",tomorrow:"'amanh\xe3 \xe0s' p",nextWeek:"eeee '\xe0s' p",other:"P"};function h(e){return(a,t)=>{let r;if("formatting"===(t?.context?String(t.context):"standalone")&&e.formattingValues){let a=e.defaultFormattingWidth||e.defaultWidth,i=t?.width?String(t.width):a;r=e.formattingValues[i]||e.formattingValues[a]}else{let a=e.defaultWidth,i=t?.width?String(t.width):e.defaultWidth;r=e.values[i]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(a):a]}}function v(e){return(a,t={})=>{let r;let i=t.width,o=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=a.match(o);if(!s)return null;let n=s[0],d=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(d)?function(e,a){for(let t=0;t<e.length;t++)if(a(e[t]))return t}(d,e=>e.test(n)):function(e,a){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&a(e[t]))return t}(d,e=>e.test(n));return r=e.valueCallback?e.valueCallback(l):l,{value:r=t.valueCallback?t.valueCallback(r):r,rest:a.slice(n.length)}}}let b={code:"pt-BR",formatDistance:(e,a,t)=>{let r;let i=u[e];return(r="string"==typeof i?i:1===a?i.one:i.other.replace("{{count}}",String(a)),t?.addSuffix)?t.comparison&&t.comparison>0?"em "+r:"h\xe1 "+r:r},formatLong:g,formatRelative:(e,a,t,r)=>{let i=f[e];return"function"==typeof i?i(a):i},localize:{ordinalNumber:(e,a)=>{let t=Number(e);return a?.unit==="week"?t+"\xaa":t+"\xba"},era:h({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},defaultWidth:"wide"}),quarter:h({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xba trimestre","2\xba trimestre","3\xba trimestre","4\xba trimestre"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:h({values:{narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},defaultWidth:"wide"}),day:h({values:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","ter\xe7a","quarta","quinta","sexta","s\xe1bado"],wide:["domingo","segunda-feira","ter\xe7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xe1bado"]},defaultWidth:"wide"}),dayPeriod:h({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh\xe3",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh\xe3",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh\xe3",afternoon:"tarde",evening:"tarde",night:"noite"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh\xe3",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh\xe3",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh\xe3",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(e){return(a,t={})=>{let r=a.match(e.matchPattern);if(!r)return null;let i=r[0],o=a.match(e.parsePattern);if(!o)return null;let s=e.valueCallback?e.valueCallback(o[0]):o[0];return{value:s=t.valueCallback?t.valueCallback(s):s,rest:a.slice(i.length)}}}({matchPattern:/^(\d+)[¬∫¬™o]?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:v({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},defaultParseWidth:"any"}),quarter:v({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](¬∫)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:v({matchPatterns:{narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|mar√ßo|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},defaultParseWidth:"any"}),day:v({matchPatterns:{narrow:/^(dom|[23456]¬™?|s[a√°]b)/i,short:/^(dom|[23456]¬™?|s[a√°]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a√°]b)/i,wide:/^(domingo|(segunda|ter[c√ß]a|quarta|quinta|sexta)([- ]feira)?|s[a√°]bado)/i},defaultMatchWidth:"wide",parsePatterns:{short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a√°]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a√°]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a√°]b/i]},defaultParseWidth:"any"}),dayPeriod:v({matchPatterns:{narrow:/^(a|p|mn|md|(da) (manh√£|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh√£|tarde|noite))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh√£/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};async function x(e){let a=e.email_confirmed_at,t=e.created_at;if(!a)return!1;if(a&&t)try{let e=new Date(a),r=new Date(t);return Math.abs((e.getTime()-r.getTime())/1e3)>=30}catch(e){return!1}return!!a}async function D(e,a,t){if(!await x(e)){let e="o registro";return"registrar_divida"===a?e="a d\xedvida":"registrar_entrada"===a?e="a entrada":"registrar_gasto"===a&&(e="o gasto"),{permitido:!1,motivo:`‚ùå **N\xe3o foi poss\xedvel criar ${e}.** Seu email ainda n\xe3o foi confirmado. Voc\xea precisa confirmar seu email antes de criar qualquer registro. Acesse **Configura\xe7\xf5es ‚Üí Perfil** e clique em "Verificar agora" para confirmar seu email.`}}let r=await (0,c.$s)(),i=await (0,c.cu)();if("registrar_divida"===a&&!r.podeCriarDividas)return{permitido:!1,motivo:`‚ùå **N\xe3o foi poss\xedvel criar a d\xedvida.** Para criar d\xedvidas, voc\xea precisa fazer upgrade do seu plano. Voc\xea est\xe1 no plano **${i.toUpperCase()}**, mas criar d\xedvidas est\xe1 dispon\xedvel apenas para planos **B\xe1sico** ou **Premium**. Acesse **Configura\xe7\xf5es ‚Üí Perfil** e clique em "Fazer Upgrade" para desbloquear esta funcionalidade.`};if("registrar_entrada"===a){let e=(t||"").toLowerCase();if((e.includes("sal\xe1rio")||e.includes("salario")||e.includes("sal\xe1"))&&!r.podeRegistrarSalario)return{permitido:!1,motivo:`‚ùå **N\xe3o foi poss\xedvel registrar o sal\xe1rio.** Para registrar sal\xe1rios, voc\xea precisa fazer upgrade do seu plano. Voc\xea est\xe1 no plano **${i.toUpperCase()}**, mas registrar sal\xe1rios est\xe1 dispon\xedvel apenas para planos **B\xe1sico** ou **Premium**. Acesse **Configura\xe7\xf5es ‚Üí Perfil** e clique em "Fazer Upgrade" para desbloquear esta funcionalidade.`}}return"registrar_emprestimo"!==a||r.podeCriarEmprestimos?{permitido:!0}:{permitido:!1,motivo:`‚ùå **N\xe3o foi poss\xedvel criar o empr\xe9stimo.** Para criar empr\xe9stimos, voc\xea precisa fazer upgrade para o plano **Premium**. Voc\xea est\xe1 no plano **${i.toUpperCase()}**, mas criar empr\xe9stimos est\xe1 dispon\xedvel apenas no plano **Premium**. Acesse **Configura\xe7\xf5es ‚Üí Perfil** e clique em "Fazer Upgrade" para desbloquear esta funcionalidade.`}}function $(e,a){let t=e.toLowerCase().trim(),r={dividas:/(dividas?|d√≠vidas?|quais.*dividas?|mostre.*dividas?|lista.*dividas?|qual.*total.*dividas?|quanto.*dividas?|quantas.*dividas?|qual.*divida|quanto.*devo|quanto.*tenho.*divida|total.*dividas?|divida.*total)/i,gastosSemana:/(gastos?.*semana|quanto.*gastou.*semana|gastou.*semana|despesas?.*semana)/i,gastosMes:/(gastos?.*m[e√™]s|quanto.*gastou.*m[e√™]s|gastou.*m[e√™]s|despesas?.*m[e√™]s)/i,totalEntradas:/(entradas?|receitas?|quanto.*recebeu|total.*entradas?)/i,totalSaidas:/(sa[i√≠]das?|despesas?|quanto.*gastou|total.*sa[i√≠]das?)/i,registrarGasto:/(registrar|adicionar|inserir|cadastrar|pago|paguei|pagar|gastei|gastar|comprei|comprar).*(gasto|despesa|sa[i√≠]da|compra|pagamento|conta|conta de)/i,pagamentoDireto:/(pago|paguei|pagar|pague)\s+.*[\d.,]+\s*(reais?|r\$)?|[\d.,]+\s*(reais?|r\$)?.*(pago|paguei|pagar|conta)/i,registrarEntrada:/(registrar|adicionar|inserir|cadastrar|recebi|receber).*(entrada|receita|sal[a√°]rio|dinheiro.*recebido)/i,registrarDivida:/(registrar|adicionar|inserir|cadastrar|criar|tenho|tenho uma|preciso|preciso registrar|devendo|devo|deve).*(divida|d√≠vida|deve|devo|devendo|pagar|pago)/i},i=r.registrarDivida.test(t);if(r.registrarGasto.test(t)||r.pagamentoDireto.test(t),r.registrarEntrada.test(t),r.dividas.test(t)&&!i)return{tipo:"consultar_dividas",dados:a};if(r.gastosSemana.test(t))return{tipo:"gastos_semana",dados:a};if(r.gastosMes.test(t))return{tipo:"gastos_mes",dados:a};if(r.totalEntradas.test(t))return{tipo:"total_entradas",dados:a};if(r.totalSaidas.test(t))return{tipo:"total_saidas",dados:a};let o=null,s=[];for(let a of[/r\$\s*([\d.,]+)/i,/([\d.,]+)\s*reais?/i,/([\d.,]+)\s*r\$/i,/valor\s*(?:de|de\s+)?([\d.,]+)/i,/\b(\d{1,3}(?:[.,]\d{3})*(?:[.,]\d{2})?)\s*(?:reais?|r\$|de)?\b/i])for(let t of Array.from(e.matchAll(RegExp(a,"gi")))){let e=parseFloat((t[1]||t[0]).replace(/\./g,"").replace(",","."));!isNaN(e)&&e>0&&e<1e7&&s.push(e)}if(0===s.length)for(let a of Array.from(e.matchAll(/\b(\d{1,6})\b/g))){let e=parseFloat(a[1]);!isNaN(e)&&e>0&&e<1e7&&s.push(e)}s.length>0?console.log("\uD83D\uDCB0 [PLEN] Valor extra\xeddo:",o=Math.max(...s),"de:",s):console.log("‚ö†Ô∏è [PLEN] Nenhum valor encontrado na mensagem:",e);let n=/(pago|paguei|pagar|pague|gastei|gastar|comprei|comprar|conta de|paguei a|paguei o|pagamento|conta)/i.test(t);r.registrarGasto.test(t)||r.pagamentoDireto.test(t);let d=r.registrarEntrada.test(t)||/(recebi|receber|ganhei|ganhar|sal√°rio|entrada de|receita)/i.test(t),l=r.registrarDivida.test(t)||/(tenho|tenho uma|preciso|preciso registrar|devendo|devo|deve).*(divida|d√≠vida|pagar|pago)/i.test(t)||/(divida|d√≠vida).*(de|de\s+)?[\d.,]+\s*(?:reais?|r\$)/i.test(t);if(l&&o){let a="",t=e.match(/(?:divida|d√≠vida|deve|devendo|tenho|preciso).*?[\d.,]+\s*(?:reais?|r\$)?\s+de\s+([^,\.]+)/i);if(t&&t[1])a=t[1].trim();else{let t=e.match(/(?:divida|d√≠vida|deve|devendo|tenho|preciso).*?[\d.,]+\s*(?:reais?|r\$)?\s+para\s+([^,\.]+)/i);if(t&&t[1])a=t[1].trim();else{let t=e.match(/(?:divida|d√≠vida|deve|devendo|tenho|preciso).*?[\d.,]+\s*(?:reais?|r\$)?\s+com\s+([^,\.]+)/i);if(t&&t[1])a=t[1].trim();else{let t=e.split(/[\d.,]+\s*(?:reais?|r\$)?/i);t.length>1&&(a=(a=t[1].trim()).replace(/^(?:registrar|adicionar|inserir|cadastrar|criar|divida|d√≠vida|deve|devendo|tenho|tenho uma|preciso|preciso registrar|de|para|com|com\s+)\s*/i,""))}}}return a=!a||a.length<3?`D\xedvida de R$ ${o.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:a.charAt(0).toUpperCase()+a.slice(1),{tipo:"registrar_divida",dados:{valor:o,descricao:a.length>100?a.substring(0,100):a,tipo:"divida"}}}if(o&&d&&!n&&!l){let a="",t=e.match(/(?:recebi|recebeu|ganhei|ganhar)\s+.*?[\d.,]+\s*(?:reais?|r\$)?\s+de\s+([A-Za-z√Ä-√ø\s]+?)(?:\s|$|,|\.)/i);if(t&&t[1]){let e=t[1].trim().replace(/\s+(?:reais?|r\$|de|para|com|em|no|na|a|o)\s+/gi," ").trim();if(e.length>0&&e.length<50){let t=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();a=`Recebeu de ${t}`}}if(!a){let t=e.match(/(?:recebi|recebeu|ganhei|ganhar)\s+.*?[\d.,]+\s*(?:reais?|r\$)?\s+([A-Za-z√Ä-√ø]+)(?:\s|$|,|\.)/i);if(t&&t[1]){let e=t[1].trim();if(e.length>1&&e.length<50&&!/(?:reais?|r\$|de|para|com|em|no|na|a|o)/i.test(e)){let t=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();a=`Recebeu de ${t}`}}}if(!a){let t=e.match(/(?:de|para|com)\s+([A-Za-z√Ä-√ø]+)(?:\s|$|,|\.)/i);if(t&&t[1]){let e=t[1].trim();if(e.length>1&&e.length<50&&!/(?:reais?|r\$|de|para|com|em|no|na|a|o)/i.test(e)){let t=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();a=`Recebeu de ${t}`}}}return(!a||a.length<3)&&(a=`Entrada de R$ ${o.toLocaleString("pt-BR",{minimumFractionDigits:2})}`),{tipo:"registrar_entrada",dados:{valor:o,descricao:a.length>100?a.substring(0,100):a,tipo:"entrada"}}}if(o&&n&&!d&&!l){let a="outros";for(let[e,r]of Object.entries({luz:"moradia",energia:"moradia",√°gua:"moradia",agua:"moradia",internet:"moradia",telefone:"moradia",aluguel:"moradia",condom√≠nio:"moradia",supermercado:"alimenta\xe7\xe3o",mercado:"alimenta\xe7\xe3o",comida:"alimenta\xe7\xe3o",alimenta√ß√£o:"alimenta\xe7\xe3o",alimentacao:"alimenta\xe7\xe3o",restaurante:"alimenta\xe7\xe3o",combust√≠vel:"transporte",combustivel:"transporte",gasolina:"transporte",uber:"transporte",t√°xi:"transporte",farmacia:"sa\xfade",farm√°cia:"sa\xfade",rem√©dio:"sa\xfade",remedio:"sa\xfade",m√©dico:"sa\xfade",medico:"sa\xfade",hospital:"sa\xfade","conta de":"moradia",conta:"moradia"}))if(t.includes(e)){a=r;break}let r="",i=t.replace(/(?:pago|paguei|pagar|pague|gastei|gastar|comprei|comprar|registrar|adicionar|cadastrar)\s*/gi,"").replace(/[\d.,]+\s*(?:reais?|r\$)?/gi,"").replace(/\s+(?:de|para|com|em|no|na|a|o)\s+/gi," ").trim();if(t.includes("conta")){let a=e.match(/conta\s+(?:de|da|do)?\s*([a-z√°√†√¢√£√©√™√≠√≥√¥√µ√∫√ß\s]+?)(?:\s+\d|$|,|\.|reais?)/i);if(a&&a[1])r=`Conta de ${a[1].trim()}`;else{let e=t.indexOf("conta"),a=t.substring(e+5).trim().replace(/\d+/g,"").replace(/\s*(?:reais?|r\$|de|para|com)\s*/gi," ").trim();r=a.length>0?`Conta de ${a.split(/\s+/).slice(0,3).join(" ")}`:"Conta"}}else{let a=e.split(/\s+(\d+)\s+/i);if(a.length>2)r=(r=a[2].trim()).replace(/^(?:pago|paguei|pagar|pague|gastei|gastar|comprei|comprar|registrar|adicionar|cadastrar|de|para|com|em|no|na|a|o)\s+/i,"");else{let a=e.match(/(?:pago|paguei|pagar|pague|gastei|gastar|comprei|comprar)\s+\d+\s*(.+)/i);r=a&&a[1]?a[1].trim().split(/\s+/).slice(0,4).join(" "):i.split(/\s+/).slice(0,5).join(" ")||`Gasto de R$ ${o.toLocaleString("pt-BR",{minimumFractionDigits:2})}`}}return r&&(r=(r=r.replace(/\s+/g," ").trim()).replace(/[.,;:!?]+$/,"")).length>0&&(r=r.charAt(0).toUpperCase()+r.slice(1)),(!r||r.length<3)&&(r=`Gasto de R$ ${o.toLocaleString("pt-BR",{minimumFractionDigits:2})}`),{tipo:"registrar_gasto",dados:{valor:o,categoria:a,descricao:r.length>100?r.substring(0,100):r,tipo:"saida"}}}if(r.registrarEntrada.test(t)&&o){let a="",t=e.match(/(?:recebi|recebeu|ganhei|ganhar)\s+.*?[\d.,]+\s*(?:reais?|r\$)?\s+de\s+([A-Za-z√Ä-√ø\s]+?)(?:\s|$|,|\.)/i);if(t&&t[1]){let e=t[1].trim().replace(/\s+(?:reais?|r\$|de|para|com|em|no|na|a|o)\s+/gi," ").trim();if(e.length>0&&e.length<50){let t=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();a=`Recebeu de ${t}`}}if(!a){let t=e.match(/(?:recebi|recebeu|ganhei)\s+.*?[\d.,]+\s*(?:reais?|r\$)?\s+([A-Za-z√Ä-√ø]+)(?:\s|$|,|\.)/i);if(t&&t[1]){let e=t[1].trim();if(e.length>1&&e.length<50&&!/(?:reais?|r\$|de|para|com|em|no|na|a|o)/i.test(e)){let t=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();a=`Recebeu de ${t}`}}}if(!a){let t=e.match(/(?:de|para|com)\s+([A-Za-z√Ä-√ø]+)(?:\s|$|,|\.)/i);if(t&&t[1]){let e=t[1].trim();if(e.length>1&&e.length<50&&!/(?:reais?|r\$|de|para|com|em|no|na|a|o)/i.test(e)){let t=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();a=`Recebeu de ${t}`}}}return(!a||a.length<3)&&(a=`Entrada de R$ ${o.toLocaleString("pt-BR",{minimumFractionDigits:2})}`),{tipo:"registrar_entrada",dados:{valor:o,descricao:a.length>100?a.substring(0,100):a,tipo:"entrada"}}}return{tipo:"geral",dados:null}}function _(e){let a=e.quantidadeDividas>0?`Voc\xea possui ${e.quantidadeDividas} d\xedvida(s) cadastrada(s), sendo ${e.quantidadePendentes} pendente(s).
- Total de d\xedvidas: R$ ${e.totalDividas.toLocaleString("pt-BR",{minimumFractionDigits:2})}
- Total pendente: R$ ${e.totalPendente.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"Voc\xea n\xe3o possui d\xedvidas cadastradas no momento.";return`Voc\xea \xe9 PLEN, um assistente financeiro inteligente e moderno. Voc\xea ajuda usu\xe1rios a gerenciar suas finan\xe7as pessoais.

CONTEXTO DO USU\xc1RIO:
- D\xedvidas: ${a}
- Gastos da semana: R$ ${e.gastosSemana?.toLocaleString("pt-BR",{minimumFractionDigits:2})||"0,00"}
- Gastos do m\xeas: R$ ${e.gastosMes?.toLocaleString("pt-BR",{minimumFractionDigits:2})||"0,00"}
- Total de entradas: R$ ${e.totalEntradas?.toLocaleString("pt-BR",{minimumFractionDigits:2})||"0,00"}
- Total de sa\xeddas: R$ ${e.totalSaidas?.toLocaleString("pt-BR",{minimumFractionDigits:2})||"0,00"}

FUNCIONALIDADES DISPON\xcdVEIS:
1. Registrar gastos/entradas: "Registre um gasto de R$ 50,00 com alimenta\xe7\xe3o"
2. Consultar d\xedvidas: "Quais s\xe3o minhas d\xedvidas?", "Qual o total de d\xedvidas que tenho?", "Quanto devo?"
3. Consultar gastos: "Quanto gastei na semana/m\xeas?"
4. Consultar saldo: "Qual \xe9 meu saldo atual?"

INSTRU\xc7\xd5ES IMPORTANTES:
- Se o usu\xe1rio perguntar sobre d\xedvidas, use SEMPRE os dados do CONTEXTO acima
- Se houver d\xedvidas, informe a quantidade e o valor total
- Se n\xe3o houver d\xedvidas, diga claramente que n\xe3o h\xe1 d\xedvidas cadastradas
- Seja direto, amig\xe1vel e profissional
- Use linguagem natural e moderna
- Se o usu\xe1rio pedir para registrar algo, confirme os dados
- Se for uma consulta, forne\xe7a informa\xe7\xf5es claras e organizadas
- Responda sempre em portugu\xeas brasileiro
- Seja conciso mas completo`}async function w(e,a,t){if(!process.env.ANTHROPIC_API_KEY)return null;try{let r=_(a),i=[...t.slice(-5).map(e=>({role:"assistant"===e.role?"assistant":"user",content:e.content})),{role:"user",content:e}],o=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":process.env.ANTHROPIC_API_KEY,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:process.env.ANTHROPIC_MODEL||"claude-3-5-haiku-20241022",max_tokens:1024,system:r,messages:i})});if(!o.ok){let e=await o.text();return console.error("Erro ao chamar Claude:",e),null}let s=await o.json();if(s.content?.[0]?.text)return s.content[0].text}catch(e){console.error("Erro ao chamar Claude:",e)}return null}async function C(e,a,t){if(!process.env.GROQ_API_KEY)return null;try{let r=_(a),i=[{role:"system",content:r},...t.slice(-5).map(e=>({role:"assistant"===e.role?"assistant":"user",content:e.content})),{role:"user",content:e}],o=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.GROQ_API_KEY}`},body:JSON.stringify({model:process.env.GROQ_MODEL||"llama-3.1-8b-instant",messages:i,temperature:.7,max_tokens:1024})});if(!o.ok){let e=await o.text();return console.error("Erro ao chamar Groq:",e),null}let s=await o.json();if(s.choices?.[0]?.message?.content)return s.choices[0].message.content}catch(e){console.error("Erro ao chamar Groq:",e)}return null}async function P(e,a,t){if(!process.env.GEMINI_API_KEY)return null;try{let r=process.env.GEMINI_MODEL||"gemini-1.5-flash",i=_(a),o=`${i}

HIST\xd3RICO DA CONVERSA (\xfaltimas 5 mensagens):
${t.slice(-5).map(e=>`${e.role}: ${e.content}`).join("\n")}

MENSAGEM DO USU\xc1RIO: ${e}

RESPOSTA:`,s=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${r}:generateContent?key=${process.env.GEMINI_API_KEY}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:o}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}})});if(!s.ok){let e=await s.text();return console.error("Erro ao chamar Gemini:",e),null}let n=await s.json();if(n.candidates?.[0]?.content?.parts?.[0]?.text)return n.candidates[0].content.parts[0].text}catch(e){console.error("Erro ao chamar Gemini:",e)}return null}async function E(e,a,t){if(!process.env.OPENAI_API_KEY)return null;try{let r=_(a),i=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.OPENAI_API_KEY}`},body:JSON.stringify({model:process.env.OPENAI_MODEL||"gpt-3.5-turbo",messages:[{role:"system",content:r},...t.slice(-5).map(e=>({role:e.role,content:e.content})),{role:"user",content:e}],max_tokens:1024,temperature:.7})});if(!i.ok){let e=await i.text();return console.error("Erro ao chamar OpenAI:",e),null}let o=await i.json();if(o.choices?.[0]?.message?.content)return o.choices[0].message.content}catch(e){console.error("Erro ao chamar OpenAI:",e)}return null}async function R(e,a,t){let r=process.env.AI_PROVIDER?.toLowerCase()||"auto",i=[];for(let o of("auto"===r?(process.env.GROQ_API_KEY&&i.push(()=>C(e,a,t)),process.env.GEMINI_API_KEY&&i.push(()=>P(e,a,t)),process.env.ANTHROPIC_API_KEY&&i.push(()=>w(e,a,t)),process.env.OPENAI_API_KEY&&i.push(()=>E(e,a,t))):"groq"===r?i.push(()=>C(e,a,t)):"gemini"===r?i.push(()=>P(e,a,t)):"claude"===r?i.push(()=>w(e,a,t)):"openai"===r&&i.push(()=>E(e,a,t)),i))try{let e=await o();if(e)return e}catch(e){console.error("Erro ao tentar provedor de IA:",e);continue}return function(e,a,t){switch($(e,a).tipo){case"consultar_dividas":let r=a.dividas||[];if(0===r.length)return"Voc\xea n\xe3o possui d\xedvidas cadastradas no momento. \uD83C\uDF89";let i=r.filter(e=>(e.parcelas_pagas&&e.parcelas_totais?parseFloat(e.valor)*parseFloat(e.parcelas_pagas)/parseFloat(e.parcelas_totais):0)<parseFloat(e.valor)),o=r.reduce((e,a)=>e+parseFloat(a.valor||0),0),s=i.reduce((e,a)=>{let t=a.parcelas_pagas&&a.parcelas_totais?parseFloat(a.valor)*parseFloat(a.parcelas_pagas)/parseFloat(a.parcelas_totais):0;return e+(parseFloat(a.valor||0)-t)},0);return`Voc\xea possui ${r.length} d\xedvida(s) cadastrada(s), sendo ${i.length} pendente(s).

üí∞ Total: R$ ${o.toLocaleString("pt-BR",{minimumFractionDigits:2})}
‚è≥ Pendente: R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}`;case"gastos_semana":let n=a.gastosSemana||0;if(0===n)return"Voc\xea n\xe3o teve gastos nesta semana. Parab\xe9ns! \uD83C\uDF89";return`Voc\xea gastou R$ ${n.toLocaleString("pt-BR",{minimumFractionDigits:2})} nesta semana.`;case"gastos_mes":let d=a.gastosMes||0;if(0===d)return"Voc\xea n\xe3o teve gastos neste m\xeas. Parab\xe9ns! \uD83C\uDF89";return`Voc\xea gastou R$ ${d.toLocaleString("pt-BR",{minimumFractionDigits:2})} neste m\xeas.`;case"total_entradas":let l=a.estatisticas?.totalEntradas||0;if(0===l)return"Voc\xea ainda n\xe3o possui entradas registradas.";return`Suas entradas totalizam R$ ${l.toLocaleString("pt-BR",{minimumFractionDigits:2})}.`;case"total_saidas":let c=a.estatisticas?.totalSaidas||0;if(0===c)return"Voc\xea ainda n\xe3o possui sa\xeddas registradas.";return`Suas sa\xeddas totalizam R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2})}.`;default:return'Ol\xe1! Eu sou o PLEN, seu assistente financeiro. Como posso ajudar?\n\n\uD83D\uDCA1 **Comandos dispon\xedveis:**\n\n‚Ä¢ "Registre um gasto de R$ 50,00 com alimenta\xe7\xe3o"\n‚Ä¢ "Adicione uma entrada de R$ 1.000,00"\n‚Ä¢ "Quais s\xe3o minhas d\xedvidas?"\n‚Ä¢ "Quanto gastei na semana?"\n‚Ä¢ "Quanto gastei no m\xeas?"\n‚Ä¢ "Quais s\xe3o minhas entradas?"\n‚Ä¢ "Quais s\xe3o minhas sa\xeddas?"\n\nVoc\xea pode falar ou digitar! \uD83C\uDFA4\uD83D\uDCAC'}}(e,a,0)}async function S(e){try{let a=await (0,d.eI)(),{data:{user:t}}=await a.auth.getUser();if(!t)return n.Z.json({error:"N\xe3o autenticado"},{status:401});let{message:r,conversationHistory:i}=await e.json();if(!r||"string"!=typeof r)return n.Z.json({error:"Mensagem inv\xe1lida"},{status:400});let[o,s,c]=await Promise.all([(0,l.obterDividas)(),(0,l.obterRegistros)(),(0,l.obterEstatisticas)()]),u=o?.data||[],m=s?.data||[],g=c||{},f=new Date,h=function(e,a){let t=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??p.weekStartsOn??p.locale?.options?.weekStartsOn??0,r=function(e){let a=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===a?new e.constructor(+e):new Date("number"==typeof e||"[object Number]"===a||"string"==typeof e||"[object String]"===a?e:NaN)}(e),i=r.getDay();return r.setDate(r.getDate()-((i<t?7:0)+i-t)),r.setHours(0,0,0,0),r}(f,{locale:b}),v=m.filter(e=>new Date(e.data_registro)>=h&&"saida"===e.tipo).reduce((e,a)=>e+parseFloat(a.valor||0),0),x=new Date(f.getFullYear(),f.getMonth(),1),_=m.filter(e=>new Date(e.data_registro)>=x&&"saida"===e.tipo).reduce((e,a)=>e+parseFloat(a.valor||0),0),w=u.reduce((e,a)=>e+parseFloat(a.valor||0),0),C=u.filter(e=>(e.parcelas_pagas&&e.parcelas_totais?parseFloat(e.valor)*parseFloat(e.parcelas_pagas)/parseFloat(e.parcelas_totais):0)<parseFloat(e.valor)),P=C.reduce((e,a)=>{let t=a.parcelas_pagas&&a.parcelas_totais?parseFloat(a.valor)*parseFloat(a.parcelas_pagas)/parseFloat(a.parcelas_totais):0;return e+(parseFloat(a.valor||0)-t)},0),E={dividas:u,totalDividas:w,totalPendente:P,quantidadeDividas:u.length,quantidadePendentes:C.length,registros:m.slice(0,10),estatisticas:g,gastosSemana:v,gastosMes:_,totalEntradas:g?.totalEntradas||0,totalSaidas:g?.totalSaidas||0},S=r.toLowerCase().trim(),y=/^(sim|s[√≠i]|yes|ok|confirmar|pode|pode confirmar|confirma|quero|desejo)$/i.test(S),A=/^(n[√£a]o|nao|no|n[√£a]o quero|cancelar|cancela)$/i.test(S),F=null;if(y||A)for(let e of i?.slice().reverse().filter(e=>"assistant"===e.role).slice(0,3)||[]){if(!e?.content)continue;let a=[/r\$\s*([\d.,]+)/i,/([\d.,]+)\s*reais?/i,/valor\s*(?:de|de\s+)?([\d.,]+)/i,/\b(\d{1,3}(?:[.,]\d{3})*(?:[.,]\d{2})?)\s*(?:reais?|r\$|de)?\b/i],t=null;for(let r of a)if(t=e.content.match(r))break;if(t){let a=t[1]||t[0],r=parseFloat(a.replace(/\./g,"").replace(",","."));if(!isNaN(r)&&r>0&&r<1e7){let a=e.content.match(/(entrada|receita|recebido|recebeu|gasto|despesa|sa[i√≠]da|divida|d[i√≠]vida|pago|paguei)/i),t=a?/(entrada|receita|recebido|recebeu)/i.test(a[1])?"entrada":/(divida|d[i√≠]vida)/i.test(a[1])?"divida":"saida":"entrada",i=[/(?:de|para|com|em|no|na|recebido|recebeu|de)\s+([^,\.\?]+?)(?:\s+deseja|\s+quer|\s+gostaria|\s+pode|\s+confirma|\?|$)/i,/(?:de|para|com|em|no|na)\s+([A-Za-z√Ä-√ø\s]+?)(?:\s+\d|\s+deseja|\s+quer|\s+gostaria|\s+pode|\s+confirma|\?|$)/i],o="";for(let a of i){let t=e.content.match(a);if(t&&t[1]){o=t[1].trim();break}}(!o||o.length<3)&&(o=`Registro de ${"entrada"===t?"entrada":"divida"===t?"d\xedvida":"gasto"}`),F={valor:r,tipo:t,descricao:o.length>100?o.substring(0,100):o};break}}}let q=$(r,E);console.log("\uD83D\uDD0D [PLEN] Comando detectado:",q.tipo,q.dados),console.log("\uD83D\uDCCA [PLEN] Contexto - D\xedvidas:",{quantidade:u.length,total:w,pendente:P});let M="",U=null,j=null;if("registrar_divida"===q.tipo||"registrar_gasto"===q.tipo||"registrar_entrada"===q.tipo){console.log("\uD83D\uDD12 [PLEN] Verificando permiss\xf5es para:",q.tipo);let e=await D(t,q.tipo,q.dados?.descricao);if(!e.permitido)return console.log("‚ö†Ô∏è [PLEN] Permiss\xe3o negada:",e.motivo),n.Z.json({response:e.motivo||"Voc\xea n\xe3o tem permiss\xe3o para executar esta a\xe7\xe3o.",actionData:null})}if("consultar_dividas"===q.tipo){console.log("‚úÖ [PLEN] Processando consulta de d\xedvidas localmente");let e=u||[];if(0===e.length)M="Voc\xea n\xe3o possui d\xedvidas cadastradas no momento. \uD83C\uDF89";else{let a=e.filter(e=>(e.parcelas_pagas&&e.parcelas_totais?parseFloat(e.valor)*parseFloat(e.parcelas_pagas)/parseFloat(e.parcelas_totais):0)<parseFloat(e.valor)),t=e.reduce((e,a)=>e+parseFloat(a.valor||0),0),r=a.reduce((e,a)=>{let t=a.parcelas_pagas&&a.parcelas_totais?parseFloat(a.valor)*parseFloat(a.parcelas_pagas)/parseFloat(a.parcelas_totais):0;return e+(parseFloat(a.valor||0)-t)},0);M=`Voc\xea possui ${e.length} d\xedvida(s) cadastrada(s), sendo ${a.length} pendente(s).

üí∞ Total: R$ ${t.toLocaleString("pt-BR",{minimumFractionDigits:2})}
‚è≥ Pendente: R$ ${r.toLocaleString("pt-BR",{minimumFractionDigits:2})}`}}if(y&&F){console.log("‚úÖ [PLEN] Processando confirma\xe7\xe3o:",F);let e=await D(t,"divida"===F.tipo?"registrar_divida":"saida"===F.tipo?"registrar_gasto":"registrar_entrada",F.descricao);if(e.permitido){let{data:e}=await a.from("users").select("id").limit(1),r=e&&e.length>0?e[0].id:t.id,i=new FormData;i.append("nome",F.descricao),i.append("tipo",F.tipo),i.append("valor",F.valor.toString()),i.append("categoria","outros"),i.append("data_registro",new Date().toISOString()),i.append("metodo_pagamento","dinheiro"),i.append("parcelas_totais","1"),i.append("parcelas_pagas","0"),i.append("user_id",r),"divida"===F.tipo?i.append("etiquetas",JSON.stringify(["d\xedvida","dinheiro"])):i.append("etiquetas",JSON.stringify(["dinheiro"]));let o=await (0,l.criarRegistro)(i);if(o.error)M=`Desculpe, n\xe3o consegui registrar. Erro: ${o.error}`;else{let e="divida"===F.tipo?"D\xedvida":"saida"===F.tipo?"Gasto":"Entrada";M=`‚úÖ Registrei com sucesso! ${e} de R$ ${F.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})}${F.descricao?` - ${F.descricao}`:""}`,U={action:"created",message:`${e} registrado com sucesso!`}}F=null}else console.log("‚ö†Ô∏è [PLEN] Permiss\xe3o negada na confirma\xe7\xe3o:",e.motivo),M=e.motivo||"Voc\xea n\xe3o tem permiss\xe3o para executar esta a\xe7\xe3o.",F=null}else if(A&&F)M="Entendido, registro cancelado. Como posso ajudar?";else if("consultar_dividas"===q.tipo&&M);else if("registrar_gasto"===q.tipo||"registrar_entrada"===q.tipo||"registrar_divida"===q.tipo){console.log("‚úÖ [PLEN] Executando registro:",q.dados);let{data:e}=await a.from("users").select("id").limit(1),r=e&&e.length>0?e[0].id:t.id,i=new FormData;i.append("nome",q.dados.descricao),i.append("tipo",q.dados.tipo),i.append("valor",q.dados.valor.toString()),i.append("categoria",q.dados.categoria||"outros"),i.append("data_registro",new Date().toISOString()),i.append("metodo_pagamento","dinheiro"),i.append("parcelas_totais","1"),i.append("parcelas_pagas","0"),i.append("user_id",r),"registrar_divida"===q.tipo?i.append("etiquetas",JSON.stringify(["d\xedvida","dinheiro"])):i.append("etiquetas",JSON.stringify(["dinheiro"])),console.log("\uD83D\uDCDD [PLEN] Criando registro com:",{nome:q.dados.descricao,tipo:q.dados.tipo,valor:q.dados.valor,categoria:q.dados.categoria,user_id:r});let o=await (0,l.criarRegistro)(i);if(console.log("\uD83D\uDCCA [PLEN] Resultado do registro:",o),o.error){console.error("‚ùå [PLEN] Erro ao registrar:",o.error);let e="divida"===q.dados.tipo?"d\xedvida":"saida"===q.dados.tipo?"gasto":"entrada";M=`Desculpe, n\xe3o consegui registrar a ${e}. Erro: ${o.error}`}else{console.log("‚úÖ [PLEN] Registro criado com sucesso!");let e="divida"===q.dados.tipo?"D\xedvida":"saida"===q.dados.tipo?"Gasto":"Entrada";M=`‚úÖ Registrei com sucesso! ${e} de R$ ${q.dados.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})}${q.dados.descricao?` - ${q.dados.descricao}`:""}`,U={action:"created",message:`${e} registrado com sucesso!`}}}else if(!M&&(M=await R(r,E,i||[]),/(deseja|quer|gostaria|pode|confirma|confirmar|posso|voc√™ gostaria|deseja confirmar).*(confirmar|registrar|criar|adicionar|isso|essa entrada|esse registro)/i.test(M)||/(deseja confirmar|quer confirmar|gostaria de confirmar|pode confirmar|confirma isso)/i.test(M))){let e=null;for(let a of[/r\$\s*([\d.,]+)/i,/([\d.,]+)\s*reais?/i,/valor\s*(?:de|de\s+)?([\d.,]+)/i,/\b(\d{1,3}(?:[.,]\d{3})*(?:[.,]\d{2})?)\s*(?:reais?|r\$|de)?\b/i])if(e=M.match(a))break;if(e){let a=e[1]||e[0],t=parseFloat(a.replace(/\./g,"").replace(",","."));if(!isNaN(t)&&t>0&&t<1e7){let e=M.match(/(entrada|receita|recebido|recebeu|gasto|despesa|sa[i√≠]da|divida|d[i√≠]vida|pago|paguei)/i),a=e?/(entrada|receita|recebido|recebeu)/i.test(e[1])?"entrada":/(divida|d[i√≠]vida)/i.test(e[1])?"divida":"saida":"entrada",r="";for(let e of[/(?:de|para|com|em|no|na|recebido|recebeu|de)\s+([A-Za-z√Ä-√ø\s]+?)(?:\s+deseja|\s+quer|\s+gostaria|\s+pode|\s+confirma|\?|$)/i,/(?:de|para|com|em|no|na)\s+([^,\.\?]+?)(?:\s+\d|\s+deseja|\s+quer|\s+gostaria|\s+pode|\s+confirma|\?|$)/i]){let a=M.match(e);if(a&&a[1]&&(r=(r=a[1].trim()).replace(/^(?:de|para|com|em|no|na|recebido|recebeu|de)\s+/i,"")).length>3)break}(!r||r.length<3)&&(r=`Registro de ${"entrada"===a?"entrada":"divida"===a?"d\xedvida":"gasto"}`),j={valor:t,tipo:a,descricao:r.length>100?r.substring(0,100):r},console.log("\uD83D\uDD14 [PLEN] Confirma\xe7\xe3o pendente detectada:",j)}}}return n.Z.json({response:M,actionData:U,pendingAction:j})}catch(e){return console.error("Erro no chat PLEN:",e),n.Z.json({error:e.message||"Erro ao processar mensagem"},{status:500})}}let y=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/plen/chat/route",pathname:"/api/plen/chat",filename:"route",bundlePath:"app/api/plen/chat/route"},resolvedPagePath:"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/api/plen/chat/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:A,staticGenerationAsyncStorage:F,serverHooks:q,headerHooks:M,staticGenerationBailout:U}=y,j="/api/plen/chat/route";function N(){return(0,s.patchFetch)({serverHooks:q,staticGenerationAsyncStorage:F})}},40315:(e,a,t)=>{t.d(a,{$s:()=>d,cu:()=>n});var r=t(74471);t(68616);var i=t(81664),o=t(42053);let s={teste:{podeCriarRegistros:!0,limiteRegistrosMensais:50,podeCriarDividas:!1,podeCriarEmprestimos:!1,podeRegistrarSalario:!1,podeUsarCalendario:!1,podeUsarMetas:!1,limiteMetas:0,podeUsarDashboard:!0,podeUsarDashboardAvancado:!1,podeExportarRelatorios:!1,podeExportarAvancado:!1,podeCriarUsuarios:!0,limiteUsuarios:2,podeUploadDocumentos:!1,podeUsarGameDinamico:!1,podeUsarFiltrosAvancados:!1},basico:{podeCriarRegistros:!0,limiteRegistrosMensais:null,podeCriarDividas:!0,podeCriarEmprestimos:!1,podeRegistrarSalario:!0,podeUsarCalendario:!0,podeUsarMetas:!0,limiteMetas:3,podeUsarDashboard:!0,podeUsarDashboardAvancado:!1,podeExportarRelatorios:!0,podeExportarAvancado:!1,podeCriarUsuarios:!0,limiteUsuarios:10,podeUploadDocumentos:!1,podeUsarGameDinamico:!1,podeUsarFiltrosAvancados:!0},premium:{podeCriarRegistros:!0,limiteRegistrosMensais:null,podeCriarDividas:!0,podeCriarEmprestimos:!0,podeRegistrarSalario:!0,podeUsarCalendario:!0,podeUsarMetas:!0,limiteMetas:null,podeUsarDashboard:!0,podeUsarDashboardAvancado:!0,podeExportarRelatorios:!0,podeExportarAvancado:!0,podeCriarUsuarios:!0,limiteUsuarios:null,podeUploadDocumentos:!0,podeUsarGameDinamico:!0,podeUsarFiltrosAvancados:!0}};async function n(){let e=await (0,i.eI)(),{data:{user:a}}=await e.auth.getUser();if(!a)return"teste";let{data:t}=await e.from("profiles").select("plano, plano_status, plano_data_fim").eq("id",a.id).single();if(!t||"teste"===t.plano)return"teste";if(("basico"===t.plano||"premium"===t.plano)&&"ativo"===t.plano_status){let e=t.plano_data_fim?new Date(t.plano_data_fim):null;if(e&&e>new Date)return t.plano}return"teste"}async function d(){return s[await n()]}async function l(e,a){return!!s[a][e]}async function c(){let e=await d();if(!e.podeCriarRegistros)return{pode:!1,motivo:"Cria\xe7\xe3o de registros n\xe3o dispon\xedvel no seu plano"};if(null===e.limiteRegistrosMensais)return{pode:!0};let a=await (0,i.eI)(),{data:{user:t}}=await a.auth.getUser();if(!t)return{pode:!1,motivo:"Usu\xe1rio n\xe3o autenticado"};let{data:r}=await a.from("profiles").select("registros_mes_atual, registros_mes_referencia").eq("id",t.id).single();if(!r)return{pode:!1,motivo:"Perfil n\xe3o encontrado"};let o=new Date().getMonth(),s=r.registros_mes_referencia?new Date(r.registros_mes_referencia).getMonth():o;return(o===s&&r.registros_mes_atual||0)>=e.limiteRegistrosMensais?{pode:!1,motivo:`Limite de ${e.limiteRegistrosMensais} registros/m\xeas atingido. Fa\xe7a upgrade para criar registros ilimitados.`}:{pode:!0}}async function p(){let e=await d();if(!e.podeCriarUsuarios)return{pode:!1,motivo:"Cria\xe7\xe3o de usu\xe1rios n\xe3o dispon\xedvel no seu plano"};if(null===e.limiteUsuarios)return{pode:!0};let a=await (0,i.eI)(),{data:{user:t}}=await a.auth.getUser();if(!t)return{pode:!1,motivo:"Usu\xe1rio n\xe3o autenticado"};let{data:r,error:o}=await a.from("users").select("id",{count:"exact"}).eq("account_owner_id",t.id);return o?{pode:!1,motivo:"Erro ao verificar usu\xe1rios"}:(r?.length||0)>=e.limiteUsuarios?{pode:!1,motivo:`Limite de ${e.limiteUsuarios} usu\xe1rios atingido. Fa\xe7a upgrade para criar usu\xe1rios ilimitados.`}:{pode:!0}}async function u(){let e=await d();if(!e.podeUsarMetas)return{pode:!1,motivo:"Sistema de metas n\xe3o dispon\xedvel no seu plano"};if(null===e.limiteMetas)return{pode:!0};let a=await (0,i.eI)(),{data:{user:t}}=await a.auth.getUser();if(!t)return{pode:!1,motivo:"Usu\xe1rio n\xe3o autenticado"};let{data:r,error:o}=await a.from("metas_cofrinho").select("id",{count:"exact"}).eq("user_id",t.id);return o?{pode:!1,motivo:"Erro ao verificar metas"}:(r?.length||0)>=e.limiteMetas?{pode:!1,motivo:`Limite de ${e.limiteMetas} metas atingido. Fa\xe7a upgrade para criar metas ilimitadas.`}:{pode:!0}}async function m(){let e=await (0,i.eI)(),{data:{user:a}}=await e.auth.getUser();a&&await e.rpc("incrementar_registro_mes",{user_uuid:a.id})}(0,o.h)([n,d,l,c,p,u,m]),(0,r.U)("1d9dce1d8eaec2e7f58e2d9eda7739f1f0b3c8fc",n),(0,r.U)("170426fcf1af55fd7863ddfb6ff4ec4727fe103a",d),(0,r.U)("94e9e16406b889792a57d5d69a46df486672234b",l),(0,r.U)("3383cdbdca0be93cedc5ff8dc965a6bd4857f22d",c),(0,r.U)("7793bfdc3973517ebedb0f54256adb3ab8f93d1e",p),(0,r.U)("7414d46d3794bfd725aa62e8dd77277b20115e42",u),(0,r.U)("4fdf752be30fe3bed32fec8fef91f1643800bcbe",m)},50482:(e,a,t)=>{e.exports=t(20399)},25091:(e,a,t)=>{e.exports=t(50482).vendored["react-rsc"].ReactDOM},18195:(e,a,t)=>{e.exports=t(50482).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},40002:(e,a,t)=>{e.exports=t(50482).vendored["react-rsc"].React},95419:(e,a,t)=>{e.exports=t(30517)}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[1638,2455,4128,7497,8070,6864,4819,1433],()=>t(96096));module.exports=r})();