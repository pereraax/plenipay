"use strict";exports.id=7336,exports.ids=[7336],exports.modules={56705:(e,a,r)=>{r.d(a,{Z:()=>n});var t=r(95344),d=r(62312),i=r(3729);function n({id:e,checked:a,onChange:r,label:n,disabled:o=!1,size:s="md",className:l=""}){let[c,m]=(0,i.useState)(!1);return(0,t.jsxs)("div",{className:`flex items-center gap-3 ${l}`,children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx("input",{type:"checkbox",id:e,checked:a,onChange:e=>r(e.target.checked),disabled:o,className:"sr-only"}),t.jsx("label",{htmlFor:e,className:`
            relative flex items-center justify-center cursor-pointer transition-all duration-300
            ${{sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[s]}
            ${o?"opacity-50 cursor-not-allowed":"cursor-pointer"}
          `,onMouseEnter:()=>!o&&m(!0),onMouseLeave:()=>m(!1),children:(0,t.jsxs)("div",{className:`
              absolute inset-0 rounded-lg border-2 transition-all duration-300
              ${a?"bg-gradient-to-br from-brand-aqua to-brand-blue border-brand-aqua shadow-lg shadow-brand-aqua/30":"bg-white dark:bg-brand-midnight border-gray-300 dark:border-white/20"}
              ${!c||o||a?"":"border-brand-aqua/50 bg-brand-aqua/5 dark:bg-brand-aqua/10"}
              ${o?"opacity-50":""}
            `,style:{transform:a?"scale(1)":c?"scale(1.05)":"scale(1)"},children:[a&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center animate-checkbox-check",children:t.jsx(d.Z,{size:{sm:10,md:14,lg:16}[s],className:"text-white dark:text-brand-midnight font-bold",strokeWidth:3})}),a&&t.jsx("div",{className:"absolute inset-0 rounded-lg bg-brand-aqua/20 animate-ping"})]})})]}),n&&t.jsx("label",{htmlFor:e,className:`
            text-sm font-medium cursor-pointer transition-colors duration-200
            ${a?"text-brand-aqua dark:text-brand-aqua":"text-brand-midnight dark:text-brand-clean"}
            ${o?"opacity-50 cursor-not-allowed":"cursor-pointer"}
          `,children:n})]})}},98593:(e,a,r)=>{r.d(a,{Z:()=>E});var t=r(95344),d=r(3729),i=r(29103),n=r(79741),o=r(52175),s=r(72086),l=r(73714),c=r(51354),m=r(70491),b=r(98026),u=r(40718),x=r(42916),g=r(97118),p=r(14513),h=r(18822),f=r(51838),v=r(38271),k=r(16588),j=r(85674),y=r(67925),w=r(56705),N=r(71532),q=r(97751);function D({value:e,onChange:a,min:r=1,max:i=31,className:n=""}){let[o,s]=(0,d.useState)(e.toString());return(0,t.jsxs)("div",{className:`relative flex items-center gap-2 ${n}`,children:[t.jsx("button",{type:"button",onClick:()=>{let t=Math.max(r,e-1);s(t.toString()),a(t)},disabled:e<=r,className:"flex items-center justify-center w-10 h-10 bg-brand-aqua/10 dark:bg-brand-aqua/20 hover:bg-brand-aqua/20 dark:hover:bg-brand-aqua/30 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-smooth border border-brand-aqua/30 dark:border-brand-aqua/40",title:"Diminuir",children:t.jsx(N.Z,{size:20,className:"text-brand-aqua dark:text-brand-aqua",strokeWidth:2.5})}),t.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:e=>{let t=e.target.value;if(s(t),""===t)return;let d=parseInt(t);if(!isNaN(d)){let e=Math.max(r,Math.min(i,d));a(e),e!==d&&s(e.toString())}},onBlur:()=>{let e=parseInt(o);isNaN(e)||e<r?(s(r.toString()),a(r)):e>i?(s(i.toString()),a(i)):(s(e.toString()),a(e))},min:r,max:i,className:"flex-1 px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm text-center font-medium",placeholder:`${r}-${i}`}),t.jsx("button",{type:"button",onClick:()=>{let r=Math.min(i,e+1);s(r.toString()),a(r)},disabled:e>=i,className:"flex items-center justify-center w-10 h-10 bg-brand-aqua/10 dark:bg-brand-aqua/20 hover:bg-brand-aqua/20 dark:hover:bg-brand-aqua/30 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-smooth border border-brand-aqua/30 dark:border-brand-aqua/40",title:"Aumentar",children:t.jsx(q.Z,{size:20,className:"text-brand-aqua dark:text-brand-aqua",strokeWidth:2.5})})]})}var C=r(22254),_=r(27100),S=r(39395),$=r(66341),M=r(22720),U=r(43328);function E({onClose:e}){let a=(0,C.useRouter)(),[r,N]=(0,d.useState)(!1),[q,E]=(0,d.useState)([]),[R,A]=(0,d.useState)(!1),[F,Z]=(0,d.useState)(null),[z,I]=(0,d.useState)("teste"),[P,O]=(0,d.useState)(!1);(0,d.useEffect)(()=>{(async function(){let e=await (0,M.cu)();I(e),"teste"===e&&O(!0)})()},[]);let[W,T]=(0,d.useState)(!0),[V,B]=(0,d.useState)(""),[G,L]=(0,d.useState)({data:""}),[Q,Y]=(0,d.useState)([{data:"",quantidade:"1"}]),[J,X]=(0,d.useState)({nome:"",observacao:"",user_id:"",data_registro:new Date().toISOString().slice(0,16),categoria:"",metodo_pagamento:"dinheiro"}),[H,K]=(0,d.useState)(!1),[ee,ea]=(0,d.useState)("mensal"),[er,et]=(0,d.useState)(1),[ed,ei]=(0,d.useState)(1),en=[{id:"alimentacao",nome:"Alimenta\xe7\xe3o",icon:n.Z},{id:"transporte",nome:"Transporte",icon:o.Z},{id:"moradia",nome:"Moradia",icon:s.Z},{id:"compras",nome:"Compras",icon:l.Z},{id:"saude",nome:"Sa\xfade",icon:c.Z},{id:"educacao",nome:"Educa\xe7\xe3o",icon:m.Z},{id:"trabalho",nome:"Trabalho",icon:b.Z},{id:"entretenimento",nome:"Entretenimento",icon:u.Z},{id:"fitness",nome:"Fitness",icon:x.Z},{id:"viagem",nome:"Viagem",icon:g.Z}];(0,d.useEffect)(()=>{eo()},[]);let eo=async()=>{let e=await (0,i.CG)();e.data&&E(e.data)},es=e=>{Q.length>1&&Y(Q.filter((a,r)=>r!==e))},el=(e,a,r)=>{let t=[...Q];t[e][a]=r,Y(t)},ec=()=>W&&0===Q.filter(e=>e.data&&""!==e.data.trim()).length?0:(0,$.d)(V),em=async r=>{if(r.preventDefault(),console.log("handleSubmit chamado"),"teste"===z){(0,_.createNotification)("Criar D\xedvidas est\xe1 dispon\xedvel apenas no Plano B\xe1sico ou Premium","warning"),O(!0);return}N(!0);try{if(console.log("Iniciando valida\xe7\xf5es...",{temParcelas:W,valorDivida:V,nome:J.nome}),!J.nome.trim()){(0,_.createNotification)("Informe o nome da d\xedvida","warning"),N(!1);return}if(!F){(0,_.createNotification)("Selecione um usu\xe1rio","warning"),N(!1);return}let r=(0,$.d)(V);if(!V||""===V.trim()||isNaN(r)||r<=0){(0,_.createNotification)("Informe um valor v\xe1lido para a d\xedvida","warning"),N(!1);return}if(W){let e=Q.filter(e=>e.data&&""!==e.data.trim()&&e.quantidade&&parseInt(e.quantidade)>0);if(0===e.length){(0,_.createNotification)("Adicione pelo menos uma parcela v\xe1lida com data e quantidade","warning"),N(!1);return}}else if(H&&G.data&&""!==G.data.trim()){(0,_.createNotification)("N\xe3o \xe9 poss\xedvel definir data quando a d\xedvida \xe9 recorrente. A data ser\xe1 calculada automaticamente pela recorr\xeancia.","warning"),N(!1);return}let t=[],d=0;if(W){let e=Q.filter(e=>e.data&&""!==e.data.trim()&&e.quantidade&&parseInt(e.quantidade)>0);if(0===e.length){(0,_.createNotification)("Adicione pelo menos uma parcela v\xe1lida com data e quantidade","warning"),N(!1);return}let a=r/e.length;console.log("Valor por parcela calculado:",a,"Total parcelas:",e.length);for(let r=0;r<e.length;r++){let n=e[r],o=parseInt(n.quantidade)||1;if(!n.data||""===n.data.trim()){t.push(`Parcela ${r+1}: data inv\xe1lida`);continue}let s=a*o,l=new FormData;if(l.append("nome",`${J.nome.trim()}${e.length>1?` - Parcela ${r+1}`:""}`),l.append("observacao",J.observacao||`D\xedvida - ${o} parcela(s) de R$ ${a.toFixed(2)}`),l.append("user_id",F.id),l.append("tipo","divida"),l.append("valor",s.toFixed(2)),l.append("categoria",J.categoria||`D\xedvida - ${J.metodo_pagamento}`),l.append("etiquetas",JSON.stringify(["d\xedvida",J.metodo_pagamento])),l.append("parcelas_totais",o.toString()),l.append("parcelas_pagas","0"),l.append("data_registro",new Date(n.data).toISOString()),H&&0===r){l.append("is_recorrente","true"),l.append("recorrencia_tipo",ee),"semanal"===ee?l.append("recorrencia_dia_semana",ed.toString()):["mensal","bimestral","trimestral","semestral","anual"].includes(ee)&&l.append("recorrencia_dia",er.toString());let e=new Date(n.data),a=new Date(e);switch(ee){case"diaria":a.setDate(a.getDate()+1);break;case"semanal":let r=(ed-e.getDay()+7)%7||7;a.setDate(a.getDate()+r);break;case"quinzenal":a.setDate(a.getDate()+15);break;case"mensal":a.setMonth(a.getMonth()+1),a.setDate(er);break;case"bimestral":a.setMonth(a.getMonth()+2),a.setDate(er);break;case"trimestral":a.setMonth(a.getMonth()+3),a.setDate(er);break;case"semestral":a.setMonth(a.getMonth()+6),a.setDate(er);break;case"anual":a.setFullYear(a.getFullYear()+1),a.setDate(er)}l.append("proxima_recorrencia",a.toISOString()),l.append("ativo","true")}try{console.log(`Criando parcela ${r+1}...`,{valorTotalParcela:s,data:n.data});let e=await (0,i.criarRegistro)(l);console.log(`Resultado criarRegistro (parcela ${r+1}):`,e),e.error?(t.push(`Parcela ${r+1}: ${e.error}`),console.error(`Erro ao criar parcela ${r+1}:`,e.error)):(d++,console.log(`Parcela ${r+1} criada com sucesso!`))}catch(e){t.push(`Parcela ${r+1}: ${e.message||"Erro desconhecido"}`),console.error(`Erro ao criar parcela ${r+1}:`,e)}}}else{let e;let a=(0,$.d)(V);e=H?new Date:G.data&&""!==G.data.trim()?new Date(G.data):new Date;let r=new FormData;if(r.append("nome",J.nome.trim()),r.append("observacao",J.observacao||"D\xedvida \xfanica"),r.append("user_id",F.id),r.append("tipo","divida"),r.append("valor",a.toFixed(2)),r.append("categoria",J.categoria||`D\xedvida - ${J.metodo_pagamento}`),r.append("etiquetas",JSON.stringify(["d\xedvida",J.metodo_pagamento])),r.append("parcelas_totais","1"),r.append("parcelas_pagas","0"),r.append("data_registro",e.toISOString()),H){r.append("is_recorrente","true"),r.append("recorrencia_tipo",ee),"semanal"===ee?r.append("recorrencia_dia_semana",ed.toString()):["mensal","bimestral","trimestral","semestral","anual"].includes(ee)&&r.append("recorrencia_dia",er.toString());let a=new Date(e);switch(ee){case"diaria":a.setDate(a.getDate()+1);break;case"semanal":let t=(ed-e.getDay()+7)%7||7;a.setDate(a.getDate()+t);break;case"quinzenal":a.setDate(a.getDate()+15);break;case"mensal":a.setMonth(a.getMonth()+1),a.setDate(er);break;case"bimestral":a.setMonth(a.getMonth()+2),a.setDate(er);break;case"trimestral":a.setMonth(a.getMonth()+3),a.setDate(er);break;case"semestral":a.setMonth(a.getMonth()+6),a.setDate(er);break;case"anual":a.setFullYear(a.getFullYear()+1),a.setDate(er)}r.append("proxima_recorrencia",a.toISOString()),r.append("ativo","true")}try{console.log("Criando d\xedvida \xfanica...",{valorUnico:a,dataRegistro:e});let n=await (0,i.criarRegistro)(r);console.log("Resultado criarRegistro:",n),n.error?(t.push(n.error),console.error("Erro ao criar d\xedvida \xfanica:",n.error)):(d++,console.log("D\xedvida \xfanica criada com sucesso!"))}catch(e){t.push(e.message||"Erro desconhecido"),console.error("Erro ao criar d\xedvida \xfanica:",e)}}if(console.log("Registros criados:",d,"Erros:",t),d>0)W?(Q.filter(e=>e.data&&""!==e.data.trim()&&e.quantidade&&parseInt(e.quantidade)>0).reduce((e,a)=>e+(parseInt(a.quantidade)||1),0),t.length>0?(0,_.createNotification)(`${d} parcela(s) registrada(s), mas ${t.length} falharam: ${t.join("; ")}`,"warning"):(0,_.createNotification)(`${d} parcela(s) da d\xedvida "${J.nome}" registrada(s) com sucesso!`,"success")):t.length>0?(0,_.createNotification)(`Erro ao registrar d\xedvida: ${t.join("; ")}`,"warning"):(0,_.createNotification)(`D\xedvida "${J.nome}" registrada com sucesso!`,"success"),X({nome:"",observacao:"",user_id:"",data_registro:new Date().toISOString().slice(0,16),categoria:"",metodo_pagamento:"dinheiro"}),Y([{data:"",quantidade:"1"}]),B(""),L({data:""}),T(!0),Z(null),K(!1),ea("mensal"),et(1),ei(1),e(),a.refresh();else{let e=W?"Erro ao registrar parcelas: "+t.join("; "):"Erro ao registrar d\xedvida: "+t.join("; ");(0,_.createNotification)(e,"warning"),console.error("Erros ao criar registros:",t)}}catch(e){console.error("Erro ao processar formul\xe1rio:",e),(0,_.createNotification)("Erro inesperado ao registrar d\xedvida. Tente novamente.","warning")}finally{N(!1)}};return(0,t.jsxs)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-3 sm:p-4 animate-fade-in overflow-y-auto",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-white via-white to-gray-50 dark:from-brand-royal dark:via-brand-midnight dark:to-brand-royal rounded-2xl sm:rounded-3xl max-w-lg w-full max-h-[90vh] sm:max-h-[85vh] flex flex-col shadow-2xl animate-slide-up overflow-hidden border-2 border-brand-aqua/30 dark:border-brand-aqua/40 my-4 sm:my-0",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 border-b-2 border-brand-aqua/20 dark:border-brand-aqua/30 px-4 sm:px-6 py-4 sm:py-5 flex items-center justify-between bg-gradient-to-r from-brand-aqua/10 via-brand-aqua/5 to-transparent dark:from-brand-aqua/20 dark:via-brand-aqua/10",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-display font-bold text-brand-midnight dark:text-brand-clean",children:"Registrar D\xedvida"}),t.jsx("button",{onClick:e,className:"p-2 hover:bg-red-500/20 dark:hover:bg-red-500/30 rounded-xl transition-smooth",children:t.jsx(p.Z,{size:22,className:"text-brand-midnight dark:text-brand-clean",strokeWidth:2.5})})]}),(0,t.jsxs)("form",{onSubmit:em,className:"flex flex-col flex-1 min-h-0 bg-white/50 dark:bg-brand-midnight/60 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-4 sm:py-5 space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Usu\xe1rio/Envolvido *"}),(0,t.jsxs)("button",{type:"button",onClick:()=>A(!0),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg hover:bg-gray-50 dark:hover:bg-white/5 focus:outline-none focus:border-brand-aqua transition-smooth flex items-center justify-between text-left text-sm",children:[t.jsx("div",{className:"flex items-center gap-2",children:F?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-brand-aqua/20 dark:bg-brand-aqua/30 flex items-center justify-center",children:t.jsx("span",{className:"text-brand-aqua font-bold text-xs",children:F.nome.charAt(0).toUpperCase()})}),t.jsx("span",{className:"text-brand-midnight dark:text-brand-clean text-sm",children:F.nome})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(h.Z,{size:18,className:"text-brand-midnight/50 dark:text-brand-clean/50"}),t.jsx("span",{className:"text-brand-midnight/50 dark:text-brand-clean/50 text-sm",children:"Selecione um usu\xe1rio"})]})}),t.jsx(f.Z,{size:18,className:"text-brand-aqua"})]}),t.jsx("p",{className:"mt-1 text-[10px] text-brand-midnight/60 dark:text-brand-clean/60",children:"Selecione a pessoa respons\xe1vel ou envolvida nesta d\xedvida. Ex: Voc\xea mesmo, C\xf4njuge, Filho, etc."})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Nome da D\xedvida *"}),t.jsx("input",{type:"text",required:!0,value:J.nome,onChange:e=>X({...J,nome:e.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50",placeholder:"Ex: Conta de luz, Cart\xe3o de cr\xe9dito, Financiamento, Empr\xe9stimo..."})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Observa\xe7\xe3o"}),t.jsx("textarea",{value:J.observacao,onChange:e=>X({...J,observacao:e.target.value}),rows:2,className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50 resize-none",placeholder:"Observa\xe7\xf5es sobre a d\xedvida..."})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Valor da D\xedvida *"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-brand-midnight/50 dark:text-brand-clean/50 text-xs",children:"R$"}),t.jsx("input",{type:"text",required:!0,value:V,onChange:e=>{B((0,$.v)(e.target.value))},placeholder:"0,00",className:"w-full pl-7 pr-2 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-sm text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]}),(0,t.jsxs)("div",{children:[t.jsx(w.Z,{id:"temParcelas",checked:W,onChange:T,label:"Esta d\xedvida tem parcelas?",size:"md",className:"mb-3"}),W?(0,t.jsxs)(t.Fragment,{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Parcelas da D\xedvida *"}),(0,t.jsxs)("div",{className:"space-y-3",children:[Q.map((e,a)=>(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-brand-midnight/50 rounded-lg p-3 border border-gray-200 dark:border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-brand-midnight dark:text-brand-clean",children:["Parcela ",a+1]}),Q.length>1&&t.jsx("button",{type:"button",onClick:()=>es(a),className:"p-1 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-smooth",title:"Remover parcela",children:t.jsx(v.Z,{size:16})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight/70 dark:text-brand-clean/70 mb-1",children:"Data *"}),t.jsx("input",{type:"datetime-local",required:!0,value:e.data,onChange:e=>el(a,"data",e.target.value),className:"w-full px-2 py-1.5 bg-white dark:bg-brand-royal border border-gray-300 dark:border-white/10 rounded focus:outline-none focus:border-brand-aqua transition-smooth text-xs text-brand-midnight dark:text-brand-clean"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight/70 dark:text-brand-clean/70 mb-1",children:"Qtd *"}),t.jsx("input",{type:"number",min:"1",required:!0,value:e.quantidade,onChange:e=>el(a,"quantidade",e.target.value),placeholder:"1",className:"w-full px-2 py-1.5 bg-white dark:bg-brand-royal border border-gray-300 dark:border-white/10 rounded focus:outline-none focus:border-brand-aqua transition-smooth text-xs text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]}),t.jsx("div",{className:"mt-2 text-xs text-brand-midnight/60 dark:text-brand-clean/60",children:"Valor ser\xe1 dividido igualmente entre as parcelas"})]},a)),t.jsx("div",{className:"flex justify-center",children:(0,t.jsxs)("button",{type:"button",onClick:()=>{Y([...Q,{data:"",quantidade:"1"}])},className:"px-3 py-2 bg-brand-aqua/20 dark:bg-brand-aqua/30 text-brand-aqua rounded-lg font-medium hover:bg-brand-aqua/30 dark:hover:bg-brand-aqua/40 transition-smooth flex items-center gap-1.5 border border-brand-aqua/30 text-xs",children:[t.jsx(f.Z,{size:16,strokeWidth:2.5}),"Adicionar Parcela"]})}),ec()>0&&t.jsx("div",{className:"bg-brand-aqua/10 dark:bg-brand-aqua/20 rounded-lg p-2.5 border border-brand-aqua/20 dark:border-brand-aqua/30",children:(0,t.jsxs)("p",{className:"text-xs font-medium text-brand-midnight dark:text-brand-clean text-center",children:["Total: ",t.jsx("span",{className:"text-brand-aqua font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(ec())})]})})]})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"D\xedvida \xdanica"}),t.jsx("div",{className:"bg-gray-50 dark:bg-brand-midnight/50 rounded-lg p-3 border border-gray-200 dark:border-white/10",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-xs font-medium text-brand-midnight/70 dark:text-brand-clean/70 mb-1",children:["Data (Opcional)",H&&t.jsx("span",{className:"ml-2 text-orange-500 dark:text-orange-400 text-[10px]",children:"(Desabilitado - recorr\xeancia define a data)"})]}),t.jsx("input",{type:"datetime-local",value:G.data,onChange:e=>L({...G,data:e.target.value}),disabled:H,className:"w-full px-3 py-2 bg-white dark:bg-brand-royal border border-gray-300 dark:border-white/10 rounded focus:outline-none focus:border-brand-aqua transition-smooth text-sm text-brand-midnight dark:text-brand-clean disabled:opacity-50 disabled:cursor-not-allowed"}),!H&&t.jsx("p",{className:"text-xs text-brand-midnight/50 dark:text-brand-clean/60 mt-1",children:"Se n\xe3o informar, ser\xe1 usada a data atual"})]})})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Categoria"}),t.jsx("div",{className:"grid grid-cols-5 gap-2",children:en.map(e=>{let a=e.icon,r=J.categoria===e.id;return(0,t.jsxs)("button",{type:"button",onClick:()=>X({...J,categoria:r?"":e.id}),className:`flex flex-col items-center gap-1 px-2 py-2 rounded-lg font-medium transition-smooth text-xs overflow-hidden ${r?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"}`,title:e.nome,children:[t.jsx(a,{size:18,strokeWidth:2}),t.jsx("span",{className:"text-[10px] leading-tight text-center break-words max-w-full px-1",children:e.nome})]},e.id)})})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"M\xe9todo de Pagamento *"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>X({...J,metodo_pagamento:"pix"}),className:`flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ${"pix"===J.metodo_pagamento?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"}`,children:[t.jsx(k.Z,{size:18,strokeWidth:2}),t.jsx("span",{children:"PIX"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>X({...J,metodo_pagamento:"cartao"}),className:`flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ${"cartao"===J.metodo_pagamento?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"}`,children:[t.jsx(j.Z,{size:18,strokeWidth:2}),t.jsx("span",{children:"Cart\xe3o"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>X({...J,metodo_pagamento:"dinheiro"}),className:`flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ${"dinheiro"===J.metodo_pagamento?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"}`,children:[t.jsx(y.Z,{size:18,strokeWidth:2}),t.jsx("span",{children:"Dinheiro"})]})]})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 dark:border-white/10 pt-4",children:[t.jsx(w.Z,{id:"isRecorrente",checked:H,onChange:K,label:"Esta d\xedvida \xe9 recorrente?",size:"md"}),H&&(0,t.jsxs)("div",{className:"space-y-3 bg-gray-50 dark:bg-brand-midnight/50 rounded-lg p-3 border border-gray-200 dark:border-white/10",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Repete de quanto em quanto tempo? *"}),(0,t.jsxs)("select",{value:ee,onChange:e=>ea(e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm",children:[t.jsx("option",{value:"diaria",children:"Di\xe1ria"}),t.jsx("option",{value:"semanal",children:"Semanal"}),t.jsx("option",{value:"quinzenal",children:"Quinzenal (a cada 15 dias)"}),t.jsx("option",{value:"mensal",children:"Mensal"}),t.jsx("option",{value:"bimestral",children:"Bimestral (a cada 2 meses)"}),t.jsx("option",{value:"trimestral",children:"Trimestral (a cada 3 meses)"}),t.jsx("option",{value:"semestral",children:"Semestral (a cada 6 meses)"}),t.jsx("option",{value:"anual",children:"Anual"})]})]}),"semanal"===ee&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Dia da semana *"}),(0,t.jsxs)("select",{value:ed,onChange:e=>ei(parseInt(e.target.value)),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm",children:[t.jsx("option",{value:"0",children:"Domingo"}),t.jsx("option",{value:"1",children:"Segunda-feira"}),t.jsx("option",{value:"2",children:"Ter\xe7a-feira"}),t.jsx("option",{value:"3",children:"Quarta-feira"}),t.jsx("option",{value:"4",children:"Quinta-feira"}),t.jsx("option",{value:"5",children:"Sexta-feira"}),t.jsx("option",{value:"6",children:"S\xe1bado"})]})]}),("mensal"===ee||"bimestral"===ee||"trimestral"===ee||"semestral"===ee||"anual"===ee)&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Dia do m\xeas (1-31) *"}),t.jsx(D,{value:er,onChange:et,min:1,max:31}),t.jsx("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mt-1",children:"A d\xedvida ser\xe1 criada automaticamente neste dia do m\xeas"})]}),"diaria"===ee&&t.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-2",children:t.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"A d\xedvida ser\xe1 criada automaticamente todos os dias"})}),"quinzenal"===ee&&t.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-2",children:t.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"A d\xedvida ser\xe1 criada automaticamente a cada 15 dias, a partir da data inicial"})})]})]})]}),t.jsx("div",{className:"flex-shrink-0 bg-white dark:bg-brand-midnight border-t border-gray-200 dark:border-white/10 px-5 py-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-white/10 border border-gray-200 dark:border-white/10 transition-smooth text-sm",children:"Cancelar"}),t.jsx("button",{type:"submit",disabled:r,className:"flex-1 px-4 py-2.5 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:r?"Registrando...":"REGISTRAR D\xcdVIDA"})]})})]})]}),t.jsx(S.Z,{isOpen:R,onClose:()=>A(!1),onSelect:e=>{Z(e),X({...J,user_id:e.id})},selectedUserId:J.user_id}),P&&t.jsx(U.Z,{isOpen:P,onClose:()=>{O(!1),e()},feature:"Criar D\xedvidas",planoNecessario:"basico",planoAtual:z})]})}},22720:(e,a,r)=>{r.d(a,{cu:()=>d}),r(13664);var t=r(28371);(0,t.$)("4fdf752be30fe3bed32fec8fef91f1643800bcbe");var d=(0,t.$)("1d9dce1d8eaec2e7f58e2d9eda7739f1f0b3c8fc");(0,t.$)("170426fcf1af55fd7863ddfb6ff4ec4727fe103a"),(0,t.$)("94e9e16406b889792a57d5d69a46df486672234b"),(0,t.$)("3383cdbdca0be93cedc5ff8dc965a6bd4857f22d"),(0,t.$)("7793bfdc3973517ebedb0f54256adb3ab8f93d1e"),(0,t.$)("7414d46d3794bfd725aa62e8dd77277b20115e42")},74227:(e,a,r)=>{r.r(a),r.d(a,{incrementarRegistroMes:()=>u,obterFeaturesUsuario:()=>s,obterPlanoUsuario:()=>o,podeCriarMeta:()=>b,podeCriarRegistro:()=>c,podeCriarUsuario:()=>m,verificarFeature:()=>l});var t=r(98601);r(75811);var d=r(25345),i=r(46893);let n={teste:{podeCriarRegistros:!0,limiteRegistrosMensais:50,podeCriarDividas:!1,podeCriarEmprestimos:!1,podeRegistrarSalario:!1,podeUsarCalendario:!1,podeUsarMetas:!1,limiteMetas:0,podeUsarDashboard:!0,podeUsarDashboardAvancado:!1,podeExportarRelatorios:!1,podeExportarAvancado:!1,podeCriarUsuarios:!0,limiteUsuarios:2,podeUploadDocumentos:!1,podeUsarGameDinamico:!1,podeUsarFiltrosAvancados:!1},basico:{podeCriarRegistros:!0,limiteRegistrosMensais:null,podeCriarDividas:!0,podeCriarEmprestimos:!1,podeRegistrarSalario:!0,podeUsarCalendario:!0,podeUsarMetas:!0,limiteMetas:3,podeUsarDashboard:!0,podeUsarDashboardAvancado:!1,podeExportarRelatorios:!0,podeExportarAvancado:!1,podeCriarUsuarios:!0,limiteUsuarios:10,podeUploadDocumentos:!1,podeUsarGameDinamico:!1,podeUsarFiltrosAvancados:!0},premium:{podeCriarRegistros:!0,limiteRegistrosMensais:null,podeCriarDividas:!0,podeCriarEmprestimos:!0,podeRegistrarSalario:!0,podeUsarCalendario:!0,podeUsarMetas:!0,limiteMetas:null,podeUsarDashboard:!0,podeUsarDashboardAvancado:!0,podeExportarRelatorios:!0,podeExportarAvancado:!0,podeCriarUsuarios:!0,limiteUsuarios:null,podeUploadDocumentos:!0,podeUsarGameDinamico:!0,podeUsarFiltrosAvancados:!0}};async function o(){let e=await (0,d.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a)return"teste";let{data:r}=await e.from("profiles").select("plano, plano_status, plano_data_fim").eq("id",a.id).single();if(!r||"teste"===r.plano)return"teste";if(("basico"===r.plano||"premium"===r.plano)&&"ativo"===r.plano_status){let e=r.plano_data_fim?new Date(r.plano_data_fim):null;if(e&&e>new Date)return r.plano}return"teste"}async function s(){return n[await o()]}async function l(e,a){return!!n[a][e]}async function c(){let e=await s();if(!e.podeCriarRegistros)return{pode:!1,motivo:"Cria\xe7\xe3o de registros n\xe3o dispon\xedvel no seu plano"};if(null===e.limiteRegistrosMensais)return{pode:!0};let a=await (0,d.createClient)(),{data:{user:r}}=await a.auth.getUser();if(!r)return{pode:!1,motivo:"Usu\xe1rio n\xe3o autenticado"};let{data:t}=await a.from("profiles").select("registros_mes_atual, registros_mes_referencia").eq("id",r.id).single();if(!t)return{pode:!1,motivo:"Perfil n\xe3o encontrado"};let i=new Date().getMonth(),n=t.registros_mes_referencia?new Date(t.registros_mes_referencia).getMonth():i;return(i===n&&t.registros_mes_atual||0)>=e.limiteRegistrosMensais?{pode:!1,motivo:`Limite de ${e.limiteRegistrosMensais} registros/m\xeas atingido. Fa\xe7a upgrade para criar registros ilimitados.`}:{pode:!0}}async function m(){let e=await s();if(!e.podeCriarUsuarios)return{pode:!1,motivo:"Cria\xe7\xe3o de usu\xe1rios n\xe3o dispon\xedvel no seu plano"};if(null===e.limiteUsuarios)return{pode:!0};let a=await (0,d.createClient)(),{data:{user:r}}=await a.auth.getUser();if(!r)return{pode:!1,motivo:"Usu\xe1rio n\xe3o autenticado"};let{data:t,error:i}=await a.from("users").select("id",{count:"exact"}).eq("account_owner_id",r.id);return i?{pode:!1,motivo:"Erro ao verificar usu\xe1rios"}:(t?.length||0)>=e.limiteUsuarios?{pode:!1,motivo:`Limite de ${e.limiteUsuarios} usu\xe1rios atingido. Fa\xe7a upgrade para criar usu\xe1rios ilimitados.`}:{pode:!0}}async function b(){let e=await s();if(!e.podeUsarMetas)return{pode:!1,motivo:"Sistema de metas n\xe3o dispon\xedvel no seu plano"};if(null===e.limiteMetas)return{pode:!0};let a=await (0,d.createClient)(),{data:{user:r}}=await a.auth.getUser();if(!r)return{pode:!1,motivo:"Usu\xe1rio n\xe3o autenticado"};let{data:t,error:i}=await a.from("metas_cofrinho").select("id",{count:"exact"}).eq("user_id",r.id);return i?{pode:!1,motivo:"Erro ao verificar metas"}:(t?.length||0)>=e.limiteMetas?{pode:!1,motivo:`Limite de ${e.limiteMetas} metas atingido. Fa\xe7a upgrade para criar metas ilimitadas.`}:{pode:!0}}async function u(){let e=await (0,d.createClient)(),{data:{user:a}}=await e.auth.getUser();a&&await e.rpc("incrementar_registro_mes",{user_uuid:a.id})}(0,i.ensureServerEntryExports)([o,s,l,c,m,b,u]),(0,t.createActionProxy)("1d9dce1d8eaec2e7f58e2d9eda7739f1f0b3c8fc",o),(0,t.createActionProxy)("170426fcf1af55fd7863ddfb6ff4ec4727fe103a",s),(0,t.createActionProxy)("94e9e16406b889792a57d5d69a46df486672234b",l),(0,t.createActionProxy)("3383cdbdca0be93cedc5ff8dc965a6bd4857f22d",c),(0,t.createActionProxy)("7793bfdc3973517ebedb0f54256adb3ab8f93d1e",m),(0,t.createActionProxy)("7414d46d3794bfd725aa62e8dd77277b20115e42",b),(0,t.createActionProxy)("4fdf752be30fe3bed32fec8fef91f1643800bcbe",u)}};