(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1110],{99670:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(62898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5589:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(62898).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},92851:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(62898).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},53589:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(62898).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},85790:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(62898).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},72491:function(e,a,t){Promise.resolve().then(t.bind(t,91337))},91337:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return W}});var r=t(57437),s=t(2265),d=t(31441),n=t(9353),i=t(41827),l=t(62898);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,l.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var c=t(9883),x=t(76637),m=t(11981),b=t(85790),h=t(45367);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,l.Z)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);var p=t(53589),g=t(17961),v=t(82836),f=t(25727),j=t(83302),y=t(89282),N=t(82549),k=t(24033),w=t(53468),q=t(93750);function D(e){var a;let{divida:t,onClose:d}=e,n=(0,k.useRouter)(),[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(""),[x,m]=(0,s.useState)(new Date().toISOString().slice(0,16)),b=e=>e?e.split("\n").filter(e=>{let a=e.trim();return!(a.startsWith("[")&&a.endsWith("]"))}).join("\n").trim():"",h=(()=>{try{var e;if(!t.observacao)return[];let a=t.observacao.split("\n"),r=null===(e=a[a.length-1])||void 0===e?void 0:e.trim();if(r&&r.startsWith("[")&&r.endsWith("]")){let e=JSON.parse(r);if(Array.isArray(e))return e.map(e=>({valor:"number"==typeof e.valor?e.valor:parseFloat(e.valor),data:e.data,dataFormatada:new Date(e.data).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})).sort((e,a)=>new Date(a.data).getTime()-new Date(e.data).getTime())}}catch(e){console.error("Erro ao extrair hist\xf3rico:",e)}return[]})(),u=t.valor,p=t.parcelas_totais>0?u/t.parcelas_totais:u,g=h.reduce((e,a)=>e+a.valor,0),v=u-g,j=u>0?g/u*100:0,y=async e=>{e.preventDefault(),l(!0);try{if(!o||""===o.trim()){(0,w.createNotification)("Informe o valor do pagamento","warning"),l(!1);return}if(!x){(0,w.createNotification)("Informe a data do pagamento","warning"),l(!1);return}let e=(0,q.d)(o);if(isNaN(e)||e<=0){(0,w.createNotification)("Valor inv\xe1lido. Informe um valor maior que zero.","warning"),l(!1);return}if(e>v+.01){(0,w.createNotification)("O valor n\xe3o pode ser maior que o pendente (".concat(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v),")"),"warning"),l(!1);return}let a=await (0,f.ue)(t.id,e,x);a.error?(0,w.createNotification)("Erro ao processar pagamento: "+a.error,"warning"):(g+e>=u-.01&&(0,w.createNotification)('\uD83C\uDF89 D\xedvida "'.concat(t.nome,'" foi quitada completamente!'),"success"),d(),n.refresh())}catch(e){console.error("Erro ao processar pagamento:",e),(0,w.createNotification)("Erro inesperado ao processar pagamento. Tente novamente.","warning")}finally{l(!1)}},D=(a=(0,q.d)(o))&&!(a<=0)?Math.min((g+a)/u*100,100):j;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center p-4 animate-fade-in",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-brand-royal rounded-2xl max-w-lg w-full max-h-[85vh] flex flex-col shadow-2xl animate-slide-up overflow-hidden border border-gray-200 dark:border-white/10",children:[(0,r.jsxs)("div",{className:"flex-shrink-0 border-b border-gray-200 dark:border-white/10 px-5 py-4 flex items-center justify-between bg-white dark:bg-brand-midnight",children:[(0,r.jsx)("h2",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean",children:"Pagar D\xedvida"}),(0,r.jsx)("button",{onClick:d,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-smooth",children:(0,r.jsx)(N.Z,{size:20,className:"text-brand-midnight dark:text-brand-clean"})})]}),(0,r.jsxs)("form",{onSubmit:y,className:"flex flex-col flex-1 min-h-0 bg-white dark:bg-brand-royal overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto px-5 py-4 space-y-4",children:[(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-brand-midnight/50 rounded-lg p-3 space-y-2",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-base font-display text-brand-midnight dark:text-brand-clean mb-1",children:t.nome}),b(t.observacao)&&(0,r.jsx)("p",{className:"text-xs text-brand-midnight/70 dark:text-brand-clean/70",children:b(t.observacao)})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-brand-midnight rounded-lg p-3 border border-gray-200 dark:border-white/10",children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-1",children:"Total"}),(0,r.jsx)("p",{className:"text-sm font-display text-brand-midnight dark:text-brand-clean",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u)})]}),(0,r.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-800",children:[(0,r.jsx)("p",{className:"text-xs text-green-700 dark:text-green-400 mb-1",children:"Pago"}),(0,r.jsx)("p",{className:"text-sm font-display text-green-700 dark:text-green-400",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(g)})]}),(0,r.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3 border border-orange-200 dark:border-orange-800",children:[(0,r.jsx)("p",{className:"text-xs text-orange-700 dark:text-orange-400 mb-1",children:"Pendente"}),(0,r.jsx)("p",{className:"text-sm font-display text-orange-700 dark:text-orange-400",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v)})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-brand-aqua/10 via-brand-aqua/5 to-brand-blue/10 dark:from-brand-aqua/20 dark:via-brand-aqua/10 dark:to-brand-blue/20 rounded-xl p-4 border-2 border-brand-aqua/30 dark:border-brand-aqua/40 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-base font-display text-brand-midnight dark:text-brand-clean",children:"Progresso Atual"}),(0,r.jsxs)("span",{className:"text-2xl font-display text-brand-aqua dark:text-brand-aqua drop-shadow-sm",children:[j.toFixed(1),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 dark:bg-brand-midnight/70 rounded-full h-6 overflow-hidden border-2 border-brand-aqua/20 dark:border-brand-aqua/30 shadow-inner",children:(0,r.jsxs)("div",{className:"h-full bg-gradient-to-r from-brand-aqua via-brand-blue to-brand-aqua rounded-full transition-all duration-700 ease-out shadow-lg shadow-brand-aqua/50 relative overflow-hidden",style:{width:"".concat(Math.min(j,100),"%")},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer"}),j>15&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-end pr-2",children:(0,r.jsxs)("span",{className:"text-[10px] font-bold text-white drop-shadow-md",children:[j.toFixed(0),"%"]})})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Quanto voc\xea pode pagar hoje? *"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-brand-midnight/70 dark:text-brand-clean/70 font-medium text-sm",children:"R$"}),(0,r.jsx)("input",{type:"text",required:!0,value:o,onChange:e=>{c((0,q.v)(e.target.value))},placeholder:"0,00",maxLength:15,className:"w-full pl-10 pr-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"datetime-local",required:!0,value:x,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm"})})]}),(0,r.jsxs)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mt-1.5",children:["Valor m\xe1ximo: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v)]})]}),o&&(0,q.d)(o)>0&&(0,r.jsxs)("div",{className:"bg-brand-aqua/10 dark:bg-brand-aqua/20 rounded-lg p-3 border border-brand-aqua/20 dark:border-brand-aqua/30",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-brand-midnight dark:text-brand-clean",children:"Progresso Ap\xf3s Pagamento"}),(0,r.jsxs)("span",{className:"text-xs font-semibold text-brand-aqua",children:[D.toFixed(1),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 dark:bg-brand-midnight rounded-full h-2.5 mb-2",children:(0,r.jsx)("div",{className:"bg-brand-aqua h-2.5 rounded-full transition-all duration-500",style:{width:"".concat(D,"%")}})}),(0,r.jsxs)("div",{className:"text-xs text-brand-midnight/70 dark:text-brand-clean/70",children:["Ap\xf3s este pagamento, restar\xe1:"," ",(0,r.jsx)("span",{className:"font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Math.max(0,v-(0,q.d)(o)))})]})]}),h.length>0&&(0,r.jsxs)("div",{className:"bg-white dark:bg-brand-midnight rounded-lg p-3 border border-gray-200 dark:border-white/10",children:[(0,r.jsx)("h4",{className:"text-xs font-display text-brand-midnight dark:text-brand-clean mb-2",children:"Hist\xf3rico de Pagamentos"}),(0,r.jsx)("div",{className:"space-y-1.5 max-h-40 overflow-y-auto",children:h.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-brand-midnight/50 rounded border border-gray-200 dark:border-white/10",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-brand-midnight dark:text-brand-clean",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.valor)}),(0,r.jsx)("div",{className:"text-[10px] text-brand-midnight/60 dark:text-brand-clean/60 mt-0.5",children:e.dataFormatada})]}),(0,r.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"✓ Pago"})]},a))})]}),t.parcelas_totais>1&&(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-800",children:[(0,r.jsxs)("p",{className:"text-xs text-blue-800 dark:text-blue-400",children:[(0,r.jsx)("strong",{children:"Parcelas:"})," ",t.parcelas_pagas,"/",t.parcelas_totais," pagas",t.parcelas_totais-t.parcelas_pagas>0&&(0,r.jsxs)("span",{children:[" • Faltam ",t.parcelas_totais-t.parcelas_pagas," parcelas"]})]}),(0,r.jsxs)("p",{className:"text-[10px] text-blue-700 dark:text-blue-400 mt-1",children:["Valor por parcela: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(p)]})]})]}),(0,r.jsx)("div",{className:"flex-shrink-0 bg-white dark:bg-brand-midnight border-t border-gray-200 dark:border-white/10 px-5 py-4",children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-white/10 border border-gray-200 dark:border-white/10 transition-smooth text-sm",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",disabled:i||!o||0>=(0,q.d)(o),className:"flex-1 px-4 py-2.5 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:i?"Processando...":"CONFIRMAR PAGAMENTO"})]})})]})]})})}var _=t(45120),C=t(92851),R=t(81291),E=t(17158);function F(e){let{isOpen:a,onClose:t,onComplete:d,steps:n,tutorialId:i}=e,[l,o]=(0,s.useState)(0),[c,x]=(0,s.useState)(null),[m,b]=(0,s.useState)({top:0,left:0}),h=(0,s.useRef)(null);if((0,s.useEffect)(()=>{if(!a||0===n.length)return;let e=n[l];if(!e)return;let t=document.querySelector(e.target);if(x(t),t){let a=t.getBoundingClientRect(),r=window.scrollY,s=window.scrollX,d=a.top+r,n=a.left+s;switch(e.position){case"top":d=a.top+r-10,n=a.left+s+a.width/2;break;case"bottom":d=a.bottom+r+10,n=a.left+s+a.width/2;break;case"left":d=a.top+r+a.height/2,n=a.left+s-10;break;case"right":d=a.top+r+a.height/2,n=a.right+s+10;break;default:d=a.top+r+a.height/2,n=a.left+s+a.width/2}n<20&&(n=20),n>window.innerWidth-384-20&&(n=window.innerWidth-384-20),d<20&&(d=20),d>window.innerHeight-300-20&&(d=window.innerHeight-300-20),b({top:d,left:n}),t.scrollIntoView({behavior:"smooth",block:"center"})}},[l,a,n]),!a||0===n.length)return null;let u=n[l],p=0===l,g=l===n.length-1,v=()=>{d()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:h,className:"fixed inset-0 z-[9998]",onClick:v,children:c?(()=>{let e=c.getBoundingClientRect(),a=Math.max(0,e.top-10),t=Math.max(0,e.left-10),s=Math.min(window.innerWidth,e.right+10),d=Math.min(window.innerHeight,e.bottom+10),n=d-a;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute bg-black/20 backdrop-blur-sm pointer-events-none",style:{position:"fixed",top:0,left:0,right:0,height:"".concat(a,"px")}}),(0,r.jsx)("div",{className:"absolute bg-black/20 backdrop-blur-sm pointer-events-none",style:{position:"fixed",top:"".concat(a,"px"),left:0,width:"".concat(t,"px"),height:"".concat(n,"px")}}),(0,r.jsx)("div",{className:"absolute bg-black/20 backdrop-blur-sm pointer-events-none",style:{position:"fixed",top:"".concat(a,"px"),left:"".concat(s,"px"),right:0,height:"".concat(n,"px")}}),(0,r.jsx)("div",{className:"absolute bg-black/20 backdrop-blur-sm pointer-events-none",style:{position:"fixed",top:"".concat(d,"px"),left:0,right:0,bottom:0}}),(0,r.jsx)("div",{className:"absolute border-4 border-brand-aqua rounded-xl pointer-events-none animate-pulse z-30",style:{position:"fixed",top:e.top-4,left:e.left-4,width:e.width+8,height:e.height+8,boxShadow:"0 0 0 2px rgba(0, 255, 255, 0.3), 0 0 20px rgba(0, 255, 255, 0.2)"}})]})})():(0,r.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm pointer-events-none"})}),(0,r.jsxs)("div",{className:"fixed z-[9999] w-80 md:w-96 bg-gradient-to-br from-brand-royal via-brand-midnight to-brand-royal rounded-2xl shadow-2xl border-2 border-brand-aqua/50 p-6 animate-scale-in",style:{top:"".concat(m.top,"px"),left:"".concat(m.left,"px"),transform:"left"===u.position||"right"===u.position?"translateY(-50%)":"top"===u.position||"bottom"===u.position?"translateX(-50%)":"translate(-50%, -50%)"},onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"p-1.5 bg-brand-aqua/20 rounded-lg",children:(0,r.jsx)(C.Z,{size:18,className:"text-brand-aqua"})}),(0,r.jsxs)("span",{className:"text-sm text-brand-clean/60",children:[l+1," de ",n.length]})]}),(0,r.jsx)("button",{onClick:v,className:"p-1 hover:bg-white/10 rounded-lg transition-smooth",children:(0,r.jsx)(N.Z,{size:18,className:"text-brand-clean/60"})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-display font-bold text-white mb-2",children:u.title}),(0,r.jsx)("p",{className:"text-brand-clean/80 text-sm leading-relaxed",children:u.description})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,r.jsxs)("button",{onClick:()=>{p||o(e=>e-1)},disabled:p,className:"px-4 py-2 bg-brand-midnight/50 hover:bg-brand-midnight border border-brand-aqua/30 rounded-lg text-white transition-smooth flex items-center gap-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)(R.Z,{size:16}),"Anterior"]}),(0,r.jsx)("button",{onClick:v,className:"px-4 py-2 text-brand-clean/60 hover:text-brand-clean transition-smooth text-sm",children:"Pular tutorial"}),(0,r.jsxs)("button",{onClick:()=>{g?d():o(e=>e+1)},className:"px-4 py-2 bg-brand-aqua hover:bg-brand-aqua/90 text-brand-midnight rounded-lg font-semibold transition-smooth flex items-center gap-2 text-sm",children:[g?"Finalizar":"Pr\xf3ximo",(0,r.jsx)(E.Z,{size:16})]})]})]})]})}var M=t(34599);function S(e){let{dividasCount:a,onShowTutorial:t}=e,[d,n]=(0,s.useState)(!1),[i,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{!async function(){try{let e=(0,M.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a){n(!1),l(!1);return}let{data:t}=await e.from("profiles").select("plano, plano_status, plano_data_fim").eq("id",a.id).single();if(!t){n(!1),l(!1);return}let r="basico"===t.plano||"premium"===t.plano,s="ativo"===t.plano_status,d=!!t.plano_data_fim&&new Date(t.plano_data_fim)>new Date;n(r&&s&&d)}catch(e){console.error("Erro ao verificar plano:",e),n(!1)}finally{l(!1)}}()},[]);let{isOpen:o,isLoading:c,markAsSeen:x,resetTutorial:m}=function(e){let{tutorialId:a,shouldShow:t}=e,[r,d]=(0,s.useState)(!1),[n,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async function(){if(!t){i(!1);return}try{let e=(0,M.createClient)(),{data:{user:t}}=await e.auth.getUser();if(!t){i(!1);return}let{data:r}=await e.from("tutoriais_vistos").select("id").eq("user_id",t.id).eq("tutorial_id",a).single(),s=localStorage.getItem("tutorial_".concat(a,"_visto"));r||s?d(!1):setTimeout(()=>{d(!0)},500)}catch(e){console.error("Erro ao verificar status do tutorial:",e),localStorage.getItem("tutorial_".concat(a,"_visto"))||setTimeout(()=>{d(!0)},500)}finally{i(!1)}})()},[a,t]),{isOpen:r,isLoading:n,markAsSeen:async()=>{try{let e=(0,M.createClient)(),{data:{user:t}}=await e.auth.getUser();t&&(await e.from("tutoriais_vistos").upsert({user_id:t.id,tutorial_id:a,visto_em:new Date().toISOString()}),localStorage.setItem("tutorial_".concat(a,"_visto"),"true"))}catch(e){console.error("Erro ao marcar tutorial como visto:",e),localStorage.setItem("tutorial_".concat(a,"_visto"),"true")}d(!1)},resetTutorial:async()=>{try{let e=(0,M.createClient)(),{data:{user:t}}=await e.auth.getUser();t&&await e.from("tutoriais_vistos").delete().eq("user_id",t.id).eq("tutorial_id",a),localStorage.removeItem("tutorial_".concat(a,"_visto"))}catch(e){console.error("Erro ao resetar tutorial:",e),localStorage.removeItem("tutorial_".concat(a,"_visto"))}d(!0)},close:()=>d(!1)}}({tutorialId:"dividas",shouldShow:d}),[b,h]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{console.log("Tutorial Dividas - shouldShow:",d,"isChecking:",i)},[d,i]),(0,r.jsxs)(r.Fragment,{children:[!i&&!c&&(0,r.jsx)(F,{isOpen:o||b,onClose:()=>{x(),h(!1)},onComplete:()=>{x(),h(!1)},steps:[{id:"busca",target:'[data-tutorial="busca-dividas"]',title:"Buscar D\xedvidas",description:"Use o campo de busca para encontrar d\xedvidas espec\xedficas por nome, valor ou usu\xe1rio. \xc9 r\xe1pido e eficiente!",position:"bottom"},{id:"registrar",target:'[data-tutorial="registrar-divida"]',title:"Registrar Nova D\xedvida",description:"Clique aqui para registrar uma nova d\xedvida. Voc\xea pode definir valor, parcelas, categoria e muito mais.",position:"bottom"},{id:"estatisticas",target:'[data-tutorial="estatisticas-dividas"]',title:"Estat\xedsticas de D\xedvidas",description:"Acompanhe o total de d\xedvidas pendentes, o valor que ainda falta pagar e seu progresso geral de quita\xe7\xe3o.",position:"bottom"},{id:"tabela",target:'[data-tutorial="tabela-dividas"]',title:"Lista de D\xedvidas",description:"Aqui voc\xea v\xea todas as suas d\xedvidas organizadas. D\xedvidas pendentes aparecem primeiro, seguidas das quitadas.",position:"top"},{id:"pagar",target:'[data-tutorial="pagar-divida"]',title:"Pagar D\xedvida",description:'Clique em "Pagar D\xedvida" para registrar um pagamento. Voc\xea pode pagar parcialmente ou quitar completamente.',position:"left"},{id:"acoes",target:'[data-tutorial="acoes-divida"]',title:"Editar ou Excluir",description:"Use os \xedcones para editar informa\xe7\xf5es da d\xedvida ou exclu\xed-la se necess\xe1rio. Cuidado ao excluir!",position:"left"}],tutorialId:"dividas"}),d&&!i&&(0,r.jsx)("button",{onClick:()=>{m(),h(!0)},className:"fixed bottom-6 left-6 z-[60] p-3 bg-brand-aqua/20 hover:bg-brand-aqua/30 backdrop-blur-sm border-2 border-brand-aqua/50 rounded-full transition-smooth group shadow-xl hover:shadow-2xl",title:"Ver tutorial novamente","aria-label":"Ver tutorial novamente",style:{minWidth:"48px",minHeight:"48px",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto"},children:(0,r.jsx)(C.Z,{size:20,className:"text-brand-aqua group-hover:scale-110 transition-transform",strokeWidth:2.5})})]})}function L(e){let{dividas:a,onDividasChange:t}=e,d=(0,k.useRouter)(),[n,l]=(0,s.useState)(a),[N,q]=(0,s.useState)(null),[C,R]=(0,s.useState)(null),[E,F]=(0,s.useState)(!1),[M,L]=(0,s.useState)(null),[B,z]=(0,s.useState)(!1),[P,Z]=(0,s.useState)("");(0,s.useEffect)(()=>{l(a)},[a]),(0,s.useEffect)(()=>{(async function(){try{let e=await fetch("/api/dividas/processar-recorrencias",{method:"POST",headers:{"Content-Type":"application/json"}}),a=await e.json();a.success&&a.novasDividasCriadas>0&&d.refresh()}catch(e){console.error("Erro ao processar recorr\xeancias:",e)}})()},[d]);let W=e=>{try{if(e.observacao){var a;let t=e.observacao.split("\n"),r=null===(a=t[t.length-1])||void 0===a?void 0:a.trim();if(r&&r.startsWith("[")&&r.endsWith("]")){let e=JSON.parse(r);if(Array.isArray(e)&&e.length>0){let a=e.reduce((e,a)=>{let t="number"==typeof a.valor?a.valor:parseFloat(a.valor.toString());return e+(isNaN(t)?0:t)},0);if(a>0)return a}}}}catch(e){console.error("Erro ao calcular valor pago do hist\xf3rico:",e)}let t=e.valor;return(e.parcelas_totais>0?t/e.parcelas_totais:t)*e.parcelas_pagas},I=e=>{let a=e.valor,t=W(e);return a>0?t/a*100:0},U=e=>{let a=e.valor;return W(e)>=a-.01},A=e=>{if(!e)return"";let a=e.split("\n").filter(e=>{let a=e.trim();return!(a.startsWith("[")&&a.endsWith("]"))}).join("\n").trim();return a.length>80?a.substring(0,80)+"...":a},T=(0,s.useMemo)(()=>{if(!P.trim())return n;let e=P.toLowerCase().trim();return n.filter(a=>{var t,r,s,d,n;let i=(null===(t=a.nome)||void 0===t?void 0:t.toLowerCase())||"",l=(null===(r=A(a.observacao))||void 0===r?void 0:r.toLowerCase())||"",o=(null===(s=a.valor)||void 0===s?void 0:s.toString())||"",c=(null===(n=a.user)||void 0===n?void 0:null===(d=n.nome)||void 0===d?void 0:d.toLowerCase())||"";return i.includes(e)||l.includes(e)||o.includes(e)||c.includes(e)})},[n,P]),O=T.filter(e=>!U(e)),V=T.filter(e=>U(e)),H=0,Q=0;O.forEach(e=>{let a=parseFloat(e.valor.toString()),t=W(e);H+=a,Q+=Math.max(0,a-t)}),Q=Math.max(0,Math.min(Q,H=Math.max(0,H)));let G=async e=>{L(e),F(!0)},J=async()=>{if(M){F(!1);try{console.log("\uD83D\uDDD1️ [DividasLista] Excluindo d\xedvida:",M);let e=await (0,f.v2)(M);if(e.error){console.error("❌ [DividasLista] Erro ao excluir d\xedvida:",e.error),(0,w.createNotification)("Erro ao excluir d\xedvida: "+e.error,"warning"),L(null);return}console.log("✅ [DividasLista] D\xedvida exclu\xedda com sucesso no servidor");let a=n.filter(e=>e.id!==M);l(a),t&&t(a),(0,w.createNotification)("D\xedvida exclu\xedda com sucesso!","success"),L(null),setTimeout(async()=>{try{var e;console.log("\uD83D\uDD04 [DividasLista] Recarregando d\xedvidas do servidor...");let a=await (0,f.M0)();if(console.log("\uD83D\uDCCA [DividasLista] D\xedvidas recebidas:",(null==a?void 0:null===(e=a.data)||void 0===e?void 0:e.length)||0),null==a?void 0:a.data){let e=a.data.filter(e=>e.id!==M);console.log("✅ [DividasLista] D\xedvidas atualizadas:",e.length),l(e),t&&t(e)}}catch(e){console.error("❌ [DividasLista] Erro ao recarregar d\xedvidas:",e),window.location.reload()}},800)}catch(e){console.error("❌ [DividasLista] Erro ao excluir d\xedvida:",e),(0,w.createNotification)("Erro ao excluir d\xedvida. Tente novamente.","warning"),L(null)}}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,r.jsx)("div",{className:"flex-1 w-full sm:max-w-md",children:(0,r.jsxs)("div",{className:"relative","data-tutorial":"busca-dividas",children:[(0,r.jsx)(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-brand-midnight/50 dark:text-brand-clean/50",size:20}),(0,r.jsx)("input",{type:"text",value:P,onChange:e=>Z(e.target.value),placeholder:"Buscar d\xedvidas por nome, valor, usu\xe1rio...",className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-brand-royal border border-gray-200 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50 text-sm"})]})}),(0,r.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[T.length>0&&(0,r.jsxs)("button",{onClick:()=>{let e=T.map(e=>{var a,t;let r=parseFloat(e.valor.toString()),s=W(e),d=r>0?(s/r*100).toFixed(2):"0.00",n=U(e)?"Quitada":"Pendente";return{Nome:e.nome||"",Valor_Total:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r),Valor_Pago:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s),Valor_Pendente:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Math.max(0,r-s)),Percentual_Pago:"".concat(d,"%"),Parcelas:"".concat(e.parcelas_pagas||0,"/").concat(e.parcelas_totais||1),Status:n,Data_Registro:(0,g.WU)(new Date(e.data_registro),"dd/MM/yyyy",{locale:v.F}),Usuario:(null===(a=e.user)||void 0===a?void 0:a.nome)||"N\xe3o informado",Observacao:e.observacao||"",Categoria:e.categoria||"",Metodo_Pagamento:(null===(t=e.etiquetas)||void 0===t?void 0:t.find(e=>["pix","cartao","dinheiro"].includes(e)))||"N\xe3o informado"}}),a=[Object.keys(e[0]||{}).join(";"),...e.map(e=>Object.values(e).map(e=>{let a=String(e||"");return a.includes(";")||a.includes('"')||a.includes("\n")?'"'.concat(a.replace(/"/g,'""'),'"'):a}).join(";"))].join("\n"),t=new Blob(["\uFEFF"+a],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),s=URL.createObjectURL(t);r.setAttribute("href",s),r.setAttribute("download","dividas_".concat((0,g.WU)(new Date,"yyyy-MM-dd_HH-mm-ss",{locale:v.F}),".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},className:"w-full sm:w-auto px-5 py-2.5 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-semibold hover:from-green-600 hover:to-emerald-600 transition-smooth flex items-center justify-center gap-2 shadow-md hover:shadow-lg text-sm whitespace-nowrap",children:[(0,r.jsx)(o,{size:20,strokeWidth:2.5}),"Exportar D\xedvidas"]}),(0,r.jsxs)("button",{onClick:()=>z(!0),"data-tutorial":"registrar-divida",className:"w-full sm:w-auto px-5 py-2.5 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth flex items-center justify-center gap-2 shadow-md hover:shadow-lg text-sm whitespace-nowrap",children:[(0,r.jsx)(c.Z,{size:20,strokeWidth:2.5}),"Registrar D\xedvida"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6","data-tutorial":"estatisticas-dividas",children:[(0,r.jsxs)("div",{className:"bg-brand-white dark:bg-brand-royal rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-lg border border-brand-clean dark:border-white/10",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,r.jsx)(x.Z,{className:"text-blue-600 dark:text-blue-400",size:24})}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-brand-midnight/70 dark:text-brand-clean/70",children:["Total de D\xedvidas Pendentes (",O.length,")"]})]}),(0,r.jsx)("p",{className:"text-xl sm:text-2xl font-display text-brand-midnight dark:text-brand-clean",style:{fontWeight:900},children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(H)}),(0,r.jsxs)("p",{className:"text-xs text-brand-midnight/50 dark:text-brand-clean/50 mt-1",children:[V.length," d\xedvida",1!==V.length?"s":""," quitada",1!==V.length?"s":""]})]}),(0,r.jsxs)("div",{className:"bg-brand-white dark:bg-brand-royal rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-lg border border-brand-clean dark:border-white/10",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:(0,r.jsx)(m.Z,{className:"text-orange-600 dark:text-orange-400",size:24})}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-brand-midnight/70 dark:text-brand-clean/70",children:"Total Pendente"})]}),(0,r.jsx)("p",{className:"text-xl sm:text-2xl font-display text-orange-600 dark:text-orange-400",style:{fontWeight:900},children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Q)})]}),(0,r.jsxs)("div",{className:"bg-brand-white dark:bg-brand-royal rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-lg border border-brand-clean dark:border-white/10",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:(0,r.jsx)(b.Z,{className:"text-green-600 dark:text-green-400",size:24})}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-brand-midnight/70 dark:text-brand-clean/70",children:"Progresso Geral"})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("div",{className:"w-full bg-brand-clean dark:bg-brand-midnight rounded-full h-3",children:(0,r.jsx)("div",{className:"bg-brand-aqua h-3 rounded-full transition-all",style:{width:"".concat(n.length>0&&H>0?Math.min(100,Math.max(0,(H-Q)/H*100)):0,"%")}})}),(0,r.jsx)("p",{className:"text-sm text-brand-midnight/70 dark:text-brand-clean/70 mt-2",children:n.length>0&&H>0?"".concat(Math.round((H-Q)/H*100),"% quitado"):"0% quitado"})]})]})]}),O.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean mb-4",children:["D\xedvidas Pendentes (",O.length,")"]}),(0,r.jsxs)("div",{className:"bg-brand-white dark:bg-brand-royal rounded-2xl shadow-lg border border-brand-clean dark:border-white/10 overflow-hidden animate-fade-in",children:[(0,r.jsx)("div",{className:"md:hidden space-y-4 p-4","data-tutorial":"tabela-dividas",children:O.map(e=>{var a;return(0,r.jsxs)("div",{className:"bg-brand-royal dark:bg-brand-midnight rounded-xl p-4 border border-brand-clean/20 dark:border-white/10 relative",children:[(0,r.jsx)("button",{onClick:()=>G(e.id),className:"absolute top-3 right-3 p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-smooth z-10",title:"Excluir",children:(0,r.jsx)(h.Z,{size:18,strokeWidth:2})}),(0,r.jsxs)("div",{className:"space-y-3 pr-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-brand-midnight dark:text-brand-clean",children:e.nome}),e.is_recorrente&&e.ativo&&(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-xs font-medium",children:[(0,r.jsx)(u,{size:12}),"Recorrente"]})]}),A(e.observacao)&&(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mt-1",children:A(e.observacao)}),e.is_recorrente&&e.proxima_recorrencia&&(0,r.jsxs)("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:["Pr\xf3xima: ",(0,g.WU)(new Date(e.proxima_recorrencia),"dd/MM/yyyy",{locale:v.F})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-0.5",children:"Valor"}),(0,r.jsx)("p",{className:"font-semibold text-brand-midnight dark:text-brand-clean",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.valor)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-0.5",children:"Usu\xe1rio"}),(0,r.jsxs)("p",{className:"text-brand-midnight/80 dark:text-brand-clean/80",children:["\uD83D\uDC64 ",(null===(a=e.user)||void 0===a?void 0:a.nome)||"N/A"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-0.5",children:"Categoria"}),(0,r.jsx)("p",{className:"text-brand-midnight/80 dark:text-brand-clean/80",children:e.categoria||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-0.5",children:"Data"}),(0,r.jsx)("p",{className:"text-brand-midnight/80 dark:text-brand-clean/80",children:(0,g.WU)(new Date(e.data_registro),"dd/MM/yyyy",{locale:v.F})})]})]}),e.parcelas_totais>1&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-0.5",children:"Parcelas"}),(0,r.jsxs)("p",{className:"text-sm text-brand-midnight/80 dark:text-brand-clean/80",children:[e.parcelas_pagas,"/",e.parcelas_totais," - Faltam ",e.parcelas_totais-e.parcelas_pagas]})]}),e.etiquetas&&e.etiquetas.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-1.5",children:"Etiquetas"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.etiquetas.map((e,a)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-brand-aqua/10 dark:bg-brand-aqua/20 text-brand-aqua dark:text-brand-aqua text-xs rounded-lg",children:e},a))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-brand-clean/20 dark:border-white/10",children:[(0,r.jsx)("button",{onClick:()=>R(e),"data-tutorial":"pagar-divida",className:"flex-1 px-4 py-2 bg-brand-aqua dark:bg-brand-aqua text-white dark:text-brand-midnight rounded-lg hover:bg-brand-aqua/90 dark:hover:bg-brand-aqua/80 transition-smooth font-medium text-sm shadow-sm",children:"Pagar D\xedvida"}),(0,r.jsx)("div",{"data-tutorial":"acoes-divida",className:"flex items-center gap-2",children:(0,r.jsx)("button",{onClick:()=>q(e),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-smooth",title:"Editar",children:(0,r.jsx)(p.Z,{size:18,strokeWidth:2})})})]})]})]},e.id)})}),(0,r.jsx)("div",{className:"hidden md:block overflow-x-auto","data-tutorial":"tabela-dividas",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-brand-royal dark:bg-brand-midnight border-b border-brand-midnight dark:border-white/10",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean dark:text-brand-clean uppercase tracking-wider",children:"Nome"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean dark:text-brand-clean uppercase tracking-wider",children:"Valor"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean dark:text-brand-clean uppercase tracking-wider",children:"Usu\xe1rio"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean dark:text-brand-clean uppercase tracking-wider",children:"Categoria"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean dark:text-brand-clean uppercase tracking-wider",children:"Etiquetas"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean dark:text-brand-clean uppercase tracking-wider",children:"Parcelas"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean dark:text-brand-clean uppercase tracking-wider",children:"Data"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean dark:text-brand-clean uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{className:"bg-brand-white dark:bg-brand-royal divide-y divide-brand-clean dark:divide-white/10",children:O.map(e=>{var a;return(0,r.jsxs)("tr",{className:"hover:bg-brand-clean/50 dark:hover:bg-white/5 transition-smooth",children:[(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-brand-midnight dark:text-brand-clean",children:[e.nome,e.is_recorrente&&e.ativo&&(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-xs font-medium",title:"D\xedvida recorrente: ".concat(e.recorrencia_tipo||"recorrente"),children:[(0,r.jsx)(u,{size:12}),"Recorrente"]})]}),A(e.observacao)&&(0,r.jsx)("div",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mt-1 line-clamp-1",children:A(e.observacao)}),e.is_recorrente&&e.proxima_recorrencia&&(0,r.jsxs)("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:["Pr\xf3xima: ",(0,g.WU)(new Date(e.proxima_recorrencia),"dd/MM/yyyy",{locale:v.F})]})]})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm font-semibold text-brand-midnight dark:text-brand-clean",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.valor)})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsxs)("span",{className:"text-sm text-brand-midnight/80 dark:text-brand-clean/80",children:["\uD83D\uDC64 ",(null===(a=e.user)||void 0===a?void 0:a.nome)||"N/A"]})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm text-brand-midnight/80 dark:text-brand-clean/80",children:e.categoria||"-"})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.etiquetas&&e.etiquetas.length>0?e.etiquetas.map((e,a)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-brand-aqua/10 dark:bg-brand-aqua/20 text-brand-aqua dark:text-brand-aqua text-xs rounded-lg",children:e},a)):(0,r.jsx)("span",{className:"text-xs text-brand-midnight/40 dark:text-brand-clean/40",children:"-"})})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:e.parcelas_totais>1?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-sm text-brand-midnight/80 dark:text-brand-clean/80",children:[e.parcelas_pagas,"/",e.parcelas_totais]}),(0,r.jsxs)("div",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60",children:["Faltam ",e.parcelas_totais-e.parcelas_pagas]})]}):(0,r.jsx)("span",{className:"text-sm text-brand-midnight/40 dark:text-brand-clean/40",children:"-"})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"text-sm text-brand-midnight/80 dark:text-brand-clean/80",children:[(0,r.jsx)("div",{children:(0,g.WU)(new Date(e.data_registro),"dd/MM/yyyy",{locale:v.F})}),(0,r.jsx)("div",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60",children:(0,g.WU)(new Date(e.data_registro),"HH:mm",{locale:v.F})})]})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>R(e),"data-tutorial":"pagar-divida",className:"px-4 py-2 bg-brand-aqua dark:bg-brand-aqua text-white dark:text-brand-midnight rounded-lg hover:bg-brand-aqua/90 dark:hover:bg-brand-aqua/80 transition-smooth font-medium text-sm shadow-sm",children:"Pagar D\xedvida"}),(0,r.jsxs)("div",{"data-tutorial":"acoes-divida",className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>q(e),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-smooth",title:"Editar",children:(0,r.jsx)(p.Z,{size:18,strokeWidth:2})}),(0,r.jsx)("button",{onClick:()=>G(e.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-smooth",title:"Excluir",children:(0,r.jsx)(h.Z,{size:18,strokeWidth:2})})]})]})})]},e.id)})})]})})]})]}),V.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean mb-4",children:["D\xedvidas Quitadas (",V.length,")"]}),(0,r.jsxs)("div",{className:"bg-brand-white dark:bg-brand-royal rounded-2xl shadow-lg border border-brand-clean dark:border-white/10 overflow-hidden animate-fade-in opacity-75",children:[(0,r.jsx)("div",{className:"md:hidden space-y-4 p-4",children:V.map(e=>{var a;return(0,r.jsx)("div",{className:"bg-brand-royal dark:bg-brand-midnight rounded-xl p-4 border border-brand-clean/20 dark:border-white/10",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-brand-midnight dark:text-brand-clean",children:e.nome}),A(e.observacao)&&(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mt-1",children:A(e.observacao)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-0.5",children:"Valor"}),(0,r.jsx)("p",{className:"font-semibold text-brand-midnight dark:text-brand-clean",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.valor)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-0.5",children:"Usu\xe1rio"}),(0,r.jsxs)("p",{className:"text-brand-midnight/80 dark:text-brand-clean/80",children:["\uD83D\uDC64 ",(null===(a=e.user)||void 0===a?void 0:a.nome)||"N/A"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-0.5",children:"Categoria"}),(0,r.jsx)("p",{className:"text-brand-midnight/80 dark:text-brand-clean/80",children:e.categoria||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-0.5",children:"Data"}),(0,r.jsx)("p",{className:"text-brand-midnight/80 dark:text-brand-clean/80",children:(0,g.WU)(new Date(e.data_registro),"dd/MM/yyyy",{locale:v.F})})]})]}),e.etiquetas&&e.etiquetas.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mb-1.5",children:"Etiquetas"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.etiquetas.map((e,a)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-brand-aqua/10 dark:bg-brand-aqua/20 text-brand-aqua dark:text-brand-aqua text-xs rounded-lg",children:e},a))})]}),(0,r.jsx)("div",{className:"flex items-center gap-2 pt-2 border-t border-brand-clean/20 dark:border-white/10",children:(0,r.jsx)("button",{onClick:()=>q(e),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-smooth",title:"Editar",children:(0,r.jsx)(p.Z,{size:18,strokeWidth:2})})})]})},e.id)})}),(0,r.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-brand-royal dark:bg-brand-midnight border-b border-brand-midnight dark:border-white/10",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean uppercase tracking-wider",children:"Nome"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean uppercase tracking-wider",children:"Valor"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean uppercase tracking-wider",children:"Usu\xe1rio"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean uppercase tracking-wider",children:"Categoria"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean uppercase tracking-wider",children:"Etiquetas"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean uppercase tracking-wider",children:"Parcelas"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean uppercase tracking-wider",children:"Data"}),(0,r.jsx)("th",{className:"px-4 py-4 text-left text-xs font-display text-brand-clean uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{className:"bg-brand-white divide-y divide-brand-clean",children:V.map(e=>{var a;return(0,r.jsxs)("tr",{className:"hover:bg-brand-clean/50 transition-smooth",children:[(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-brand-midnight",children:e.nome}),A(e.observacao)&&(0,r.jsx)("div",{className:"text-xs text-brand-midnight/60 mt-1 line-clamp-1",children:A(e.observacao)})]})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm font-semibold text-brand-midnight",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.valor)})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsxs)("span",{className:"text-sm text-brand-midnight/80",children:["\uD83D\uDC64 ",(null===(a=e.user)||void 0===a?void 0:a.nome)||"N/A"]})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm text-brand-midnight/80",children:e.categoria||"-"})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.etiquetas&&e.etiquetas.length>0?e.etiquetas.map((e,a)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-brand-aqua/10 text-brand-aqua text-xs rounded-lg",children:e},a)):(0,r.jsx)("span",{className:"text-xs text-brand-midnight/40",children:"-"})})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-sm text-green-600 font-medium",children:[I(e).toFixed(1),"%"]}),(0,r.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"Quitado"})]})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"text-sm text-brand-midnight/80",children:[(0,r.jsx)("div",{children:(0,g.WU)(new Date(e.data_registro),"dd/MM/yyyy",{locale:v.F})}),(0,r.jsx)("div",{className:"text-xs text-brand-midnight/60",children:(0,g.WU)(new Date(e.data_registro),"HH:mm",{locale:v.F})})]})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>q(e),className:"p-2 text-brand-aqua hover:bg-brand-aqua/10 rounded-lg transition-smooth",title:"Editar",children:(0,r.jsx)(p.Z,{size:18,strokeWidth:2})}),(0,r.jsx)("button",{onClick:()=>G(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-smooth",title:"Excluir",children:(0,r.jsx)(h.Z,{size:18,strokeWidth:2})})]})})]},e.id)})})]})})]})]}),0===T.length&&(0,r.jsxs)("div",{className:"bg-brand-white dark:bg-brand-royal rounded-2xl p-12 text-center shadow-lg border border-brand-clean dark:border-white/10",children:[(0,r.jsx)("p",{className:"text-brand-midnight/60 dark:text-brand-clean/60 text-lg",children:P.trim()?"Nenhuma d\xedvida encontrada com o termo pesquisado":"Nenhuma d\xedvida encontrada"}),!P.trim()&&(0,r.jsxs)("button",{onClick:()=>z(!0),className:"mt-4 px-5 py-2.5 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth inline-flex items-center gap-2",children:[(0,r.jsx)(c.Z,{size:20,strokeWidth:2.5}),"Registrar Primeira D\xedvida"]})]}),N&&(0,r.jsx)(y.Z,{registro:N,onClose:()=>q(null)}),C&&(0,r.jsx)(D,{divida:C,onClose:()=>R(null)}),E&&(0,r.jsx)(j.Z,{titulo:"Excluir D\xedvida",mensagem:"Tem certeza que deseja excluir esta d\xedvida? Esta a\xe7\xe3o n\xe3o pode ser desfeita.",onConfirmar:J,onCancelar:()=>{F(!1),L(null)},textoConfirmar:"Excluir",tipo:"danger"}),B&&(0,r.jsx)(_.Z,{onClose:()=>{z(!1),d.refresh()}}),(0,r.jsx)(S,{dividasCount:n.length})]})}var B=t(29408),z=t(94513),P=t(15438),Z=t(86264);function W(){let[e,a]=(0,s.useState)([]),[t,i]=(0,s.useState)(!0),l=async()=>{try{i(!0);let e=await (0,f.M0)();a((null==e?void 0:e.data)||[])}catch(e){console.error("Erro ao carregar d\xedvidas:",e),a([])}finally{i(!1)}};return(0,s.useEffect)(()=>{l();let e=()=>{l()};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}},[]),(0,r.jsxs)("div",{className:"min-h-screen bg-brand-clean dark:bg-brand-midnight",children:[(0,r.jsx)(n.default,{}),(0,r.jsx)(d.default,{}),(0,r.jsx)("main",{className:"lg:ml-64 p-3 sm:p-4 lg:p-8 dark:bg-brand-midnight pt-6 lg:pt-4",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)("div",{className:"flex justify-center mb-2 lg:hidden",children:(0,r.jsx)("div",{className:"w-40 sm:w-52",children:(0,r.jsx)(P.default,{})})}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-4 sm:mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(n.MenuButton,{}),(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-display font-bold text-brand-midnight dark:text-brand-clean leading-none",children:"D\xedvidas"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,r.jsx)(w.default,{}),(0,r.jsx)(z.default,{})]})]}),t?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(Z.Z,{className:"animate-spin text-brand-aqua",size:32})}):(0,r.jsx)(B.default,{feature:"Gerenciamento de D\xedvidas",planoNecessario:"basico",children:(0,r.jsx)(L,{dividas:e,onDividasChange:e=>{a(e),setTimeout(()=>{l()},300)}})})]})})]})}}},function(e){e.O(0,[5250,4962,889,1749,3974,3468,982,9282,9867,1029,2971,4938,1744],function(){return e(e.s=72491)}),_N_E=e.O()}]);