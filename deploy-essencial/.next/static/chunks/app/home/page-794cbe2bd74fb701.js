(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1951],{41298:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},31541:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62898).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},40985:function(e,a,r){Promise.resolve().then(r.bind(r,27249)),Promise.resolve().then(r.bind(r,91922)),Promise.resolve().then(r.bind(r,5500)),Promise.resolve().then(r.bind(r,15438)),Promise.resolve().then(r.bind(r,9353)),Promise.resolve().then(r.bind(r,53468)),Promise.resolve().then(r.bind(r,48046)),Promise.resolve().then(r.bind(r,31441)),Promise.resolve().then(r.bind(r,94513))},27249:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return l}});var t=r(57437),n=r(2265),d=r(34599),s=r(99616),i=r(11981),o=r(1295);function l(){let[e,a]=(0,n.useState)(null),[r,l]=(0,n.useState)(!0),[c,b]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{(async()=>{try{let e=(0,d.createClient)(),{data:{user:r},error:t}=await e.auth.getUser();if(t||!r){a(!0),l(!1);return}b(r.email||"");let n=r.email_confirmed_at,s=r.created_at,i=!1;if(n&&s)try{let e=new Date(n),a=new Date(s);Math.abs((e.getTime()-a.getTime())/1e3)>=30?i=!0:(console.log("⚠️ AvisoEmailNaoConfirmado - Email foi confirmado pelo bypass (n\xe3o contar como confirmado)"),i=!1)}catch(e){console.error("Erro ao comparar datas:",e),i=!1}else n&&(i=!!n);a(i),l(!1)}catch(e){console.error("Erro ao verificar email:",e),a(!0),l(!1)}})()},[]),r||e)?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-xl p-4 mb-6 relative",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex-shrink-0",children:(0,t.jsx)(i.Z,{className:"text-orange-600 dark:text-orange-400",size:24})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-orange-900 dark:text-orange-100 mb-2",children:"Email n\xe3o confirmado"}),(0,t.jsx)("p",{className:"text-sm text-orange-800 dark:text-orange-200 mb-4",children:"Para usar todas as funcionalidades, voc\xea precisa confirmar seu email primeiro. Verifique sua caixa de entrada e insira o c\xf3digo de confirma\xe7\xe3o."}),(0,t.jsxs)("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 dark:bg-orange-500 text-white rounded-lg hover:bg-orange-700 dark:hover:bg-orange-600 transition-smooth font-medium",children:[(0,t.jsx)(o.Z,{size:18}),"Verificar email agora"]})]})]})}),m&&c&&(0,t.jsx)(s.Z,{email:c,obrigatorio:!1,onConfirmado:()=>{x(!1),a(!0),window.location.reload()},onClose:()=>{x(!1)}})]})}},91922:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return b}});var t=r(57437),n=r(2265),d=r(74056),s=r(72894),i=r(11981),o=r(13008),l=r(82549),c=r(24033);function b(){(0,c.useRouter)();let[e,a]=(0,n.useState)([]),[b,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(!0);(0,n.useEffect)(()=>{!async function(){try{let{createClient:e}=await Promise.resolve().then(r.bind(r,34599)),t=e(),{data:{user:n}}=await t.auth.getUser();if(!n)return;let d=await fetch("/api/admin/avisos?userId=".concat(n.id),{cache:"no-store"});if(!d.ok){console.error("Erro ao carregar avisos");return}let s=(await d.json()).avisos||[];a(s);let i=s.find(e=>e.mostrar_popup&&e.ativo);i&&m(i)}catch(e){console.error("Erro ao carregar avisos admin:",e)}finally{h(!1)}}()},[]);let g=async()=>{if(b){let{createClient:e}=await Promise.resolve().then(r.bind(r,34599)),a=e(),{data:{user:t}}=await a.auth.getUser();if(t)try{await fetch("/api/admin/marcar-visto",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({avisoId:b.id,userId:t.id})})}catch(e){console.error("Erro ao marcar aviso como visto:",e)}m(null)}},u={info:{icon:d.Z,color:"text-blue-400",bg:"bg-blue-900/20",border:"border-blue-800/50"},warning:{icon:s.Z,color:"text-orange-400",bg:"bg-orange-900/20",border:"border-orange-800/50"},error:{icon:i.Z,color:"text-red-400",bg:"bg-red-900/20",border:"border-red-800/50"},success:{icon:o.Z,color:"text-green-400",bg:"bg-green-900/20",border:"border-green-800/50"}};return x||0===e.length?null:(0,t.jsx)(t.Fragment,{children:b&&(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 glass-backdrop",children:(0,t.jsxs)("div",{className:"bg-brand-royal rounded-3xl p-6 shadow-2xl border ".concat(u[b.tipo].border," max-w-md w-full animate-slide-up"),children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-xl ".concat(u[b.tipo].bg),children:(()=>{let e=u[b.tipo].icon;return(0,t.jsx)(e,{size:24,className:u[b.tipo].color})})()}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-brand-clean mb-2",children:b.titulo}),(0,t.jsx)("p",{className:"text-sm text-brand-clean/70",children:b.mensagem})]}),(0,t.jsx)("button",{onClick:g,className:"p-2 hover:bg-white/10 rounded-lg transition-smooth",children:(0,t.jsx)(l.Z,{size:20,className:"text-brand-clean"})})]}),(0,t.jsx)("button",{onClick:g,className:"w-full px-4 py-2 bg-brand-aqua text-brand-midnight rounded-xl font-semibold hover:bg-brand-aqua/90 transition-smooth",children:"Entendi"})]})})})}},5500:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return d}});var t=r(57437),n=r(2265);function d(){let[e,a]=(0,n.useState)([]),[r,d]=(0,n.useState)(0),[s,i]=(0,n.useState)(5),[o,l]=(0,n.useState)(!0),[c,b]=(0,n.useState)(null),[m,x]=(0,n.useState)(null),h=(0,n.useRef)(null);(0,n.useEffect)(()=>{u()},[]),(0,n.useEffect)(()=>{var a;if(e.length<=1)return;let t=setInterval(()=>{g(a=>(a+1)%e.length)},1e3*((null===(a=e[r])||void 0===a?void 0:a.tempo_transicao)||s));return()=>clearInterval(t)},[e,r,s]);let g=e=>{d(e)},u=async()=>{try{let e=await fetch("/api/banners");if(e.ok){let r=(await e.json()).banners||[];a(r),r.length>0&&i(r[0].tempo_transicao||5)}}catch(e){console.error("Erro ao carregar banners:",e)}finally{l(!1)}};return o||0===e.length?null:(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("div",{ref:h,className:"rounded-2xl shadow-lg relative overflow-hidden w-full bg-brand-midnight/50",style:{aspectRatio:"16/9"},onTouchStart:e=>{x(null),b(e.targetTouches[0].clientX)},onTouchMove:e=>{x(e.targetTouches[0].clientX)},onTouchEnd:()=>{if(!c||!m||e.length<=1)return;let a=c-m;a>50&&g((r+1)%e.length),a<-50&&g((r-1+e.length)%e.length)},children:(0,t.jsx)("div",{className:"flex h-full transition-transform duration-500 ease-in-out",style:{transform:e.length>0?"translateX(-".concat(100/e.length*r,"%)"):"translateX(0%)",width:"".concat(100*Math.max(e.length,1),"%")},children:e.map((a,r)=>{let n=e.length>0?100/e.length:100;return(0,t.jsx)("div",{className:"h-full flex-shrink-0 relative",style:{width:"".concat(n,"%"),minWidth:"".concat(n,"%"),maxWidth:"".concat(n,"%")},children:(0,t.jsx)("img",{src:a.imagem_url,alt:"Banner ".concat(r+1),className:"w-full h-full",style:{objectFit:"contain",objectPosition:"center",display:"block",width:"100%",height:"100%"}})},a.id)})})})})}},48046:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return C}});var t=r(57437),n=r(2265),d=r(76637),s=r(41298);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r(62898).Z)("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);var o=r(71738),l=r(9883),c=r(89282),b=r(25727),m=r(82549),x=r(67972),h=r(21271),g=r(34822),u=r(24033),p=r(53468),f=r(500),v=r(93750),k=r(52553);function j(e){let{onClose:a}=e,r=(0,u.useRouter)(),[d,s]=(0,n.useState)(!1),[i,c]=(0,n.useState)([]),[j,y]=(0,n.useState)(!1),[N,w]=(0,n.useState)(null),[q,S]=(0,n.useState)("teste"),[C,_]=(0,n.useState)(!1);(0,n.useEffect)(()=>{!async function(){let e=await (0,k.cu)();S(e),"teste"===e&&_(!0)}()},[]);let[Z,E]=(0,n.useState)({nome:"Sal\xe1rio",valor:"",user_id:"",data_registro:new Date().toISOString().slice(0,16),metodo_pagamento:"dinheiro"});(0,n.useEffect)(()=>{P()},[]);let P=async()=>{let e=await (0,b.CG)();e.data&&c(e.data)},D=async e=>{if(e.preventDefault(),"teste"===q){(0,p.createNotification)("Registrar Sal\xe1rio est\xe1 dispon\xedvel apenas no Plano B\xe1sico ou Premium","warning"),_(!0);return}s(!0);let t=(0,v.d)(Z.valor);if(isNaN(t)){(0,p.createNotification)("Valor inv\xe1lido","warning"),s(!1);return}let n=new FormData;n.append("nome",Z.nome),n.append("observacao","Registro r\xe1pido de sal\xe1rio"),n.append("user_id",Z.user_id),n.append("tipo","entrada"),n.append("valor",t.toString()),n.append("categoria","Sal\xe1rio"),n.append("etiquetas",JSON.stringify(["sal\xe1rio","entrada",Z.metodo_pagamento])),n.append("parcelas_totais","1"),n.append("parcelas_pagas","0"),n.append("data_registro",new Date(Z.data_registro).toISOString());let d=await (0,b.criarRegistro)(n);d.error?(0,p.createNotification)("Erro ao registrar sal\xe1rio: "+d.error,"warning"):((0,p.createNotification)("Sal\xe1rio de ".concat(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)," registrado com sucesso!"),"success"),a(),r.refresh()),s(!1)};return(0,t.jsxs)("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center p-4 animate-fade-in",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-brand-royal rounded-2xl max-w-md w-full max-h-[85vh] flex flex-col shadow-2xl animate-slide-up overflow-hidden border border-gray-200 dark:border-white/10",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 border-b border-gray-200 dark:border-white/10 px-5 py-4 flex items-center justify-between bg-white dark:bg-brand-midnight",children:[(0,t.jsx)("h2",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean",children:"Registrar Sal\xe1rio"}),(0,t.jsx)("button",{onClick:a,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-smooth",children:(0,t.jsx)(m.Z,{size:20,className:"text-brand-midnight dark:text-brand-clean"})})]}),(0,t.jsxs)("form",{onSubmit:D,className:"flex flex-col flex-1 min-h-0 bg-white dark:bg-brand-royal overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-5 py-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Valor do Sal\xe1rio *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-brand-midnight/70 dark:text-brand-clean/70 font-medium text-xs",children:"R$"}),(0,t.jsx)("input",{type:"text",required:!0,value:Z.valor,onChange:e=>{let a=(0,v.v)(e.target.value);E({...Z,valor:a})},placeholder:"0,00",className:"w-full pl-10 pr-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Usu\xe1rio"}),(0,t.jsxs)("button",{type:"button",onClick:()=>y(!0),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg hover:bg-gray-50 dark:hover:bg-white/5 focus:outline-none focus:border-brand-aqua transition-smooth flex items-center justify-between text-left",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-7 h-7 rounded-full bg-brand-aqua/20 dark:bg-brand-aqua/30 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-brand-aqua font-bold text-xs",children:N.nome.charAt(0).toUpperCase()})}),(0,t.jsx)("span",{className:"text-brand-midnight dark:text-brand-clean text-sm",children:N.nome})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{size:18,className:"text-brand-midnight/50 dark:text-brand-clean/50"}),(0,t.jsx)("span",{className:"text-brand-midnight/50 dark:text-brand-clean/50 text-sm",children:"Selecione um usu\xe1rio"})]})}),(0,t.jsx)(l.Z,{size:18,className:"text-brand-aqua"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Data"}),(0,t.jsx)("input",{type:"datetime-local",value:Z.data_registro,onChange:e=>E({...Z,data_registro:e.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"M\xe9todo de Pagamento *"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>E({...Z,metodo_pagamento:"pix"}),className:"flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ".concat("pix"===Z.metodo_pagamento?"bg-brand-aqua/90 dark:bg-brand-aqua text-brand-midnight shadow-lg":"bg-gray-50 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean border border-gray-300 dark:border-white/10"),children:[(0,t.jsx)(h.Z,{size:18,strokeWidth:2}),(0,t.jsx)("span",{children:"PIX"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>E({...Z,metodo_pagamento:"cartao"}),className:"flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ".concat("cartao"===Z.metodo_pagamento?"bg-brand-aqua/90 dark:bg-brand-aqua text-brand-midnight shadow-lg":"bg-gray-50 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean border border-gray-300 dark:border-white/10"),children:[(0,t.jsx)(o.Z,{size:18,strokeWidth:2}),(0,t.jsx)("span",{children:"Cart\xe3o"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>E({...Z,metodo_pagamento:"dinheiro"}),className:"flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ".concat("dinheiro"===Z.metodo_pagamento?"bg-brand-aqua/90 dark:bg-brand-aqua text-brand-midnight shadow-lg":"bg-gray-50 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean border border-gray-300 dark:border-white/10"),children:[(0,t.jsx)(g.Z,{size:18,strokeWidth:2}),(0,t.jsx)("span",{children:"Dinheiro"})]})]})]})]}),(0,t.jsx)("div",{className:"flex-shrink-0 bg-white dark:bg-brand-midnight border-t border-gray-200 dark:border-white/10 px-5 py-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-white/10 border border-gray-200 dark:border-white/10 transition-smooth text-sm",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2.5 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:d?"Registrando...":"REGISTRAR"})]})})]})]}),(0,t.jsx)(f.Z,{isOpen:j,onClose:()=>y(!1),onSelect:e=>{w(e),E({...Z,user_id:e.id})},selectedUserId:Z.user_id})]})}var y=r(45367),N=r(31541),w=r(79979);function q(e){let{onClose:a}=e,r=(0,u.useRouter)(),[s,i]=(0,n.useState)(!1),[c,x]=(0,n.useState)(!1),[f,j]=(0,n.useState)(null),[q,S]=(0,n.useState)("teste"),[C,_]=(0,n.useState)(!1);(0,n.useEffect)(()=>{!async function(){let e=await (0,k.cu)();S(e),"premium"!==e&&_(!0)}()},[]);let[Z,E]=(0,n.useState)([{valor:"",data:""}]),[P,D]=(0,n.useState)({nome_pessoa:"",valor:"",observacao:"",cpf:"",celular:"",data_emprestimo:new Date().toISOString().slice(0,16),metodo_pagamento:"dinheiro"}),z=e=>{let a=e.replace(/\D/g,"");return a.length<=11?a.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):e},R=e=>{let a=e.replace(/\D/g,"");return a.length<=11?a.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):e},F=async e=>{x(!0);try{let a=new FormData;a.append("file",e),a.append("folder","emprestimos");let r=await fetch("/api/upload",{method:"POST",body:a});if(r.ok){let e=await r.json();j(e.url),(0,p.createNotification)("Arquivo enviado com sucesso!","success")}else(0,p.createNotification)("Erro ao enviar arquivo","warning")}catch(e){(0,p.createNotification)("Erro ao enviar arquivo","warning")}finally{x(!1)}},I=e=>{Z.length>1&&E(Z.filter((a,r)=>r!==e))},O=(e,a,r)=>{let t=[...Z];t[e][a]=r,E(t)},M=()=>Z.reduce((e,a)=>e+(0,v.d)(a.valor),0),T=async e=>{if(e.preventDefault(),"premium"!==q){(0,p.createNotification)("Criar Empr\xe9stimos est\xe1 dispon\xedvel apenas no Plano Premium","warning"),_(!0);return}i(!0);let t=Z.filter(e=>e.valor&&e.data);if(0===t.length){(0,p.createNotification)("Adicione pelo menos uma parcela com valor e data","warning"),i(!1);return}let n=M();t[0].data;let d=t[t.length-1].data,s=new FormData;s.append("nome_pessoa",P.nome_pessoa),s.append("valor",n.toString()),s.append("observacao",P.observacao),s.append("cpf",P.cpf.replace(/\D/g,"")),s.append("celular",P.celular.replace(/\D/g,"")),s.append("data_emprestimo",new Date(P.data_emprestimo).toISOString()),s.append("data_pagamento",new Date(d).toISOString()),s.append("parcelas_totais",t.length.toString()),s.append("parcelas",JSON.stringify(t.map(e=>({valor:(0,v.d)(e.valor),data:new Date(e.data).toISOString()})))),f&&s.append("arquivo_url",f);let o=await (0,b.It)(s);o.error?(0,p.createNotification)("Erro ao registrar empr\xe9stimo: "+o.error,"warning"):((0,p.createNotification)('Empr\xe9stimo para "'.concat(P.nome_pessoa,'" registrado com sucesso!'),"success"),a(),r.refresh()),i(!1)};return(0,t.jsxs)("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center p-4 animate-fade-in",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-brand-royal rounded-2xl max-w-xl w-full max-h-[85vh] flex flex-col shadow-2xl animate-slide-up overflow-hidden border border-gray-200 dark:border-white/10",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 border-b border-gray-200 dark:border-white/10 px-5 py-4 flex items-center justify-between bg-white dark:bg-brand-midnight",children:[(0,t.jsx)("h2",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean",children:"Registrar Empr\xe9stimo"}),(0,t.jsx)("button",{onClick:a,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-smooth",children:(0,t.jsx)(m.Z,{size:20,className:"text-brand-midnight dark:text-brand-clean"})})]}),(0,t.jsxs)("form",{onSubmit:T,className:"flex flex-col flex-1 min-h-0 bg-white dark:bg-brand-royal overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-5 py-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Nome da Pessoa *"}),(0,t.jsx)("input",{type:"text",required:!0,value:P.nome_pessoa,onChange:e=>D({...P,nome_pessoa:e.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50",placeholder:"Nome completo"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"CPF"}),(0,t.jsx)("input",{type:"text",value:P.cpf,onChange:e=>{let a=z(e.target.value);a.replace(/\D/g,"").length<=11&&D({...P,cpf:a})},className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50",placeholder:"000.000.000-00",maxLength:14})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Celular"}),(0,t.jsx)("input",{type:"text",value:P.celular,onChange:e=>{let a=R(e.target.value);a.replace(/\D/g,"").length<=11&&D({...P,celular:a})},className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50",placeholder:"(00) 00000-0000",maxLength:15})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Observa\xe7\xe3o"}),(0,t.jsx)("textarea",{value:P.observacao,onChange:e=>D({...P,observacao:e.target.value}),rows:2,className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50 resize-none",placeholder:"Observa\xe7\xf5es sobre o empr\xe9stimo..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Data do Empr\xe9stimo *"}),(0,t.jsx)("input",{type:"datetime-local",required:!0,value:P.data_emprestimo,onChange:e=>D({...P,data_emprestimo:e.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"M\xe9todo de Pagamento *"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>D({...P,metodo_pagamento:"pix"}),className:"flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ".concat("pix"===P.metodo_pagamento?"bg-brand-aqua/90 dark:bg-brand-aqua text-brand-midnight shadow-lg":"bg-gray-50 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean border border-gray-300 dark:border-white/10"),children:[(0,t.jsx)(h.Z,{size:18,strokeWidth:2}),(0,t.jsx)("span",{children:"PIX"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>D({...P,metodo_pagamento:"cartao"}),className:"flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ".concat("cartao"===P.metodo_pagamento?"bg-brand-aqua/90 dark:bg-brand-aqua text-brand-midnight shadow-lg":"bg-gray-50 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean border border-gray-300 dark:border-white/10"),children:[(0,t.jsx)(o.Z,{size:18,strokeWidth:2}),(0,t.jsx)("span",{children:"Cart\xe3o"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>D({...P,metodo_pagamento:"dinheiro"}),className:"flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ".concat("dinheiro"===P.metodo_pagamento?"bg-brand-aqua/90 dark:bg-brand-aqua text-brand-midnight shadow-lg":"bg-gray-50 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean border border-gray-300 dark:border-white/10"),children:[(0,t.jsx)(g.Z,{size:18,strokeWidth:2}),(0,t.jsx)("span",{children:"Dinheiro"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Parcelas *"}),(0,t.jsx)("div",{className:"space-y-2",children:Z.map((e,a)=>(0,t.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-brand-midnight/70 dark:text-brand-clean/70 font-medium text-xs",children:"R$"}),(0,t.jsx)("input",{type:"text",required:!0,value:e.valor,onChange:e=>{O(a,"valor",(0,v.v)(e.target.value))},placeholder:"0,00",className:"w-full pl-8 pr-2 py-1.5 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-xs placeholder-gray-400 dark:placeholder-brand-clean/50"})]})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("input",{type:"datetime-local",required:!0,value:e.data,onChange:e=>O(a,"data",e.target.value),className:"w-full px-2 py-1.5 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-xs"})}),Z.length>1&&(0,t.jsx)("button",{type:"button",onClick:()=>I(a),className:"p-1.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-smooth",children:(0,t.jsx)(y.Z,{size:16})})]},a))}),(0,t.jsx)("div",{className:"flex justify-center mt-3",children:(0,t.jsxs)("button",{type:"button",onClick:()=>{E([...Z,{valor:"",data:""}])},className:"flex items-center gap-2 px-4 py-2 bg-brand-aqua/90 dark:bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua shadow-lg hover:shadow-xl transition-smooth text-xs",children:[(0,t.jsx)(l.Z,{size:16}),"Adicionar Parcela"]})}),Z.some(e=>e.valor&&e.data)&&(0,t.jsxs)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 mt-2 text-center",children:["Valor total: ",(0,t.jsx)("span",{className:"font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(M())})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Documento/Imagem (Opcional)"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 dark:border-white/10 rounded-lg cursor-pointer hover:border-brand-aqua transition-smooth bg-gray-50 dark:bg-brand-midnight/50 hover:bg-gray-100 dark:hover:bg-brand-midnight/70",children:[(0,t.jsx)("div",{className:"flex flex-col items-center gap-1.5",children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-brand-aqua"}),(0,t.jsx)("span",{className:"text-xs text-brand-midnight/70 dark:text-brand-clean/70",children:"Enviando..."})]}):f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{size:24,className:"text-green-600 dark:text-green-400"}),(0,t.jsx)("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"Arquivo enviado!"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z,{size:24,className:"text-brand-midnight/50 dark:text-brand-clean/50"}),(0,t.jsx)("span",{className:"text-xs text-brand-midnight/70 dark:text-brand-clean/70",children:"Clique para fazer upload"}),(0,t.jsx)("span",{className:"text-[10px] text-brand-midnight/50 dark:text-brand-clean/50",children:"PNG, JPG, PDF at\xe9 10MB"})]})}),(0,t.jsx)("input",{type:"file",className:"hidden",accept:"image/*,.pdf",onChange:e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(r){if(r.size>10485760){(0,p.createNotification)("Arquivo muito grande. M\xe1ximo 10MB","warning");return}F(r)}},disabled:c})]}),f&&(0,t.jsxs)("button",{type:"button",onClick:()=>j(null),className:"text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 flex items-center gap-1",children:[(0,t.jsx)(m.Z,{size:14}),"Remover arquivo"]})]})]})]}),(0,t.jsx)("div",{className:"flex-shrink-0 bg-white dark:bg-brand-midnight border-t border-gray-200 dark:border-white/10 px-5 py-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-white/10 border border-gray-200 dark:border-white/10 transition-smooth text-sm",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:s,className:"flex-1 px-4 py-2.5 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:s?"Registrando...":"REGISTRAR EMPR\xc9STIMO"})]})})]})]}),C&&(0,t.jsx)(w.Z,{isOpen:C,onClose:()=>{_(!1),a()},feature:"Criar Empr\xe9stimos",planoNecessario:"premium",planoAtual:q})]})}var S=r(45120);function C(e){let{title:a,description:b,buttonText:m,iconName:x,type:h}=e,[g,u]=(0,n.useState)(!1),[p,f]=(0,n.useState)(!1),[v,y]=(0,n.useState)("teste"),[N,C]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async function(){y(await (0,k.cu)())})()},[]),(0,n.useEffect)(()=>{(async function(){try{let{createClient:e}=await Promise.resolve().then(r.bind(r,34599)),a=e(),{data:{user:t}}=await a.auth.getUser();if(!t){C(!1);return}let n=null==t?void 0:t.email_confirmed_at,d=null==t?void 0:t.created_at,s=!1;if(n){if(n&&d)try{let e=new Date(n),a=new Date(d);s=Math.abs((e.getTime()-a.getTime())/1e3)>=30}catch(e){console.error("Erro ao comparar datas:",e),s=!1}}else s=!1;console.log("\uD83D\uDD0D QuickActionCard - Status de email:",{email:t.email,emailConfirmedAt:n,isConfirmed:s}),C(s)}catch(e){console.error("Erro ao verificar email:",e),C(!1)}})()},[]);let _={FileText:d.Z,DollarSign:s.Z,Hand:i,CreditCard:o.Z}[x],Z=!1===N;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-brand-white dark:bg-brand-royal rounded-2xl p-6 shadow-lg border border-brand-clean dark:border-white/10 hover:shadow-xl transition-smooth animate-slide-up ".concat(Z?"opacity-50 cursor-not-allowed":""),children:[Z&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:(0,t.jsx)("p",{className:"text-xs text-orange-800 dark:text-orange-200",children:"⚠️ Confirme seu email em Configura\xe7\xf5es → Perfil para usar esta funcionalidade."})}),(0,t.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,t.jsx)("div",{className:"p-3 bg-brand-aqua/10 dark:bg-brand-aqua/20 rounded-xl",children:(0,t.jsx)(_,{size:28,className:"".concat(Z?"opacity-50":""," text-brand-aqua dark:text-brand-aqua"),strokeWidth:2})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-xl font-display font-bold mb-2 ".concat(Z?"text-brand-midnight/50 dark:text-brand-clean/50":"text-brand-midnight dark:text-brand-clean"),children:a}),(0,t.jsx)("p",{className:"text-sm leading-relaxed ".concat(Z?"text-brand-midnight/40 dark:text-brand-clean/40":"text-brand-midnight/70 dark:text-brand-clean/70"),children:b})]})]}),(0,t.jsxs)("button",{onClick:()=>{if(!1===N){alert("Por favor, confirme seu email antes de usar esta funcionalidade. Acesse Configura\xe7\xf5es → Perfil para verificar seu email.");return}if(null!==N){if("divida"===h&&"teste"===v||"salario"===h&&"teste"===v||"emprestimo"===h&&"premium"!==v){f(!0);return}u(!0)}},disabled:Z,className:"w-full px-6 py-3 bg-brand-aqua dark:bg-brand-aqua text-brand-midnight dark:text-brand-midnight rounded-xl font-bold transition-smooth shadow-md flex items-center justify-center gap-2 ".concat(Z?"opacity-50 cursor-not-allowed":"hover:bg-brand-aqua/90 dark:hover:bg-brand-aqua/80 hover:shadow-lg"),children:[(0,t.jsx)(l.Z,{size:20,strokeWidth:2.5}),m]})]}),g&&"registro"===h&&(0,t.jsx)(c.Z,{registro:null,onClose:()=>u(!1)}),g&&"salario"===h&&(0,t.jsx)(j,{onClose:()=>u(!1)}),g&&"emprestimo"===h&&(0,t.jsx)(q,{onClose:()=>u(!1)}),g&&"divida"===h&&(0,t.jsx)(S.Z,{onClose:()=>u(!1)}),p&&(0,t.jsx)(w.Z,{isOpen:p,onClose:()=>f(!1),feature:a,planoNecessario:"emprestimo"===h?"premium":"divida"===h||"salario"===h?"basico":"teste",planoAtual:v})]})}},79979:function(e,a,r){"use strict";r.d(a,{Z:function(){return h}});var t=r(57437),n=r(2265),d=r(52369),s=r(49168),i=r(82549),o=r(62442),l=r(68291),c=r(24033),b=r(61396),m=r.n(b);let x={basico:{nome:"Plano B\xe1sico",preco:"R$ 29,90",periodo:"por m\xeas",features:["Registros ilimitados","Criar e gerenciar D\xedvidas","Registrar Sal\xe1rio","Calend\xe1rio Financeiro","Sistema de Metas (at\xe9 3)","At\xe9 10 usu\xe1rios/pessoas","Filtros avan\xe7ados","Exporta\xe7\xe3o de relat\xf3rios"],icon:d.Z},premium:{nome:"Plano Premium",preco:"R$ 49,90",periodo:"por m\xeas",features:["Tudo do plano B\xe1sico","Criar e gerenciar Empr\xe9stimos","Upload de documentos","Game din\xe2mico em Juntar Dinheiro","Metas ilimitadas","Usu\xe1rios/Pessoas ilimitados","Dashboard avan\xe7ado","Suporte 24/7"],icon:s.Z}};function h(e){let{isOpen:a,onClose:r,feature:d,planoNecessario:s,planoAtual:b}=e,h=(0,c.useRouter)(),[g,u]=(0,n.useState)(!1);if(!a)return null;let p=x[s],f=p.icon,v=async()=>{u(!0);try{h.push("/upgrade")}catch(e){console.error("Erro ao redirecionar:",e)}finally{u(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 z-[100] flex items-center justify-center p-4 animate-fade-in",onClick:r,children:(0,t.jsxs)("div",{className:"bg-white dark:bg-brand-royal rounded-2xl shadow-2xl border border-gray-200 dark:border-white/10 w-full max-w-md animate-scale-up",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-brand-aqua/10 to-brand-royal/10 dark:from-brand-midnight dark:to-brand-royal/50 px-5 py-4 rounded-t-2xl border-b border-gray-200 dark:border-white/10 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-brand-aqua/20 dark:bg-brand-aqua/30 rounded-xl flex items-center justify-center",children:(0,t.jsx)(f,{size:24,className:"text-brand-aqua"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-display font-bold text-brand-midnight dark:text-brand-clean",children:"Upgrade Necess\xe1rio"}),(0,t.jsxs)("p",{className:"text-xs text-gray-600 dark:text-brand-clean/70",children:[d," requer ",p.nome]})]})]}),(0,t.jsx)("button",{onClick:r,className:"p-1.5 hover:bg-white/20 dark:hover:bg-white/10 rounded-lg transition-smooth",children:(0,t.jsx)(i.Z,{size:18,className:"text-brand-midnight dark:text-brand-clean"})})]}),(0,t.jsxs)("div",{className:"px-5 py-4 space-y-4",children:[(0,t.jsx)("div",{className:"bg-brand-aqua/10 dark:bg-brand-aqua/20 rounded-lg p-3 border border-brand-aqua/20",children:(0,t.jsxs)("p",{className:"text-sm text-brand-midnight dark:text-brand-clean",children:[(0,t.jsx)("strong",{children:d})," est\xe1 dispon\xedvel apenas no"," ",(0,t.jsx)("strong",{children:p.nome}),"."]})}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-brand-aqua/5 to-brand-royal/5 dark:from-brand-midnight/50 dark:to-brand-royal/30 rounded-xl p-4 border-2 border-brand-aqua/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-brand-aqua/20 dark:bg-brand-aqua/30 rounded-xl flex items-center justify-center",children:(0,t.jsx)(f,{size:28,className:"text-brand-aqua"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xl font-display font-bold text-brand-midnight dark:text-brand-clean",children:p.nome}),(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)("span",{className:"text-2xl font-bold text-brand-aqua",children:p.preco}),(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-brand-clean/70",children:p.periodo})]})]})]}),(0,t.jsx)("ul",{className:"space-y-2 mt-4",children:p.features.slice(0,4).map((e,a)=>(0,t.jsxs)("li",{className:"flex items-center gap-2 text-sm text-brand-midnight dark:text-brand-clean",children:[(0,t.jsx)(o.Z,{size:16,className:"text-brand-aqua flex-shrink-0"}),(0,t.jsx)("span",{children:e})]},a))})]})]}),(0,t.jsxs)("div",{className:"px-5 py-4 border-t border-gray-200 dark:border-white/10 flex gap-3",children:[(0,t.jsx)("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-brand-midnight text-brand-midnight dark:text-brand-clean rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-white/10 transition-smooth text-sm",children:"Cancelar"}),(0,t.jsx)(m(),{href:"/upgrade",onClick:v,className:"flex-1 px-4 py-2.5 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed text-sm flex items-center justify-center gap-2",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-brand-midnight border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{children:"Redirecionando..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Fazer Upgrade"}),(0,t.jsx)(l.Z,{size:18,strokeWidth:2.5})]})})]})]})})}}},function(e){e.O(0,[5250,4962,889,1749,3974,3468,982,9282,9616,1029,2971,4938,1744],function(){return e(e.s=40985)}),_N_E=e.O()}]);