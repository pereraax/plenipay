(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5790],{62898:function(e,a,s){"use strict";s.d(a,{Z:function(){return i}});var t=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,a)=>{let s=(0,t.forwardRef)(({color:s="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:c="",children:o,...m},x)=>(0,t.createElement)("svg",{ref:x,...r,width:i,height:i,stroke:s,strokeWidth:d?24*Number(l)/Number(i):l,className:["lucide",`lucide-${n(e)}`,c].join(" "),...m},[...a.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(o)?o:[o]]));return s.displayName=`${e}`,s}},92457:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3021:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},13008:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},71738:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},38438:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},65883:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},32176:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},37189:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]])},41827:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},76020:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},49036:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},67972:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},25750:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},21203:function(e,a,s){Promise.resolve().then(s.bind(s,73997))},73997:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return x}});var t=s(57437),r=s(2265),n=s(32176),i=s(41827),l=s(67972),d=s(6141),c=s(13008),o=s(76020),m=s(66424);function x(){let[e,a]=(0,r.useState)([]),[s,x]=(0,r.useState)(null),[u,h]=(0,r.useState)([]),[b,f]=(0,r.useState)(""),[p,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[_,Z]=(0,r.useState)(!1),C=(0,r.useRef)(null),z=(0,r.useRef)(null);(0,r.useEffect)(()=>{S();let e=setInterval(S,5e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{if(s){E(s);let e=setInterval(()=>E(s),3e3);return()=>clearInterval(e)}},[s]),(0,r.useEffect)(()=>{O()},[u]);let S=async()=>{try{let e=await fetch("/api/chat/conversations");if(e.ok){let s=await e.json();a(s.conversations||[])}}catch(e){console.error("Erro ao carregar conversas:",e)}},E=async e=>{try{let a=await fetch("/api/chat/user-messages?user_id=".concat(e));if(a.ok){let e=await a.json();h(e.messages||[]),N(e.is_closed||!1)}}catch(e){console.error("Erro ao carregar mensagens:",e)}},q=async()=>{if(s){k(!0),Z(!1);try{let e=await fetch("/api/chat/close",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s})}),a=await e.json();if(e.ok){N(!0),k(!1),await S(),await E(s);try{await fetch("/api/chat/respond",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s,message:"Esta conversa foi finalizada pelo suporte. Se precisar de mais ajuda, abra um novo ticket. Obrigado! \uD83D\uDC4B"})})}catch(e){console.error("Erro ao enviar mensagem de encerramento:",e)}await E(s)}else{let e=(null==a?void 0:a.error)||"Erro desconhecido ao finalizar conversa";console.error("Erro ao finalizar conversa:",e),alert("Erro ao finalizar conversa: "+e),k(!1)}}catch(a){console.error("Erro ao finalizar conversa:",a);let e=(null==a?void 0:a.message)||(null==a?void 0:a.toString())||"Erro desconhecido";alert("Erro ao finalizar conversa: "+e),k(!1)}}},D=async()=>{if(b.trim()&&s){g(!0);try{if((await fetch("/api/chat/respond",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s,message:b.trim()})})).ok){var e;f(""),await E(s),await S(),null===(e=z.current)||void 0===e||e.focus()}}catch(e){console.error("Erro ao enviar mensagem:",e)}finally{g(!1)}}},O=()=>{var e;null===(e=C.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},L=e=>new Date(e).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),M=e=>{let a=new Date(e),s=new Date,t=new Date(s);return(t.setDate(t.getDate()-1),a.toDateString()===s.toDateString())?"Hoje":a.toDateString()===t.toDateString()?"Ontem":a.toLocaleDateString("pt-BR")},P=e.filter(e=>e.user_name.toLowerCase().includes(v.toLowerCase())||e.user_email.toLowerCase().includes(v.toLowerCase())),T=e.find(e=>e.user_id===s),F=e.length,R=e.reduce((e,a)=>e+a.unread_count,0),W=e.filter(e=>{let a=new Date(e.last_message_time);return(Date.now()-a.getTime())/36e5<24}).length;return(0,t.jsxs)(m.default,{children:[(0,t.jsxs)("div",{className:"w-full",style:{marginLeft:"-18rem",width:"calc(100% + 18rem)"},children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-display font-bold text-brand-clean mb-2",children:"Chat de Suporte"}),(0,t.jsx)("p",{className:"text-brand-clean/70",children:"Gerencie todas as conversas com os clientes"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6 w-full",children:[(0,t.jsxs)("div",{className:"bg-brand-royal rounded-2xl p-6 shadow-lg border border-white/10",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"p-3 rounded-xl bg-blue-900/20",children:(0,t.jsx)(n.Z,{size:24,className:"text-blue-400",strokeWidth:2})})}),(0,t.jsx)("p",{className:"text-sm text-brand-clean/70 mb-1 font-medium",children:"Total de Conversas"}),(0,t.jsx)("p",{className:"text-3xl font-display text-blue-400",children:F})]}),(0,t.jsxs)("div",{className:"bg-brand-royal rounded-2xl p-6 shadow-lg border border-white/10",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"p-3 rounded-xl bg-red-900/20",children:(0,t.jsx)(n.Z,{size:24,className:"text-red-400",strokeWidth:2})})}),(0,t.jsx)("p",{className:"text-sm text-brand-clean/70 mb-1 font-medium",children:"Mensagens N\xe3o Lidas"}),(0,t.jsx)("p",{className:"text-3xl font-display text-red-400",children:R})]}),(0,t.jsxs)("div",{className:"bg-brand-royal rounded-2xl p-6 shadow-lg border border-white/10",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"p-3 rounded-xl bg-green-900/20",children:(0,t.jsx)(n.Z,{size:24,className:"text-green-400",strokeWidth:2})})}),(0,t.jsx)("p",{className:"text-sm text-brand-clean/70 mb-1 font-medium",children:"Conversas Ativas (24h)"}),(0,t.jsx)("p",{className:"text-3xl font-display text-green-400",children:W})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6 w-full",style:{height:"calc(100vh - 250px)",maxHeight:"calc(100vh - 250px)"},children:[(0,t.jsxs)("div",{className:"bg-brand-royal rounded-2xl shadow-lg border border-white/10 flex flex-col overflow-hidden",style:{height:"calc(100vh - 250px)",maxHeight:"calc(100vh - 250px)"},children:[(0,t.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,t.jsx)("h2",{className:"text-xl font-display text-brand-clean mb-3",children:"Conversas"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-brand-clean/50",size:18}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar conversas...",value:v,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-brand-midnight/50 border border-white/10 rounded-xl focus:outline-none focus:border-brand-aqua transition-smooth text-brand-clean placeholder-brand-clean/40 text-sm"})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:0===P.length?(0,t.jsxs)("div",{className:"p-2 text-center text-brand-clean/50",children:[(0,t.jsx)(n.Z,{size:48,className:"mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:"Nenhuma conversa encontrada"})]}):(0,t.jsx)("div",{className:"divide-y divide-white/10",children:P.map(e=>(0,t.jsx)("button",{onClick:()=>x(e.user_id),className:"w-full p-4 text-left hover:bg-brand-midnight/50 transition-smooth ".concat(s===e.user_id?"bg-brand-aqua/20 border-l-4 border-brand-aqua":""),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-brand-aqua/20 rounded-full flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(l.Z,{size:20,className:"text-brand-aqua"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("p",{className:"font-semibold text-brand-clean text-sm truncate",children:e.user_name}),e.unread_count>0&&(0,t.jsx)("span",{className:"bg-red-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0",children:e.unread_count})]}),(0,t.jsx)("p",{className:"text-xs text-brand-clean/60 truncate mb-1",children:e.user_email}),(0,t.jsx)("p",{className:"text-xs text-brand-clean/50 truncate mb-2",children:e.last_message}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Z,{size:12,className:"text-brand-clean/40"}),(0,t.jsxs)("span",{className:"text-xs text-brand-clean/40",children:[M(e.last_message_time)," \xe0s ",L(e.last_message_time)]})]})]})]})},e.user_id))})})]}),(0,t.jsx)("div",{className:"bg-brand-royal rounded-2xl shadow-lg border border-white/10 flex flex-col overflow-hidden",style:{height:"calc(100vh - 250px)",maxHeight:"calc(100vh - 250px)"},children:s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"p-4 border-b border-white/10 bg-brand-midnight/50 flex-shrink-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-brand-aqua/20 rounded-full flex items-center justify-center",children:(0,t.jsx)(l.Z,{size:24,className:"text-brand-aqua"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-display text-brand-clean text-lg",children:(null==T?void 0:T.user_name)||"Usu\xe1rio"}),j&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-red-500/20 text-red-400 text-xs rounded-full border border-red-500/30",children:"Finalizada"})]}),(0,t.jsx)("p",{className:"text-sm text-brand-clean/60",children:null==T?void 0:T.user_email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("p",{className:"text-xs text-brand-clean/50",children:[(null==T?void 0:T.total_messages)||0," mensagens"]})}),!j&&(0,t.jsxs)("button",{onClick:()=>{s&&Z(!0)},disabled:w,className:"px-3 py-1.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-smooth flex items-center gap-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed border border-red-500/30",title:"Finalizar conversa",children:[(0,t.jsx)(c.Z,{size:16}),w?"Finalizando...":"Finalizar"]})]})]})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-brand-midnight/30 scrollbar-hide min-h-0",children:[u.map(e=>(0,t.jsx)("div",{className:"flex ".concat("support"===e.sender_type?"justify-end":"justify-start"),children:(0,t.jsxs)("div",{className:"max-w-[75%] rounded-2xl px-4 py-3 ".concat("support"===e.sender_type?"bg-brand-aqua text-brand-midnight rounded-br-sm shadow-lg":"bg-brand-royal text-brand-clean rounded-bl-sm border border-white/10 shadow-md"),children:[(0,t.jsx)("p",{className:"text-sm leading-relaxed",children:e.message}),(0,t.jsx)("p",{className:"text-xs mt-2 ".concat("support"===e.sender_type?"text-brand-midnight/60":"text-brand-clean/50"),children:L(e.created_at)})]})},e.id)),(0,t.jsx)("div",{ref:C})]}),(0,t.jsx)("div",{className:"p-4 border-t border-white/10 bg-brand-midnight/50 flex-shrink-0",children:j?(0,t.jsx)("div",{className:"text-center py-4",children:(0,t.jsx)("p",{className:"text-sm text-brand-clean/60",children:"Esta conversa foi finalizada. O usu\xe1rio n\xe3o pode mais enviar mensagens."})}):(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{ref:z,type:"text",value:b,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},placeholder:"Digite sua resposta...",className:"flex-1 px-4 py-3 bg-brand-royal border border-white/10 rounded-xl focus:outline-none focus:border-brand-aqua transition-smooth text-brand-clean placeholder-brand-clean/40",disabled:p}),(0,t.jsx)("button",{onClick:D,disabled:!b.trim()||p,className:"p-3 bg-brand-aqua text-brand-midnight rounded-xl hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:(0,t.jsx)(o.Z,{size:20,strokeWidth:2.5})})]})})]}):(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center min-h-0",style:{height:"100%"},children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-brand-aqua/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(n.Z,{size:40,className:"text-brand-aqua"})}),(0,t.jsx)("h3",{className:"text-xl font-display text-brand-clean mb-2",children:"Selecione uma conversa"}),(0,t.jsx)("p",{className:"text-brand-clean/60",children:"Escolha uma conversa da lista para come\xe7ar a responder"})]})})})]})]}),_&&(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:()=>!w&&Z(!1),children:(0,t.jsxs)("div",{className:"bg-brand-royal rounded-2xl shadow-2xl border-2 border-white/10 max-w-md w-full p-6 animate-scale-up",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(c.Z,{size:24,className:"text-red-400"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-xl font-display text-brand-clean mb-2",children:"Finalizar Conversa"}),(0,t.jsx)("p",{className:"text-brand-clean/70 text-sm leading-relaxed",children:"Tem certeza que deseja finalizar esta conversa? O usu\xe1rio n\xe3o poder\xe1 mais enviar mensagens ap\xf3s a finaliza\xe7\xe3o."})]})]}),(0,t.jsxs)("div",{className:"bg-brand-midnight/50 rounded-xl p-4 mb-6 border border-white/10",children:[(0,t.jsx)("p",{className:"text-xs text-brand-clean/60 mb-2 font-medium",children:"Usu\xe1rio:"}),(0,t.jsx)("p",{className:"text-sm text-brand-clean font-semibold",children:(null==T?void 0:T.user_name)||"Usu\xe1rio"}),(0,t.jsx)("p",{className:"text-xs text-brand-clean/50 mt-1",children:null==T?void 0:T.user_email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>Z(!1),disabled:w,className:"flex-1 px-4 py-3 bg-brand-midnight/50 hover:bg-brand-midnight/70 text-brand-clean rounded-xl font-semibold transition-smooth disabled:opacity-50 disabled:cursor-not-allowed border border-white/10",children:"Cancelar"}),(0,t.jsx)("button",{onClick:q,disabled:w,className:"flex-1 px-4 py-3 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-xl font-semibold transition-smooth disabled:opacity-50 disabled:cursor-not-allowed border border-red-500/30 flex items-center justify-center gap-2",children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-red-400 border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{children:"Finalizando..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{size:18}),(0,t.jsx)("span",{children:"Finalizar Conversa"})]})})]})]})})]})}},66424:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return g}});var t=s(57437),r=s(24033),n=s(92457),i=s(25750),l=s(71738),d=s(3021),c=s(38438),o=s(32176),m=s(37189),x=s(49036),u=s(65883);let h=[{href:"/administracaosecr/dashboard",label:"Dashboard",icon:n.Z},{href:"/administracaosecr/usuarios",label:"Todos os Usu\xe1rios",icon:i.Z},{href:"/administracaosecr/assinantes",label:"Usu\xe1rios Assinantes",icon:l.Z},{href:"/administracaosecr/avisos",label:"Central de Avisos",icon:d.Z},{href:"/administracaosecr/banners",label:"Banners",icon:c.Z},{href:"/administracaosecr/chat",label:"Chat de Suporte",icon:o.Z},{href:"/administracaosecr/tutoriais",label:"Tutoriais",icon:m.Z}];function b(){let e=(0,r.usePathname)(),a=(0,r.useRouter)();return(0,t.jsx)("aside",{className:"fixed left-0 top-0 h-screen w-64 bg-brand-royal border-r border-white/10 shadow-lg z-50 hidden lg:block",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"p-2 bg-brand-aqua/20 rounded-xl",children:(0,t.jsx)(x.Z,{size:24,className:"text-brand-aqua"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-display font-bold text-brand-clean",children:"Admin Panel"}),(0,t.jsx)("p",{className:"text-xs text-brand-clean/60",children:"PLENIPAY"})]})]})}),(0,t.jsx)("nav",{className:"space-y-2 mb-8",children:h.map(s=>{let r=s.icon,n=e===s.href||"/administracaosecr/dashboard"!==s.href&&(null==e?void 0:e.startsWith(s.href));return(0,t.jsxs)("button",{onClick:()=>a.push(s.href),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-smooth text-left ".concat(n?"bg-brand-aqua text-brand-midnight shadow-lg":"text-brand-clean hover:bg-white/10 hover:text-brand-aqua"),children:[(0,t.jsx)(r,{size:20,strokeWidth:2}),(0,t.jsx)("span",{className:"font-medium",children:s.label})]},s.href)})}),(0,t.jsxs)("button",{onClick:()=>{document.cookie="admin_token=; path=/; max-age=0",a.push("/administracaosecr/login")},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-smooth text-left text-brand-clean hover:bg-red-900/20 hover:text-red-400",children:[(0,t.jsx)(u.Z,{size:20,strokeWidth:2}),(0,t.jsx)("span",{className:"font-medium",children:"Sair"})]})]})})}var f=s(2265);function p(e){let{children:a}=e,s=(0,r.useRouter)(),n=(0,r.usePathname)(),[i,l]=(0,f.useState)(!0),[d,c]=(0,f.useState)(!1);return((0,f.useEffect)(()=>{if("/administracaosecr/login"===n){c(!0),l(!1);return}(async()=>{try{if(!document.cookie.split(";").find(e=>e.trim().startsWith("admin_token="))||!(await fetch("/api/admin/verify",{method:"GET",credentials:"include"})).ok){s.replace("/administracaosecr/login");return}c(!0),l(!1)}catch(e){s.replace("/administracaosecr/login")}})()},[n,s]),"/administracaosecr/login"===n)?(0,t.jsx)(t.Fragment,{children:a}):i||!d?(0,t.jsx)("div",{className:"min-h-screen bg-brand-midnight flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-brand-clean",children:"Verificando autentica\xe7\xe3o..."})}):(0,t.jsx)(t.Fragment,{children:a})}function g(e){let{children:a}=e,s=(0,r.usePathname)();return"/administracaosecr/login"===s||"/administracaosecr"===s?(0,t.jsx)(t.Fragment,{children:a}):(0,t.jsx)(p,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-brand-midnight",children:[(0,t.jsx)(b,{}),(0,t.jsx)("main",{className:"lg:ml-64 p-4 lg:p-8",children:a})]})})}},30622:function(e,a,s){"use strict";var t=s(2265),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function c(e,a,s){var t,n={},c=null,o=null;for(t in void 0!==s&&(c=""+s),void 0!==a.key&&(c=""+a.key),void 0!==a.ref&&(o=a.ref),a)i.call(a,t)&&!d.hasOwnProperty(t)&&(n[t]=a[t]);if(e&&e.defaultProps)for(t in a=e.defaultProps)void 0===n[t]&&(n[t]=a[t]);return{$$typeof:r,type:e,key:c,ref:o,props:n,_owner:l.current}}a.Fragment=n,a.jsx=c,a.jsxs=c},57437:function(e,a,s){"use strict";e.exports=s(30622)},24033:function(e,a,s){e.exports=s(15313)}},function(e){e.O(0,[2971,4938,1744],function(){return e(e.s=21203)}),_N_E=e.O()}]);