"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9616],{13008:function(e,o,a){a.d(o,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1295:function(e,o,a){a.d(o,{Z:function(){return t}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},99616:function(e,o,a){a.d(o,{Z:function(){return m}});var t=a(57437),n=a(2265),r=a(13008),i=a(1295),s=a(82549),c=a(11981),d=a(53468),l=a(54175),u=a(34599);function m(e){let{email:o,onConfirmado:a,onClose:m,obrigatorio:g=!0}=e,[f,x]=(0,n.useState)(["","","","","","","",""]),[b,p]=(0,n.useState)(!1),[h,v]=(0,n.useState)(!1),[D,j]=(0,n.useState)(""),[y,N]=(0,n.useState)(0),[C,k]=(0,n.useState)(!1),[w,q]=(0,n.useState)(!1),E=(0,n.useRef)([]),T=(0,n.useRef)("");(0,n.useEffect)(()=>{var e;null===(e=E.current[0])||void 0===e||e.focus()},[]),(0,n.useEffect)(()=>{if(y>0){let e=setTimeout(()=>{N(y-1)},1e3);return()=>clearTimeout(e)}},[y]);let S=(e,o)=>{if(o&&!/^\d$/.test(o))return;let a=[...f];a[e]=o,x(a),j(""),console.log("\uD83D\uDCDD Digitando no campo ".concat(e+1,"/8. Valor: ").concat(o,". C\xf3digo atual: ").concat(a.join(""))),o&&e<7?setTimeout(()=>{let o=E.current[e+1];o?(o.focus(),console.log("➡️ Foco movido para campo ".concat(e+2,"/8"))):console.error("❌ N\xe3o foi poss\xedvel mover foco para campo ".concat(e+2,"/8"))},10):o&&7===e&&console.log("✅ Todos os 8 d\xedgitos foram preenchidos!");let t=a.join("");console.log("\uD83D\uDCCA Comprimento do c\xf3digo: ".concat(t.length," d\xedgitos")),8===t.length?(console.log("\uD83D\uDD04 C\xf3digo completo detectado: ".concat(t,". Iniciando verifica\xe7\xe3o...")),t===T.current||w||(T.current=t,setTimeout(()=>{$(t)},300))):6===t.length&&console.log("⚠️ C\xf3digo tem 6 d\xedgitos. Aguardando mais 2 d\xedgitos...")},V=(e,o)=>{var a,t,n;if("Backspace"===o.key&&f[e]){let o=[...f];o[e]="",x(o)}else"Backspace"===o.key&&!f[e]&&e>0?null===(a=E.current[e-1])||void 0===a||a.focus():"ArrowLeft"===o.key&&e>0?null===(t=E.current[e-1])||void 0===t||t.focus():"ArrowRight"===o.key&&e<7&&(null===(n=E.current[e+1])||void 0===n||n.focus())},Z=e=>{var o,a;e.preventDefault();let t=e.clipboardData.getData("text").trim();/^\d{6}$/.test(t)?(x([...t.split(""),"",""]),j(""),null===(o=E.current[5])||void 0===o||o.focus(),setTimeout(()=>$(t),100)):/^\d{8}$/.test(t)&&(x(t.split("")),j(""),null===(a=E.current[7])||void 0===a||a.focus(),setTimeout(()=>$(t),100))},$=async e=>{let t=e||f.join("").replace(/\s/g,"");if(t.length<6){j("Por favor, insira pelo menos 6 d\xedgitos do c\xf3digo");return}if(t.length>8)return $(t.substring(0,8));if(7===t.length){j("C\xf3digo incompleto. Digite todos os 8 d\xedgitos.");return}if(w&&T.current===t){console.log("⚠️ C\xf3digo j\xe1 foi verificado, ignorando...");return}p(!0),j(""),q(!0);try{var n,r,i,s,c,d,l,m,g;console.log("\uD83D\uDD0D Iniciando verifica\xe7\xe3o do c\xf3digo..."),console.log("\uD83D\uDCE7 Email:",o),console.log("\uD83D\uDD22 C\xf3digo inserido:",t,"(".concat(t.length," d\xedgitos)"));let e=(0,u.createClient)(),f=null,b=null;console.log("\uD83D\uDD04 Verificando c\xf3digo: ".concat(t," (").concat(t.length," d\xedgitos)")),console.log("\uD83D\uDCE7 Email: ".concat(o)),console.log("⏰ Timestamp: ".concat(new Date().toISOString()));let p=["email","signup"],h=null,v=!1;if(8===t.length){v=!0;for(let a=0;a<p.length;a++){let s=p[a];if(console.log("\uD83D\uDD04 Tentativa ".concat(a+1,": Verificando c\xf3digo COMPLETO (8 d\xedgitos: ").concat(t,") com type '").concat(s,"'")),!(h=await e.auth.verifyOtp({email:o,token:t,type:s})).error&&(null===(n=h.data)||void 0===n?void 0:n.user)){f=h.data,b=null,console.log("✅✅✅ SUCESSO com c\xf3digo COMPLETO (8 d\xedgitos) e type '".concat(s,"'!"));break}{let e=(null===(r=h.error)||void 0===r?void 0:r.code)||"";if(console.log("❌ Tentativa ".concat(a+1," (").concat(s,", 8 d\xedgitos) falhou:"),null===(i=h.error)||void 0===i?void 0:i.message),"otp_expired"===e){b=h.error,console.error("⚠️ C\xf3digo expirado - n\xe3o tentar mais");break}b||(b=h.error)}}}if(b&&(v||6===t.length)&&(null==b?void 0:b.code)!=="otp_expired"){let a=t.substring(0,6);console.log("\uD83D\uDD04 Tentando com primeiros 6 d\xedgitos: ".concat(a));for(let t=0;t<p.length;t++){let n=p[t];if(console.log("\uD83D\uDD04 Tentativa ".concat(t+1,": Verificando 6 d\xedgitos (").concat(a,") com type '").concat(n,"'")),!(h=await e.auth.verifyOtp({email:o,token:a,type:n})).error&&(null===(s=h.data)||void 0===s?void 0:s.user)){f=h.data,b=null,console.log("✅✅✅ SUCESSO com 6 d\xedgitos e type '".concat(n,"'!"));break}{let e=(null===(c=h.error)||void 0===c?void 0:c.code)||"";if(console.log("❌ Tentativa ".concat(t+1," (").concat(n,", 6 d\xedgitos) falhou:"),null===(d=h.error)||void 0===d?void 0:d.message),"otp_expired"===e){b=h.error;break}b||(b=h.error)}}}if(b&&!f&&(b=(null==h?void 0:h.error)||b),b){console.error("❌ Todas as tentativas falharam. Erro final:",b),console.error("\uD83D\uDCCB Detalhes do erro:",JSON.stringify(b,null,2));let e=(null==b?void 0:b.code)||"";"otp_expired"===e&&(q(!1),T.current="");let o="Erro ao verificar c\xf3digo. Tente novamente.",a=b.message||"";"otp_expired"===e||a.includes("expired")||a.includes("expir")?(o="C\xf3digo expirado. Solicite um novo c\xf3digo.",x(["","","","","","","",""])):"otp_invalid"===e||a.includes("invalid")||a.includes("incorrect")?o="❌ C\xf3digo inv\xe1lido. Verifique se digitou corretamente ou solicite um novo c\xf3digo.":a.includes("not found")||a.includes("does not exist")?o="\uD83D\uDD0D C\xf3digo n\xe3o encontrado. Solicite um novo c\xf3digo.":a&&(o=a),j(o),x(["","","","","","","",""]),null===(l=E.current[0])||void 0===l||l.focus()}else(null==f?void 0:f.user)?f.user.email_confirmed_at?(console.log("✅ Email confirmado com sucesso!"),console.log("\uD83D\uDC64 User ID:",f.user.id),k(!0),setTimeout(()=>{a()},2500)):(console.warn("⚠️ Email ainda n\xe3o confirmado ap\xf3s verifica\xe7\xe3o OTP"),j("Email ainda n\xe3o foi confirmado. Tente novamente."),x(["","","","","","","",""]),null===(m=E.current[0])||void 0===m||m.focus()):(console.error("❌ Verifica\xe7\xe3o retornou sem usu\xe1rio"),j("Erro ao confirmar email. Tente novamente."),x(["","","","","","","",""]),null===(g=E.current[0])||void 0===g||g.focus())}catch(e){console.error("❌ Erro inesperado:",e),j("Erro inesperado. Tente novamente.")}finally{p(!1)}},_=e=>{if(e<60)return"".concat(e," segundo").concat(1!==e?"s":"");let o=Math.floor(e/60),a=e%60;return 0===a?"".concat(o," minuto").concat(1!==o?"s":""):"".concat(o," minuto").concat(1!==o?"s":""," e ").concat(a," segundo").concat(1!==a?"s":"")},O=async()=>{if(!(y>0)){q(!1),T.current="",v(!0),j("");try{let a=await (0,l.DR)(o);if(a.error){let e=a.error.match(/(?:after|após|em|wait|aguarde|após)\s*(\d+)\s*(?:segundo|segundos|second|seconds|s)/i)||a.error.match(/(\d+)\s*(?:segundo|segundos|second|seconds)/i),o=60;e&&(o=parseInt(e[1])),N(o);let t=a.error;a.error.includes("rate limit")||a.error.includes("too many")?t="Muitas tentativas. Aguarde ".concat(_(o)," antes de tentar novamente."):(a.error.includes("after")||a.error.includes("seconds"))&&(t="Por seguran\xe7a, voc\xea s\xf3 pode solicitar um novo c\xf3digo ap\xf3s ".concat(_(o),".")),j(t)}else{var e;(0,d.createNotification)("C\xf3digo reenviado! Verifique seu email.","success"),x(["","","","","","","",""]),null===(e=E.current[0])||void 0===e||e.focus(),N(60)}}catch(e){j("Erro ao reenviar c\xf3digo. Tente novamente."),console.error("Erro ao reenviar c\xf3digo:",e),N(60)}finally{v(!1)}}};return C?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[9999] flex items-center justify-center p-4 animate-fade-in",children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-brand-royal to-brand-midnight rounded-xl max-w-xs w-full shadow-2xl animate-slide-up overflow-hidden border border-brand-aqua/40",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"px-4 py-3 border-b border-brand-aqua/20 bg-brand-midnight/30",children:(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)("div",{className:"w-9 h-9 bg-green-500/25 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(r.Z,{size:18,className:"text-green-400"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h2",{className:"text-base font-display text-brand-clean leading-tight",children:"Email Confirmado!"}),(0,t.jsx)("p",{className:"text-[11px] text-brand-clean/50 leading-tight mt-0.5",children:"Redirecionando..."})]})]})}),(0,t.jsx)("div",{className:"p-4 space-y-3.5 bg-brand-royal/50 text-center",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto",children:(0,t.jsx)(r.Z,{size:32,className:"text-green-400"})}),(0,t.jsx)("p",{className:"text-sm text-brand-clean font-semibold",children:"Seu email foi confirmado com sucesso!"}),(0,t.jsx)("p",{className:"text-xs text-brand-clean/70",children:"Voc\xea ser\xe1 redirecionado para a p\xe1gina inicial em instantes..."})]})})]})}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[9999] flex items-center justify-center p-4 animate-fade-in",onClick:e=>{g&&e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation())},children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-brand-royal to-brand-midnight rounded-xl max-w-xs w-full shadow-2xl animate-slide-up overflow-hidden border border-brand-aqua/40",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"px-4 py-3 border-b border-brand-aqua/20 bg-brand-midnight/30",children:(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)("div",{className:"w-9 h-9 bg-brand-aqua/25 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(i.Z,{size:18,className:"text-brand-aqua"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h2",{className:"text-base font-display font-bold text-brand-clean leading-tight",children:"Confirmar Email"}),(0,t.jsx)("p",{className:"text-[11px] text-brand-clean/50 leading-tight mt-0.5",children:g?"Confirme para continuar":"Verifique sua caixa"})]}),m&&!g&&(0,t.jsx)("button",{onClick:m,className:"p-1 hover:bg-brand-aqua/10 rounded transition-smooth flex-shrink-0",children:(0,t.jsx)(s.Z,{size:16,className:"text-brand-clean/50"})})]})}),(0,t.jsxs)("div",{className:"p-5 space-y-4 bg-brand-royal/50",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-xs text-brand-clean/70 font-medium text-center",children:"C\xf3digo enviado para:"}),(0,t.jsx)("p",{className:"text-brand-aqua font-semibold text-sm break-all text-center px-2",children:o}),g&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1.5 mt-2",children:[(0,t.jsx)(c.Z,{size:14,className:"text-orange-400"}),(0,t.jsx)("p",{className:"text-xs text-orange-400 font-medium",children:"Confirme para acessar todas as funcionalidades"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-xs text-brand-clean/70 font-medium text-center",children:"Digite o c\xf3digo de 8 d\xedgitos:"}),(0,t.jsx)("div",{className:"flex justify-center gap-2",children:f.slice(0,6).map((e,o)=>(0,t.jsx)("input",{ref:e=>{E.current[o]=e},type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>S(o,e.target.value),onKeyDown:e=>V(o,e),onPaste:0===o?Z:void 0,className:"w-10 h-12 text-center text-lg font-bold bg-brand-midnight/70 border-2 border-brand-aqua/40 rounded-lg focus:outline-none focus:border-brand-aqua focus:ring-2 focus:ring-brand-aqua/30 transition-smooth text-brand-clean",disabled:b},o))}),(0,t.jsx)("div",{className:"flex justify-center gap-2",children:f.slice(6,8).map((e,o)=>{let a=o+6;return(0,t.jsx)("input",{ref:e=>{E.current[a]=e},type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>S(a,e.target.value),onKeyDown:e=>V(a,e),className:"w-10 h-12 text-center text-lg font-bold bg-brand-midnight/70 border-2 border-brand-aqua/40 rounded-lg focus:outline-none focus:border-brand-aqua focus:ring-2 focus:ring-brand-aqua/30 transition-smooth text-brand-clean",disabled:b},a)})})]}),D&&(0,t.jsxs)("div",{className:"flex items-start gap-2 text-red-300 bg-red-900/30 rounded-lg px-3 py-2.5 border border-red-800/40",children:[(0,t.jsx)(c.Z,{size:16,className:"flex-shrink-0 mt-0.5"}),(0,t.jsx)("span",{className:"text-xs leading-relaxed",children:D})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("button",{onClick:()=>$(),disabled:b||f.join("").length<8,className:"w-full px-4 py-3 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 shadow-lg hover:shadow-xl transition-smooth disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm",children:b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-brand-midnight border-t-transparent rounded-full animate-spin"}),"Verificando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{size:18}),"Verificar C\xf3digo"]})}),!g&&m&&(0,t.jsx)("button",{onClick:m,className:"w-full px-4 py-2.5 bg-gray-100 dark:bg-white/10 text-gray-700 dark:text-brand-clean rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-white/20 transition-smooth text-sm",children:"Verificar Depois"})]}),(0,t.jsxs)("div",{className:"pt-2 border-t border-brand-aqua/20 space-y-2",children:[(0,t.jsx)("button",{onClick:O,disabled:h||y>0,className:"w-full text-xs text-brand-aqua hover:text-brand-aqua/80 font-medium transition-smooth disabled:opacity-50 disabled:cursor-not-allowed underline",children:h?"Reenviando...":y>0?"Aguarde ".concat(_(y)):"N\xe3o recebeu? Reenviar c\xf3digo"}),y>0&&(0,t.jsxs)("p",{className:"text-[10px] text-brand-clean/50 text-center",children:["Voc\xea pode solicitar um novo c\xf3digo em ",_(y)]})]}),(0,t.jsx)("div",{className:"bg-brand-aqua/10 rounded-lg px-3 py-2.5 border border-brand-aqua/20",children:(0,t.jsx)("p",{className:"text-xs text-brand-clean/60 text-center leading-relaxed",children:"\uD83D\uDCA1 Verifique tamb\xe9m a pasta de spam"})})]})]})})}},54175:function(e,o,a){a.d(o,{CJ:function(){return c},DR:function(){return s},r7:function(){return n},w7:function(){return i},y1:function(){return r}}),a(15355);var t=a(31162),n=(0,t.$)("af57716356d6711de19f4b294ef38dab29192658"),r=(0,t.$)("5fb0b12f705d3fe03212a5331f7a911301d2812e");(0,t.$)("c16d528f90e3db723b94995b14058d08a9e8cf84");var i=(0,t.$)("11f8fca4417732546fe912dbec8867545b1420e2");(0,t.$)("d2d951da07170bc91f02c3b5699d2504d05516ec"),(0,t.$)("f532c4a12438cd423ff5c6045bf57e0314f36d60"),(0,t.$)("a6b95364239244383532b3cd7632bc70ec94d971");var s=(0,t.$)("31619cab705d1fa7f986f3a2c91dc3f433eb1871"),c=(0,t.$)("97b3fc9fcfd85871864875d29a6f848768ae3f09")}}]);