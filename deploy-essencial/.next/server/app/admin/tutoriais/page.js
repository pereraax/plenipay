(()=>{var e={};e.id=4167,e.ids=[4167],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71135:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var t=r(50482),s=r(69108),i=r(62563),o=r.n(i),n=r(68300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(a,l);let d=["",{children:["admin",{children:["tutoriais",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,60632)),"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/admin/tutoriais/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,63203)),"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,20429)),"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,1429)),"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/not-found.tsx"]}],c=["/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/admin/tutoriais/page.tsx"],u="/admin/tutoriais/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/tutoriais/page",pathname:"/admin/tutoriais",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},31262:(e,a,r)=>{Promise.resolve().then(r.bind(r,95464))},95464:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>p});var t=r(95344),s=r(3729),i=r(24636),o=r(51838),n=r(84013),l=r(25545),d=r(53148),c=r(46327),u=r(38271),m=r(14513),x=r(3380),b=r(31498),h=r(36234),g=r(27100);function p(){let[e,a]=(0,s.useState)([]),[r,p]=(0,s.useState)(!0),[f,v]=(0,s.useState)(!1),[j,N]=(0,s.useState)(null),[y,_]=(0,s.useState)({titulo:"",descricao:"",video_url:"",video_arquivo_url:"",thumbnail_url:"",categoria:"geral",ordem:0,duracao_segundos:"",ativo:!0}),[w,q]=(0,s.useState)(!1),[E,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{S()},[]);let S=async()=>{try{let e=(0,h.createClient)(),{data:r,error:t}=await e.from("tutoriais").select("*").order("ordem",{ascending:!0}).order("criado_em",{ascending:!1});t?(console.error("Erro ao carregar tutoriais:",t),(0,g.createNotification)("Erro ao carregar tutoriais","warning")):a(r||[])}catch(e){console.error("Erro ao carregar tutoriais:",e),(0,g.createNotification)("Erro ao carregar tutoriais","warning")}finally{p(!1)}},T=()=>{N(null),_({titulo:"",descricao:"",video_url:"",video_arquivo_url:"",thumbnail_url:"",categoria:"geral",ordem:e.length,duracao_segundos:"",ativo:!0}),v(!0)},k=e=>{N(e),_({titulo:e.titulo,descricao:e.descricao||"",video_url:e.video_url||"",video_arquivo_url:e.video_arquivo_url||"",thumbnail_url:e.thumbnail_url||"",categoria:e.categoria||"geral",ordem:e.ordem,duracao_segundos:e.duracao_segundos?.toString()||"",ativo:e.ativo}),v(!0)},z=async()=>{if(!y.titulo.trim()){(0,g.createNotification)("T\xedtulo \xe9 obrigat\xf3rio","warning");return}try{let e=(0,h.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a){(0,g.createNotification)("N\xe3o autenticado","warning");return}let r={titulo:y.titulo.trim(),descricao:y.descricao.trim()||null,video_url:y.video_url.trim()||null,video_arquivo_url:y.video_arquivo_url.trim()||null,thumbnail_url:y.thumbnail_url.trim()||null,categoria:y.categoria||null,ordem:y.ordem,duracao_segundos:y.duracao_segundos?parseInt(y.duracao_segundos):null,ativo:y.ativo,criado_por:a.id};if(j){let{error:a}=await e.from("tutoriais").update(r).eq("id",j.id);if(a)throw a;(0,g.createNotification)("Tutorial atualizado com sucesso!","success")}else{let{error:a}=await e.from("tutoriais").insert([r]);if(a)throw a;(0,g.createNotification)("Tutorial criado com sucesso!","success")}v(!1),S()}catch(e){console.error("Erro ao salvar tutorial:",e),(0,g.createNotification)("Erro ao salvar tutorial: "+e.message,"warning")}},D=async e=>{if(confirm("Tem certeza que deseja excluir este tutorial?"))try{let a=(0,h.createClient)(),{error:r}=await a.from("tutoriais").delete().eq("id",e);if(r)throw r;(0,g.createNotification)("Tutorial exclu\xeddo com sucesso!","success"),S()}catch(e){console.error("Erro ao excluir tutorial:",e),(0,g.createNotification)("Erro ao excluir tutorial: "+e.message,"warning")}},P=async e=>{let a=e.target.files?.[0];if(a){q(!0);try{let e=(0,h.createClient)(),r=a.name.split(".").pop(),t=`${Date.now()}_${Math.random().toString(36).substring(7)}.${r}`,s=`tutoriais/videos/${t}`,{error:i}=await e.storage.from("emprestimos").upload(s,a);if(i)throw i;let{data:o}=e.storage.from("emprestimos").getPublicUrl(s);_({...y,video_arquivo_url:o.publicUrl}),(0,g.createNotification)("V\xeddeo enviado com sucesso!","success")}catch(e){console.error("Erro ao fazer upload do v\xeddeo:",e),(0,g.createNotification)("Erro ao fazer upload do v\xeddeo: "+e.message,"warning")}finally{q(!1)}}},A=async e=>{let a=e.target.files?.[0];if(a){C(!0);try{let e=(0,h.createClient)(),r=a.name.split(".").pop(),t=`${Date.now()}_${Math.random().toString(36).substring(7)}.${r}`,s=`tutoriais/thumbnails/${t}`,{error:i}=await e.storage.from("emprestimos").upload(s,a);if(i)throw i;let{data:o}=e.storage.from("emprestimos").getPublicUrl(s);_({...y,thumbnail_url:o.publicUrl}),(0,g.createNotification)("Thumbnail enviada com sucesso!","success")}catch(e){console.error("Erro ao fazer upload da thumbnail:",e),(0,g.createNotification)("Erro ao fazer upload da thumbnail: "+e.message,"warning")}finally{C(!1)}}},M=e=>e?`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`:"N/A";return t.jsx(i.default,{children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-display font-bold text-brand-clean mb-2",children:"Gerenciar Tutoriais"}),t.jsx("p",{className:"text-brand-clean/70",children:"Crie e gerencie os tutoriais da plataforma"})]}),(0,t.jsxs)("button",{onClick:T,className:"px-6 py-3 bg-brand-aqua text-brand-midnight rounded-xl font-semibold hover:bg-brand-aqua/90 transition-smooth flex items-center gap-2",children:[t.jsx(o.Z,{size:20}),"Novo Tutorial"]})]}),r?t.jsx("div",{className:"text-center py-12 text-brand-clean/60",children:"Carregando tutoriais..."}):0===e.length?(0,t.jsxs)("div",{className:"bg-brand-royal rounded-2xl p-12 text-center border border-white/10",children:[t.jsx(n.Z,{size:64,className:"mx-auto mb-4 text-brand-clean/30"}),t.jsx("p",{className:"text-brand-clean/60 text-lg mb-4",children:"Nenhum tutorial cadastrado"}),(0,t.jsxs)("button",{onClick:T,className:"px-6 py-3 bg-brand-aqua text-brand-midnight rounded-xl font-semibold hover:bg-brand-aqua/90 transition-smooth inline-flex items-center gap-2",children:[t.jsx(o.Z,{size:20}),"Criar Primeiro Tutorial"]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-brand-royal rounded-xl overflow-hidden border border-white/10 hover:border-brand-aqua/50 transition-smooth",children:[(0,t.jsxs)("div",{className:"relative aspect-video bg-gradient-to-br from-brand-aqua/20 to-brand-blue/20",children:[e.thumbnail_url?t.jsx("img",{src:e.thumbnail_url,alt:e.titulo,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx(n.Z,{size:48,className:"text-brand-aqua/50"})}),!e.ativo&&t.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"Inativo"})]}),(0,t.jsxs)("div",{className:"p-4",children:[t.jsx("h3",{className:"text-lg font-display text-brand-clean mb-2 line-clamp-2",children:e.titulo}),e.descricao&&t.jsx("p",{className:"text-sm text-brand-clean/70 mb-3 line-clamp-2",children:e.descricao}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-brand-clean/60 mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx(l.Z,{size:12}),M(e.duracao_segundos)]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx(d.Z,{size:12}),e.visualizacoes]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>k(e),className:"flex-1 px-3 py-2 bg-brand-aqua/20 text-brand-aqua rounded-lg hover:bg-brand-aqua/30 transition-smooth flex items-center justify-center gap-1 text-sm",children:[t.jsx(c.Z,{size:16}),"Editar"]}),t.jsx("button",{onClick:()=>D(e.id),className:"px-3 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-smooth",children:t.jsx(u.Z,{size:16})})]})]})]},e.id))}),f&&t.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-brand-royal rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-white/10",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-brand-royal border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-display text-brand-clean",children:j?"Editar Tutorial":"Novo Tutorial"}),t.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-smooth",children:t.jsx(m.Z,{size:20,className:"text-brand-clean"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-brand-clean mb-2",children:"T\xedtulo *"}),t.jsx("input",{type:"text",value:y.titulo,onChange:e=>_({...y,titulo:e.target.value}),className:"w-full px-4 py-2 bg-brand-midnight border border-white/10 rounded-lg text-brand-clean focus:outline-none focus:border-brand-aqua",placeholder:"Ex: Como criar uma d\xedvida"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-brand-clean mb-2",children:"Descri\xe7\xe3o"}),t.jsx("textarea",{value:y.descricao,onChange:e=>_({...y,descricao:e.target.value}),rows:3,className:"w-full px-4 py-2 bg-brand-midnight border border-white/10 rounded-lg text-brand-clean focus:outline-none focus:border-brand-aqua resize-none",placeholder:"Descri\xe7\xe3o do tutorial..."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-brand-clean mb-2",children:"Categoria"}),(0,t.jsxs)("select",{value:y.categoria,onChange:e=>_({...y,categoria:e.target.value}),className:"w-full px-4 py-2 bg-brand-midnight border border-white/10 rounded-lg text-brand-clean focus:outline-none focus:border-brand-aqua",children:[t.jsx("option",{value:"geral",children:"Geral"}),t.jsx("option",{value:"dividas",children:"D\xedvidas"}),t.jsx("option",{value:"metas",children:"Metas"}),t.jsx("option",{value:"calendario",children:"Calend\xe1rio"}),t.jsx("option",{value:"dashboard",children:"Dashboard"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-brand-clean mb-2",children:"Ordem"}),t.jsx("input",{type:"number",value:y.ordem,onChange:e=>_({...y,ordem:parseInt(e.target.value)||0}),className:"w-full px-4 py-2 bg-brand-midnight border border-white/10 rounded-lg text-brand-clean focus:outline-none focus:border-brand-aqua"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-brand-clean mb-2",children:"URL do V\xeddeo (YouTube, Vimeo, etc.)"}),t.jsx("input",{type:"url",value:y.video_url,onChange:e=>_({...y,video_url:e.target.value}),className:"w-full px-4 py-2 bg-brand-midnight border border-white/10 rounded-lg text-brand-clean focus:outline-none focus:border-brand-aqua",placeholder:"https://youtube.com/watch?v=..."})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-brand-clean mb-2",children:"Upload de V\xeddeo"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("label",{className:"flex-1 px-4 py-2 bg-brand-midnight border border-white/10 rounded-lg text-brand-clean cursor-pointer hover:bg-brand-midnight/80 transition-smooth flex items-center justify-center gap-2",children:[t.jsx(x.Z,{size:18}),w?"Enviando...":"Escolher Arquivo",t.jsx("input",{type:"file",accept:"video/*",onChange:P,className:"hidden",disabled:w})]}),y.video_arquivo_url&&t.jsx("span",{className:"text-xs text-brand-clean/60",children:"âœ“ V\xeddeo enviado"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-brand-clean mb-2",children:"Upload de Thumbnail"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("label",{className:"flex-1 px-4 py-2 bg-brand-midnight border border-white/10 rounded-lg text-brand-clean cursor-pointer hover:bg-brand-midnight/80 transition-smooth flex items-center justify-center gap-2",children:[t.jsx(x.Z,{size:18}),E?"Enviando...":"Escolher Imagem",t.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden",disabled:E})]}),y.thumbnail_url&&t.jsx("div",{className:"w-12 h-12 rounded overflow-hidden border border-white/10",children:t.jsx("img",{src:y.thumbnail_url,alt:"Thumbnail",className:"w-full h-full object-cover"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-brand-clean mb-2",children:"Dura\xe7\xe3o (segundos)"}),t.jsx("input",{type:"number",value:y.duracao_segundos,onChange:e=>_({...y,duracao_segundos:e.target.value}),className:"w-full px-4 py-2 bg-brand-midnight border border-white/10 rounded-lg text-brand-clean focus:outline-none focus:border-brand-aqua",placeholder:"Ex: 300 (5 minutos)"})]}),t.jsx("div",{className:"flex items-center pt-8",children:(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:y.ativo,onChange:e=>_({...y,ativo:e.target.checked}),className:"w-4 h-4 rounded border-white/20 bg-brand-midnight text-brand-aqua focus:ring-brand-aqua"}),t.jsx("span",{className:"text-sm text-brand-clean",children:"Tutorial ativo"})]})})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{onClick:()=>v(!1),className:"flex-1 px-4 py-2 bg-brand-midnight text-brand-clean rounded-lg hover:bg-brand-midnight/80 transition-smooth",children:"Cancelar"}),(0,t.jsxs)("button",{onClick:z,className:"flex-1 px-4 py-2 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth flex items-center justify-center gap-2",children:[t.jsx(b.Z,{size:18}),"Salvar"]})]})]})]})})]})})}},60632:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$typeof:()=>i,__esModule:()=>s,default:()=>o});let t=(0,r(86843).createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/admin/tutoriais/page.tsx`),{__esModule:s,$$typeof:i}=t,o=t.default}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[1638,4123,115,2999],()=>r(71135));module.exports=t})();