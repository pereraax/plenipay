"use strict";(()=>{var e={};e.id=7034,e.ids=[7034],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},56698:(e,s,t)=>{t.r(s),t.d(s,{headerHooks:()=>m,originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>I});var r={};t.r(r),t.d(r,{GET:()=>u});var a=t(95419),o=t(69108),n=t(99678),i=t(81664),c=t(78070);async function u(e){try{let s=await (0,i.eI)(),{data:{user:t}}=await s.auth.getUser();if(!t)return c.Z.json({error:"N\xe3o autenticado"},{status:401});let{searchParams:r}=new URL(e.url),a=r.get("user_id");if(!a)return c.Z.json({error:"user_id \xe9 obrigat\xf3rio"},{status:400});let{data:o,error:n}=await s.from("chat_messages").select("*").eq("user_id",a).order("created_at",{ascending:!0});if(n)return console.error("Erro ao buscar mensagens:",n),c.Z.json({error:"Erro ao buscar mensagens"},{status:500});await s.from("chat_messages").update({is_read:!0}).eq("user_id",a).eq("sender_type","user").eq("is_read",!1);let{data:u}=await s.from("chat_conversations").select("is_closed").eq("user_id",a).single(),p=u?.is_closed||!1;return c.Z.json({messages:o||[],is_closed:p})}catch(e){return console.error("Erro inesperado:",e),c.Z.json({error:"Erro inesperado ao buscar mensagens"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/chat/user-messages/route",pathname:"/api/chat/user-messages",filename:"route",bundlePath:"app/api/chat/user-messages/route"},resolvedPagePath:"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/api/chat/user-messages/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:h,headerHooks:m,staticGenerationBailout:I}=p,g="/api/chat/user-messages/route";function x(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}},81664:(e,s,t)=>{t.d(s,{eI:()=>n,i3:()=>i,vv:()=>c});var r=t(77497),a=t(94128),o=t(32455);let n=(0,t(40002).cache)(async()=>{let e=await (0,o.cookies)();return(0,r.createServerClient)("https://frhxqgcqmxpjpnghsvoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyaHhxZ2NxbXhwanBuZ2hzdm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTM3NTYsImV4cCI6MjA3OTIyOTc1Nn0.p1OxLRA5DKgvetuy-IbCfYClNSjrvK6fm43aZNX3T7I",{cookies:{getAll:()=>e.getAll(),setAll(s){try{s.forEach(({name:s,value:t,options:r})=>e.set(s,t,r))}catch{}}}})});function i(){let e=process.env.SUPABASE_SERVICE_ROLE_KEY;return e?(0,a.eI)("https://frhxqgcqmxpjpnghsvoe.supabase.co",e,{auth:{autoRefreshToken:!1,persistSession:!1}}):null}function c(){return(0,a.eI)("https://frhxqgcqmxpjpnghsvoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyaHhxZ2NxbXhwanBuZ2hzdm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTM3NTYsImV4cCI6MjA3OTIyOTc1Nn0.p1OxLRA5DKgvetuy-IbCfYClNSjrvK6fm43aZNX3T7I",{auth:{autoRefreshToken:!1,persistSession:!1}})}},50482:(e,s,t)=>{e.exports=t(20399)},40002:(e,s,t)=>{e.exports=t(50482).vendored["react-rsc"].React},95419:(e,s,t)=>{e.exports=t(30517)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[1638,2455,4128,7497,8070],()=>t(56698));module.exports=r})();