"use strict";(()=>{var e={};e.id=9587,e.ids=[9587],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},87293:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>h,originalPathname:()=>x,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>d,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>I});var s={};r.r(s),r.d(s,{POST:()=>u});var a=r(95419),o=r(69108),i=r(99678),n=r(81664),c=r(78070);async function u(e){try{let e=await (0,n.eI)(),{data:{user:t}}=await e.auth.getUser();if(!t)return c.Z.json({error:"N\xe3o autenticado"},{status:401});let{data:r}=await e.from("chat_messages").select("id").eq("user_id",t.id).limit(1);if(r&&r.length>0)return c.Z.json({success:!0,message:"Chat j\xe1 iniciado"});let s=`Ol\xe1! ðŸ‘‹

Bem-vindo ao nosso suporte! Para come\xe7armos, preciso de algumas informa\xe7\xf5es:

ðŸ“ Por favor, me informe:
â€¢ Seu nome completo
â€¢ Seu e-mail

Assim que receber essas informa\xe7\xf5es, poderemos prosseguir! ðŸ˜Š`,{data:a,error:o}=await e.from("chat_messages").insert([{user_id:t.id,message:s,sender_type:"support",is_read:!1}]).select().single();if(o)return console.error("Erro ao enviar mensagem de boas-vindas:",o),c.Z.json({error:"Erro ao iniciar chat"},{status:500});return c.Z.json({success:!0,data:a})}catch(e){return console.error("Erro inesperado:",e),c.Z.json({error:"Erro inesperado ao iniciar chat"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/chat/start/route",pathname:"/api/chat/start",filename:"route",bundlePath:"app/api/chat/start/route"},resolvedPagePath:"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/api/chat/start/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:d,headerHooks:h,staticGenerationBailout:I}=p,x="/api/chat/start/route";function g(){return(0,i.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:m})}},81664:(e,t,r)=>{r.d(t,{eI:()=>i,i3:()=>n,vv:()=>c});var s=r(77497),a=r(94128),o=r(32455);let i=(0,r(40002).cache)(async()=>{let e=await (0,o.cookies)();return(0,s.createServerClient)("https://frhxqgcqmxpjpnghsvoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyaHhxZ2NxbXhwanBuZ2hzdm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTM3NTYsImV4cCI6MjA3OTIyOTc1Nn0.p1OxLRA5DKgvetuy-IbCfYClNSjrvK6fm43aZNX3T7I",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:s})=>e.set(t,r,s))}catch{}}}})});function n(){let e=process.env.SUPABASE_SERVICE_ROLE_KEY;return e?(0,a.eI)("https://frhxqgcqmxpjpnghsvoe.supabase.co",e,{auth:{autoRefreshToken:!1,persistSession:!1}}):null}function c(){return(0,a.eI)("https://frhxqgcqmxpjpnghsvoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyaHhxZ2NxbXhwanBuZ2hzdm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTM3NTYsImV4cCI6MjA3OTIyOTc1Nn0.p1OxLRA5DKgvetuy-IbCfYClNSjrvK6fm43aZNX3T7I",{auth:{autoRefreshToken:!1,persistSession:!1}})}},50482:(e,t,r)=>{e.exports=r(20399)},40002:(e,t,r)=>{e.exports=r(50482).vendored["react-rsc"].React},95419:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,2455,4128,7497,8070],()=>r(87293));module.exports=s})();