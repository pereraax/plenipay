(()=>{var e={};e.id=285,e.ids=[285],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7406:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=a(50482),o=a(69108),s=a(62563),n=a.n(s),i=a(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(t,l);let d=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,79772)),"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,63203)),"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,20429)),"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,1429)),"/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/not-found.tsx"]}],c=["/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/checkout/page.tsx"],u="/checkout/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},16337:(e,t,a)=>{Promise.resolve().then(a.bind(a,61719))},61719:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(95344),o=a(3729),s=a(22254),n=a(42739),i=a(63024),l=a(16588),d=a(62312),c=a(74243),u=a(85674),m=a(36234),p=a(27100),h=a(58536),x=a(6210);function b(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)().get("plano"),[a,b]=(0,o.useState)(!1),[f,g]=(0,o.useState)(null),[y,j]=(0,o.useState)(!0),[N,P]=(0,o.useState)({nome:"",cpf:"",metodoPagamento:"PIX"});(0,o.useEffect)(()=>{if(!t||!["basico","premium"].includes(t)){(0,p.createNotification)("Plano inv\xe1lido","warning"),e.push("/upgrade");return}v()},[t,e]);let v=async()=>{j(!0);try{let t=(0,m.createClient)(),{data:{user:a},error:r}=await t.auth.getUser();if(r||!a){(0,p.createNotification)("Erro: usu\xe1rio n\xe3o autenticado","warning"),e.push("/login");return}let{data:o,error:s}=await t.from("profiles").select("*").eq("id",a.id).single();if(s){console.error("Erro ao buscar perfil:",s),(0,p.createNotification)("Erro ao carregar perfil","warning"),j(!1);return}g(o),P({nome:o.nome||"",cpf:o.cpf||"",metodoPagamento:"PIX"})}catch(e){console.error("Erro ao carregar perfil:",e),(0,p.createNotification)("Erro ao carregar dados","warning")}finally{j(!1)}},w=e=>{let t=e.replace(/\D/g,"");return t.length<=11?t.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):e},C=e=>{let t;let a=e.replace(/\D/g,"");if(11!==a.length||/^(\d)\1{10}$/.test(a))return!1;let r=0;for(let e=1;e<=9;e++)r+=parseInt(a.substring(e-1,e))*(11-e);if((10==(t=10*r%11)||11===t)&&(t=0),t!==parseInt(a.substring(9,10)))return!1;r=0;for(let e=1;e<=10;e++)r+=parseInt(a.substring(e-1,e))*(12-e);return(10==(t=10*r%11)||11===t)&&(t=0),t===parseInt(a.substring(10,11))},E=async a=>{if(a.preventDefault(),!N.nome.trim()){(0,p.createNotification)("Nome \xe9 obrigat\xf3rio","warning");return}let r=N.cpf.replace(/\D/g,"");if(11!==r.length){(0,p.createNotification)("CPF inv\xe1lido. Digite um CPF com 11 d\xedgitos.","warning");return}if(!C(N.cpf)){(0,p.createNotification)("CPF inv\xe1lido. Verifique os d\xedgitos informados.","warning");return}b(!0);try{let a=(0,m.createClient)(),{data:{user:o}}=await a.auth.getUser();if(!o){(0,p.createNotification)("Erro: usu\xe1rio n\xe3o autenticado","warning");return}let{error:s}=await a.from("profiles").update({nome:N.nome,cpf:r}).eq("id",o.id);if(s){console.error("Erro ao atualizar perfil:",s),(0,p.createNotification)("Erro ao salvar dados: "+s.message,"warning"),b(!1);return}console.log("\uD83D\uDCB3 Processando pagamento...",{plano:t,metodoPagamento:N.metodoPagamento});let n=await fetch("/api/pagamento/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plano:t,metodoPagamento:N.metodoPagamento})}),i=await n.json();if(!n.ok)throw Error(i.error||"Erro ao processar pagamento");if("PIX"===i.metodoPagamento||"PIX"===N.metodoPagamento){if(console.log("\uD83D\uDCB3 Redirecionando para PIX:",{subscriptionId:i.subscriptionId,hasQrCode:!!i.pixQrCode,hasCopyPaste:!!i.pixCopyPaste}),!i.subscriptionId)throw Error("Subscription ID n\xe3o retornado. Tente novamente.");let e=new URLSearchParams({subscriptionId:i.subscriptionId,plano:i.plano||t||""});i.pixQrCode&&e.set("pixQrCode",i.pixQrCode),i.pixCopyPaste&&e.set("pixCopyPaste",i.pixCopyPaste),console.log("\uD83C\uDF10 Redirecionando para:",`/pagamento/pix?${e.toString()}`),window.location.href=`/pagamento/pix?${e.toString()}`;return}i.paymentUrl?window.location.href=i.paymentUrl:((0,p.createNotification)("Checkout criado com sucesso!","success"),e.push("/home"))}catch(e){console.error("Erro no checkout:",e),(0,p.createNotification)("Erro ao processar pagamento: "+e.message,"warning")}finally{b(!1)}};return y?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-brand-midnight via-brand-royal to-brand-midnight",children:[r.jsx(x.default,{}),r.jsx(h.default,{}),r.jsx("main",{className:"lg:ml-64 min-h-screen flex items-center justify-center",children:r.jsx(n.Z,{className:"animate-spin text-brand-aqua",size:48})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-brand-midnight via-brand-royal to-brand-midnight",children:[r.jsx(x.default,{}),r.jsx(h.default,{}),r.jsx("main",{className:"lg:ml-64 min-h-screen p-4 lg:p-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)("button",{onClick:()=>e.push("/upgrade"),className:"flex items-center gap-2 text-brand-clean/70 hover:text-white mb-6 transition-smooth",children:[r.jsx(i.Z,{size:20}),r.jsx("span",{children:"Voltar"})]}),(0,r.jsxs)("div",{className:"bg-brand-royal/80 backdrop-blur-sm rounded-3xl p-8 border-2 border-brand-aqua/30 shadow-2xl",children:[r.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Finalizar Assinatura"}),(0,r.jsxs)("p",{className:"text-brand-clean/70 mb-8",children:["Plano ","basico"===t?"B\xe1sico":"Premium"," - R$ ",({basico:29.9,premium:49.9})[t].toFixed(2).replace(".",","),"/m\xeas"]}),(0,r.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Nome Completo *"}),r.jsx("input",{type:"text",required:!0,value:N.nome,onChange:e=>P({...N,nome:e.target.value}),className:"w-full px-4 py-3 bg-brand-midnight border border-brand-aqua/30 rounded-xl text-white placeholder-brand-clean/40 focus:outline-none focus:border-brand-aqua transition-smooth",placeholder:"Seu nome completo"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"CPF *"}),r.jsx("input",{type:"text",required:!0,value:N.cpf,onChange:e=>{let t=w(e.target.value);P({...N,cpf:t})},placeholder:"000.000.000-00",maxLength:14,className:"w-full px-4 py-3 bg-brand-midnight border border-brand-aqua/30 rounded-xl text-white placeholder-brand-clean/40 focus:outline-none focus:border-brand-aqua transition-smooth"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-white mb-4",children:"M\xe9todo de Pagamento *"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>P({...N,metodoPagamento:"PIX"}),className:`w-full p-4 rounded-xl border-2 transition-smooth flex items-center gap-3 ${"PIX"===N.metodoPagamento?"border-brand-aqua bg-brand-aqua/20":"border-brand-aqua/30 hover:border-brand-aqua/50"}`,children:[r.jsx("div",{className:`p-2 rounded-lg ${"PIX"===N.metodoPagamento?"bg-brand-aqua":"bg-brand-midnight"}`,children:r.jsx(l.Z,{size:24,className:"text-white"})}),(0,r.jsxs)("div",{className:"flex-1 text-left",children:[r.jsx("p",{className:"font-semibold text-white",children:"PIX"}),r.jsx("p",{className:"text-xs text-brand-clean/70",children:"Aprova\xe7\xe3o imediata"})]}),"PIX"===N.metodoPagamento&&r.jsx(d.Z,{size:20,className:"text-brand-aqua"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>P({...N,metodoPagamento:"BOLETO"}),className:`w-full p-4 rounded-xl border-2 transition-smooth flex items-center gap-3 ${"BOLETO"===N.metodoPagamento?"border-brand-aqua bg-brand-aqua/20":"border-brand-aqua/30 hover:border-brand-aqua/50"}`,children:[r.jsx("div",{className:`p-2 rounded-lg ${"BOLETO"===N.metodoPagamento?"bg-brand-aqua":"bg-brand-midnight"}`,children:r.jsx(c.Z,{size:24,className:"text-white"})}),(0,r.jsxs)("div",{className:"flex-1 text-left",children:[r.jsx("p",{className:"font-semibold text-white",children:"Boleto"}),r.jsx("p",{className:"text-xs text-brand-clean/70",children:"Vencimento em 3 dias \xfateis"})]}),"BOLETO"===N.metodoPagamento&&r.jsx(d.Z,{size:20,className:"text-brand-aqua"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>P({...N,metodoPagamento:"CREDIT_CARD"}),className:`w-full p-4 rounded-xl border-2 transition-smooth flex items-center gap-3 ${"CREDIT_CARD"===N.metodoPagamento?"border-brand-aqua bg-brand-aqua/20":"border-brand-aqua/30 hover:border-brand-aqua/50"}`,children:[r.jsx("div",{className:`p-2 rounded-lg ${"CREDIT_CARD"===N.metodoPagamento?"bg-brand-aqua":"bg-brand-midnight"}`,children:r.jsx(u.Z,{size:24,className:"text-white"})}),(0,r.jsxs)("div",{className:"flex-1 text-left",children:[r.jsx("p",{className:"font-semibold text-white",children:"Cart\xe3o de Cr\xe9dito"}),r.jsx("p",{className:"text-xs text-brand-clean/70",children:"Aprova\xe7\xe3o imediata"})]}),"CREDIT_CARD"===N.metodoPagamento&&r.jsx(d.Z,{size:20,className:"text-brand-aqua"})]})]})]}),r.jsx("button",{type:"submit",disabled:a,className:"w-full px-6 py-4 bg-brand-aqua text-white rounded-xl font-semibold hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.Z,{size:20,className:"animate-spin"}),r.jsx("span",{children:"Processando..."})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{children:"Pagar Agora"}),r.jsx(i.Z,{size:20,className:"rotate-180"})]})})]})]})]})})]})}},58536:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(95344),o=a(22254),s=a(3729),n=a(72086),i=a(37121),l=a(85674),d=a(10703),c=a(55794),u=a(50340),m=a(84013),p=a(13746),h=a(42739),x=a(43470);let b=[{href:"/home",label:"Home",icon:n.Z,color:"text-blue-400"},{href:"/registros",label:"Todos os Registros",icon:i.Z,color:"text-green-400"},{href:"/dividas",label:"D\xedvidas",icon:l.Z,color:"text-red-400"},{href:"/minhas-metas",label:"Minhas Metas",icon:d.Z,color:"text-yellow-400"},{href:"/calendario",label:"Calend\xe1rio",icon:c.Z,color:"text-purple-400"},{href:"/dashboard",label:"Dashboard",icon:u.Z,color:"text-cyan-400"},{href:"/tutoriais",label:"Tutoriais",icon:m.Z,color:"text-pink-400"},{href:"/configuracoes",label:"Configura\xe7\xf5es",icon:p.Z,color:"text-gray-400"}];function f(){let e=(0,o.usePathname)(),t=(0,o.useRouter)(),[a,n]=(0,s.useTransition)(),[i,l]=(0,s.useState)(null);(0,s.useEffect)(()=>{b.forEach(a=>{a.href!==e&&setTimeout(()=>{t.prefetch(a.href)},100)})},[t,e]);let d=a=>{e!==a&&(l(a),n(()=>{t.push(a)}),setTimeout(()=>{l(null)},100))},c=a=>{a!==e&&t.prefetch(a)};return r.jsx("aside",{className:"fixed left-0 top-0 h-screen w-64 bg-brand-royal border-r border-brand-midnight shadow-lg z-50 hidden lg:block",children:(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsx(x.default,{})}),r.jsx("nav",{className:"space-y-2",children:b.map(t=>{let o=t.icon,s=e===t.href||"/home"!==t.href&&e?.startsWith(t.href),n=i===t.href&&a;return(0,r.jsxs)("button",{onClick:()=>d(t.href),onMouseEnter:()=>c(t.href),disabled:n||s,className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-smooth text-left disabled:opacity-100 ${s?"bg-brand-aqua shadow-lg":"hover:bg-brand-midnight/50 disabled:hover:bg-transparent"}`,children:[n?r.jsx(h.Z,{size:20,strokeWidth:2,className:"animate-spin"}):r.jsx(o,{size:20,strokeWidth:2,className:s?"text-brand-midnight":t.color}),r.jsx("span",{className:`font-medium ${s?"text-brand-midnight":"text-brand-clean"}`,children:t.label})]},t.href)})})]})})}},63024:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},62312:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},74243:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]])},16588:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},79772:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>s,__esModule:()=>o,default:()=>n});let r=(0,a(86843).createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/checkout/page.tsx`),{__esModule:o,$$typeof:s}=r,n=r.default},48096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{DYNAMIC_ERROR_CODE:function(){return a},DynamicServerError:function(){return r}});let a="DYNAMIC_SERVER_USAGE";class r extends Error{constructor(e){super("Dynamic server usage: "+e),this.digest=a}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},72973:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"staticGenerationBailout",{enumerable:!0,get:function(){return i}});let r=a(48096),o=a(45869);class s extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}function n(e,t){let{dynamic:a,link:r}=t||{};return"Page"+(a?' with `dynamic = "'+a+'"`':"")+" couldn't be rendered statically because it used `"+e+"`."+(r?" See more info here: "+r:"")}let i=(e,t)=>{let{dynamic:a,link:i}=void 0===t?{}:t,l=o.staticGenerationAsyncStorage.getStore();if(!l)return!1;if(l.forceStatic)return!0;if(l.dynamicShouldError)throw new s(n(e,{link:i,dynamic:null!=a?a:"error"}));let d=n(e,{dynamic:a,link:"https://nextjs.org/docs/messages/dynamic-server-error"});if(null==l.postpone||l.postpone.call(l,e),l.revalidate=0,l.isStaticGeneration){let t=new r.DynamicServerError(d);throw l.dynamicUsageDescription=e,l.dynamicUsageStack=t.stack,t}return!1};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1638,4123,115],()=>a(7406));module.exports=r})();