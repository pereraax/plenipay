exports.id=5160,exports.ids=[5160],exports.modules={33509:(e,r,a)=>{Promise.resolve().then(a.bind(a,24636))},24636:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>x});var s=a(95344),o=a(22254),t=a(50340),i=a(89895),n=a(85674),l=a(33037),c=a(20016),d=a(35851),u=a(84013),h=a(23485),m=a(48120);let p=[{href:"/administracaosecr/dashboard",label:"Dashboard",icon:t.Z},{href:"/administracaosecr/usuarios",label:"Todos os Usu\xe1rios",icon:i.Z},{href:"/administracaosecr/assinantes",label:"Usu\xe1rios Assinantes",icon:n.Z},{href:"/administracaosecr/avisos",label:"Central de Avisos",icon:l.Z},{href:"/administracaosecr/banners",label:"Banners",icon:c.Z},{href:"/administracaosecr/chat",label:"Chat de Suporte",icon:d.Z},{href:"/administracaosecr/tutoriais",label:"Tutoriais",icon:u.Z}];function f(){let e=(0,o.usePathname)(),r=(0,o.useRouter)();return s.jsx("aside",{className:"fixed left-0 top-0 h-screen w-64 bg-brand-royal border-r border-white/10 shadow-lg z-50 hidden lg:block",children:(0,s.jsxs)("div",{className:"p-6",children:[s.jsx("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"p-2 bg-brand-aqua/20 rounded-xl",children:s.jsx(h.Z,{size:24,className:"text-brand-aqua"})}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-lg font-display font-bold text-brand-clean",children:"Admin Panel"}),s.jsx("p",{className:"text-xs text-brand-clean/60",children:"PLENIPAY"})]})]})}),s.jsx("nav",{className:"space-y-2 mb-8",children:p.map(a=>{let o=a.icon,t=e===a.href||"/administracaosecr/dashboard"!==a.href&&e?.startsWith(a.href);return(0,s.jsxs)("button",{onClick:()=>r.push(a.href),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-smooth text-left ${t?"bg-brand-aqua text-brand-midnight shadow-lg":"text-brand-clean hover:bg-white/10 hover:text-brand-aqua"}`,children:[s.jsx(o,{size:20,strokeWidth:2}),s.jsx("span",{className:"font-medium",children:a.label})]},a.href)})}),(0,s.jsxs)("button",{onClick:()=>{document.cookie="admin_token=; path=/; max-age=0",r.push("/administracaosecr/login")},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-smooth text-left text-brand-clean hover:bg-red-900/20 hover:text-red-400",children:[s.jsx(m.Z,{size:20,strokeWidth:2}),s.jsx("span",{className:"font-medium",children:"Sair"})]})]})})}var g=a(3729);function b({children:e}){let r=(0,o.useRouter)(),a=(0,o.usePathname)(),[t,i]=(0,g.useState)(!0),[n,l]=(0,g.useState)(!1);return((0,g.useEffect)(()=>{if("/administracaosecr/login"===a){l(!0),i(!1);return}(async()=>{try{if(!document.cookie.split(";").find(e=>e.trim().startsWith("admin_token="))||!(await fetch("/api/admin/verify",{method:"GET",credentials:"include"})).ok){r.replace("/administracaosecr/login");return}l(!0),i(!1)}catch(e){r.replace("/administracaosecr/login")}})()},[a,r]),"/administracaosecr/login"===a)?s.jsx(s.Fragment,{children:e}):t||!n?s.jsx("div",{className:"min-h-screen bg-brand-midnight flex items-center justify-center",children:s.jsx("div",{className:"text-brand-clean",children:"Verificando autentica\xe7\xe3o..."})}):s.jsx(s.Fragment,{children:e})}function x({children:e}){let r=(0,o.usePathname)();return"/administracaosecr/login"===r||"/administracaosecr"===r?s.jsx(s.Fragment,{children:e}):s.jsx(b,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-brand-midnight",children:[s.jsx(f,{}),s.jsx("main",{className:"lg:ml-64 p-4 lg:p-8",children:e})]})})}},20016:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},48120:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},23485:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},89895:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2748:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>l});var s=a(25036);let o=(0,a(86843).createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/components/admin/AdminLayoutWrapper.tsx`),{__esModule:t,$$typeof:i}=o,n=o.default;function l({children:e}){return s.jsx(n,{children:e})}},59186:(e,r,a)=>{"use strict";a.d(r,{$d:()=>t,Q4:()=>i,RB:()=>o});var s=a(81664);async function o(){console.log("\uD83D\uDD0D [obterTodosUsuarios] Iniciando busca de usu\xe1rios...");try{let e=(0,s.vv)();console.log("\uD83D\uDD04 [obterTodosUsuarios] Tentando fun\xe7\xe3o RPC get_all_profiles (prioridade)...");let{data:r,error:a}=await e.rpc("get_all_profiles");if(!a&&r&&Array.isArray(r)){if(r.length>0)return console.log(`✅ [obterTodosUsuarios] Encontrados ${r.length} usu\xe1rios via RPC`),{data:r,error:null};console.log("⚠️ [obterTodosUsuarios] RPC retornou array vazio")}else a&&(console.error("❌ [obterTodosUsuarios] Erro na fun\xe7\xe3o RPC:",a),console.error("❌ [obterTodosUsuarios] Detalhes RPC:",{message:a.message,code:a.code,details:a.details,hint:a.hint}))}catch(e){console.error("❌ [obterTodosUsuarios] Erro ao tentar RPC:",e)}let e=(0,s.i3)();if(e)try{console.log("✅ [obterTodosUsuarios] Usando cliente admin (bypassa RLS)");let{data:r,error:a}=await e.from("profiles").select("id, id_curto, email, nome, telefone, whatsapp, plano, created_at").order("created_at",{ascending:!1});if(a)console.error("❌ [obterTodosUsuarios] Erro ao buscar profiles:",a),console.error("❌ [obterTodosUsuarios] Detalhes profiles:",{message:a.message,code:a.code,details:a.details,hint:a.hint});else if(r&&r.length>0)try{let{data:a,error:s}=await e.auth.admin.listUsers(),o=new Map;a?.users&&a.users.forEach(e=>{o.set(e.id,e.last_sign_in_at||null)});let t=r.map(e=>({...e,last_sign_in_at:o.get(e.id)||null}));return console.log(`✅ [obterTodosUsuarios] Encontrados ${t.length} usu\xe1rios via cliente admin`),{data:t,error:null}}catch(a){console.warn("⚠️ [obterTodosUsuarios] Erro ao buscar auth.users, retornando sem last_sign_in_at:",a);let e=r.map(e=>({...e,last_sign_in_at:null}));return console.log(`✅ [obterTodosUsuarios] Encontrados ${e.length} usu\xe1rios via cliente admin (sem auth data)`),{data:e,error:null}}else console.log("⚠️ [obterTodosUsuarios] Nenhum profile encontrado via cliente admin")}catch(e){console.error("❌ [obterTodosUsuarios] Erro ao usar cliente admin:",e)}else console.log("⚠️ [obterTodosUsuarios] Service role key n\xe3o configurada");try{let e=await (0,s.eI)();console.log("\uD83D\uDD04 [obterTodosUsuarios] Tentando busca direta com cliente autenticado...");let{data:r,error:a}=await e.from("profiles").select("id, id_curto, email, nome, telefone, whatsapp, plano, created_at").order("created_at",{ascending:!1});if(a)return console.error("❌ [obterTodosUsuarios] Erro ao buscar usu\xe1rios diretamente:",a),console.error("❌ [obterTodosUsuarios] Detalhes do erro:",{message:a.message,code:a.code,details:a.details,hint:a.hint}),{error:`N\xe3o foi poss\xedvel carregar usu\xe1rios: ${a.message}`,data:[]};if(r&&r.length>0){let e=r.map(e=>({...e,last_sign_in_at:null}));return console.log(`✅ [obterTodosUsuarios] Encontrados ${e.length} usu\xe1rios via busca direta`),{data:e,error:null}}}catch(e){console.error("❌ [obterTodosUsuarios] Erro ao tentar busca direta:",e)}return console.warn("⚠️ [obterTodosUsuarios] N\xe3o foi poss\xedvel carregar usu\xe1rios de nenhuma forma"),{data:[],error:"N\xe3o foi poss\xedvel carregar os usu\xe1rios. Verifique a configura\xe7\xe3o do banco de dados."}}async function t(){let e=(0,s.i3)();if(e){let{data:r,error:a}=await e.from("profiles").select("id, id_curto, email, nome, telefone, whatsapp, plano, created_at").in("plano",["basico","premium"]).order("created_at",{ascending:!1});return a?(console.error("Erro ao buscar assinantes com cliente admin:",a),{error:a.message,data:[]}):{data:r||[],error:null}}let r=(0,s.vv)(),{data:a,error:o}=await r.rpc("get_subscriber_profiles");if(!o&&a)return{data:a||[],error:null};let{data:t,error:i}=await r.from("profiles").select("id, id_curto, email, nome, telefone, whatsapp, plano, created_at").in("plano",["basico","premium"]).order("created_at",{ascending:!1});return i?(console.error("Erro ao buscar assinantes:",i),{error:i.message,data:[]}):{data:t||[],error:null}}async function i(){let e=await (0,s.eI)(),{data:r,error:a}=await e.rpc("get_user_stats");if(a){let{data:r}=await e.from("profiles").select("plano");return r?{data:{total_usuarios:r.length,usuarios_assinantes:r.filter(e=>"basico"===e.plano||"premium"===e.plano).length,usuarios_teste:r.filter(e=>"teste"===e.plano).length},error:null}:{error:a.message,data:null}}return{data:r?.[0]||null,error:null}}a(6113)},81664:(e,r,a)=>{"use strict";a.d(r,{eI:()=>i,i3:()=>n,vv:()=>l});var s=a(77497),o=a(94128),t=a(32455);let i=(0,a(40002).cache)(async()=>{let e=await (0,t.cookies)();return(0,s.createServerClient)("https://frhxqgcqmxpjpnghsvoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyaHhxZ2NxbXhwanBuZ2hzdm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTM3NTYsImV4cCI6MjA3OTIyOTc1Nn0.p1OxLRA5DKgvetuy-IbCfYClNSjrvK6fm43aZNX3T7I",{cookies:{getAll:()=>e.getAll(),setAll(r){try{r.forEach(({name:r,value:a,options:s})=>e.set(r,a,s))}catch{}}}})});function n(){let e=process.env.SUPABASE_SERVICE_ROLE_KEY;return e?(0,o.eI)("https://frhxqgcqmxpjpnghsvoe.supabase.co",e,{auth:{autoRefreshToken:!1,persistSession:!1}}):null}function l(){return(0,o.eI)("https://frhxqgcqmxpjpnghsvoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyaHhxZ2NxbXhwanBuZ2hzdm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTM3NTYsImV4cCI6MjA3OTIyOTc1Nn0.p1OxLRA5DKgvetuy-IbCfYClNSjrvK6fm43aZNX3T7I",{auth:{autoRefreshToken:!1,persistSession:!1}})}},59508:(e,r,a)=>{"use strict";a.d(r,{Z:()=>i});var s=a(40002),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,r)=>{let a=(0,s.forwardRef)(({color:a="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:c="",children:d,...u},h)=>(0,s.createElement)("svg",{ref:h,...o,width:i,height:i,stroke:a,strokeWidth:l?24*Number(n)/Number(i):n,className:["lucide",`lucide-${t(e)}`,c].join(" "),...u},[...r.map(([e,r])=>(0,s.createElement)(e,r)),...Array.isArray(d)?d:[d]]));return a.displayName=`${e}`,a}}};