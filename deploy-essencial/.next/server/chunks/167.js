"use strict";exports.id=167,exports.ids=[167],exports.modules={5697:(e,a,r)=>{r.d(a,{Z:()=>_});var t=r(95344),d=r(3729),n=r(29103),i=r(79741),o=r(52175),s=r(72086),l=r(73714),c=r(51354),b=r(70491),m=r(98026),h=r(40718),x=r(42916),u=r(97118),g=r(14513),p=r(18822),k=r(51838),f=r(16588),y=r(85674),v=r(67925),j=r(38271),w=r(22254),N=r(27100),q=r(39395),Z=r(66341);function _({registro:e,onClose:a}){let _=(0,w.useRouter)(),[S,C]=(0,d.useState)(!1),[z,D]=(0,d.useState)([]),[M,$]=(0,d.useState)([]),[E,F]=(0,d.useState)(""),[I,R]=(0,d.useState)(!1),[P,A]=(0,d.useState)(null),[W,O]=(0,d.useState)([]),[L,V]=(0,d.useState)([]),[B,U]=(0,d.useState)({nome:"",observacao:"",user_id:"",tipo:"saida",valor:"",categoria:"",metodo_pagamento:"dinheiro",parcelas_totais:"1",parcelas_pagas:"0",data_registro:""}),G=[{id:"alimentacao",nome:"Alimenta\xe7\xe3o",icon:i.Z},{id:"transporte",nome:"Transporte",icon:o.Z},{id:"moradia",nome:"Moradia",icon:s.Z},{id:"compras",nome:"Compras",icon:l.Z},{id:"saude",nome:"Sa\xfade",icon:c.Z},{id:"educacao",nome:"Educa\xe7\xe3o",icon:b.Z},{id:"trabalho",nome:"Trabalho",icon:m.Z},{id:"entretenimento",nome:"Entretenimento",icon:h.Z},{id:"fitness",nome:"Fitness",icon:x.Z},{id:"viagem",nome:"Viagem",icon:u.Z}],H=e=>{if(!e)return null;let a=e.split("\n"),r=a[a.length-1]?.trim();if(r&&r.startsWith("[")&&r.endsWith("]"))try{return JSON.parse(r),r}catch(e){}return null},T=e=>e?e.split("\n").filter(e=>{let a=e.trim();return!(a.startsWith("[")&&a.endsWith("]"))}).join("\n").trim():"",J=async e=>{try{let a=e.nome.replace(/\s*-\s*Parcela\s*\d+.*$/i,"").trim(),r=await (0,n.ho)({tipo:"divida",user_id:e.user_id});if(r.data){let t=r.data.filter(r=>r.nome.replace(/\s*-\s*Parcela\s*\d+.*$/i,"").trim()===a&&r.id!==e.id);V([e,...t]);let d=[e,...t].map(e=>{let a=parseFloat(e.valor.toString()),r=e.parcelas_totais||1;return{id:e.id,valor:new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(r>0?a/r:a),data:new Date(e.data_registro).toISOString().slice(0,16),quantidade:r.toString()}});O(d)}}catch(e){console.error("Erro ao buscar parcelas relacionadas:",e)}};(0,d.useEffect)(()=>{if(e){let a=e.etiquetas?.find(e=>["pix","cartao","dinheiro"].includes(e))||"dinheiro",r=T(e.observacao);U({nome:e.nome.replace(/\s*-\s*Parcela\s*\d+.*$/i,"").trim(),observacao:r,user_id:e.user_id,tipo:e.tipo,valor:e.valor.toString(),categoria:e.categoria||"",metodo_pagamento:a,parcelas_totais:e.parcelas_totais.toString(),parcelas_pagas:e.parcelas_pagas.toString(),data_registro:new Date(e.data_registro).toISOString().slice(0,16)}),$(e.etiquetas?.filter(e=>!["pix","cartao","dinheiro"].includes(e))||[]),e.user&&A(e.user),"divida"===e.tipo?J(e):(O([]),V([]))}else U({nome:"",observacao:"",user_id:"",tipo:"saida",valor:"",categoria:"",metodo_pagamento:"dinheiro",parcelas_totais:"1",parcelas_pagas:"0",data_registro:new Date().toISOString().slice(0,16)}),$([]),A(null),O([]),V([]);Y()},[e]);let K=e=>{W.length>1&&O(W.filter((a,r)=>r!==e))},Q=(e,a,r)=>{let t=[...W];"valor"===a?t[e].valor=(0,Z.v)(r):t[e][a]=r,O(t)},X=()=>W.reduce((e,a)=>e+(0,Z.d)(a.valor)*(parseInt(a.quantidade)||1),0),Y=async()=>{let e=await (0,n.CG)();e.data&&D(e.data)},ee=()=>{E.trim()&&!M.includes(E.trim())&&($([...M,E.trim()]),F(""))},ea=e=>{$(M.filter(a=>a!==e))},er=async t=>{t.preventDefault(),C(!0);let d=(0,Z.d)(B.valor);if(isNaN(d)){(0,N.createNotification)("Valor inv\xe1lido","warning"),C(!1);return}if(e){let r=H(e.observacao),t=B.observacao.trim();r&&(t=t?`${t}
${r}`:r);let i=d,o=new Date(B.data_registro).toISOString(),s=B.parcelas_totais,l=B.nome;if("divida"===e.tipo&&W.length>0){let a=W.find(a=>a.id===e.id)||W[0],r=(0,Z.d)(a.valor),t=parseInt(a.quantidade)||1;if(i=r*t,o=new Date(a.data).toISOString(),s=t.toString(),W.length>1){let a=W.findIndex(a=>a.id===e.id);a>=0&&(l=`${B.nome} - Parcela ${a+1}`)}let d=W.filter(a=>a.id&&a.id!==e.id).map(async e=>{let a=(0,Z.d)(e.valor),r=parseInt(e.quantidade)||1,t=new FormData,d=W.findIndex(a=>a.id===e.id),i=W.length>1?`${B.nome} - Parcela ${d+1}`:B.nome;t.append("nome",i),t.append("observacao",B.observacao),t.append("user_id",B.user_id),t.append("tipo","divida"),t.append("valor",(a*r).toFixed(2)),t.append("categoria",B.categoria);let o=M.find(e=>["pix","cartao","dinheiro"].includes(e))||B.metodo_pagamento,s=[...M.filter(e=>!["pix","cartao","dinheiro"].includes(e)),o];return t.append("etiquetas",JSON.stringify(s)),t.append("parcelas_totais",r.toString()),t.append("parcelas_pagas","0"),t.append("data_registro",new Date(e.data).toISOString()),(0,n.pL)(e.id,t).catch(e=>(console.error("Erro ao atualizar parcela:",e),{error:e.message}))});await Promise.all(d)}let c=new FormData;c.append("nome",l),c.append("observacao",t),c.append("user_id",B.user_id),c.append("tipo",B.tipo),c.append("valor",i.toString()),c.append("categoria",B.categoria);let b=M.find(e=>["pix","cartao","dinheiro"].includes(e))||B.metodo_pagamento,m=[...M.filter(e=>!["pix","cartao","dinheiro"].includes(e)),b];c.append("etiquetas",JSON.stringify(m)),c.append("parcelas_totais",s),c.append("parcelas_pagas",B.parcelas_pagas),c.append("data_registro",o);let h=await (0,n.pL)(e.id,c);h.error?(0,N.createNotification)("Erro ao atualizar registro: "+h.error,"warning"):((0,N.createNotification)(`Registro "${l}" atualizado com sucesso!`,"success"),a(),_.refresh())}else{let{criarRegistro:e}=await Promise.resolve().then(r.bind(r,29103)),t=new FormData;t.append("nome",B.nome),t.append("observacao",B.observacao),t.append("user_id",B.user_id),t.append("tipo",B.tipo),t.append("valor",d.toString()),t.append("categoria",B.categoria);let n=M.find(e=>["pix","cartao","dinheiro"].includes(e))||B.metodo_pagamento,i=[...M.filter(e=>!["pix","cartao","dinheiro"].includes(e)),n];t.append("etiquetas",JSON.stringify(i)),t.append("parcelas_totais",B.parcelas_totais),t.append("parcelas_pagas",B.parcelas_pagas),t.append("data_registro",new Date(B.data_registro).toISOString());let o=await e(t);o.error?(0,N.createNotification)("Erro ao criar registro: "+o.error,"warning"):((0,N.createNotification)(`Registro "${B.nome}" criado com sucesso!`,"success"),a(),_.refresh())}C(!1)};return(0,t.jsxs)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4 animate-fade-in",style:{top:0,left:0,right:0,bottom:0,width:"100vw",height:"100vh"},children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-white via-white to-gray-50 dark:from-brand-royal dark:via-brand-midnight dark:to-brand-royal rounded-3xl max-w-xl w-full max-h-[85vh] flex flex-col shadow-2xl animate-slide-up overflow-hidden border-2 border-brand-aqua/30 dark:border-brand-aqua/40",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 border-b-2 border-brand-aqua/20 dark:border-brand-aqua/30 px-6 py-5 flex items-center justify-between bg-gradient-to-r from-brand-aqua/10 via-brand-aqua/5 to-transparent dark:from-brand-aqua/20 dark:via-brand-aqua/10",children:[t.jsx("h2",{className:"text-2xl font-display font-bold text-brand-midnight dark:text-brand-clean",children:e?"Editar Registro":"Novo Registro"}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-red-500/20 dark:hover:bg-red-500/30 rounded-xl transition-smooth",children:t.jsx(g.Z,{size:22,className:"text-brand-midnight dark:text-brand-clean",strokeWidth:2.5})})]}),(0,t.jsxs)("form",{onSubmit:er,className:"flex flex-col flex-1 min-h-0 bg-white/50 dark:bg-brand-midnight/60 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-5 space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Nome do registro *"}),t.jsx("input",{type:"text",required:!0,value:B.nome,onChange:e=>U({...B,nome:e.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50",placeholder:"Ex: Sal\xe1rio mensal, Aluguel, Supermercado, Conta de luz..."})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Observa\xe7\xe3o"}),t.jsx("textarea",{value:B.observacao,onChange:e=>U({...B,observacao:e.target.value}),rows:2,className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50 resize-none",placeholder:"Adicione detalhes sobre este registro. Ex: 'Pagamento da conta de luz do m\xeas de novembro', 'Compra de mantimentos para a semana'..."})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Usu\xe1rio/Envolvido"}),(0,t.jsxs)("button",{type:"button",onClick:()=>R(!0),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg hover:bg-gray-50 dark:hover:bg-white/5 focus:outline-none focus:border-brand-aqua transition-smooth flex items-center justify-between text-left text-sm",children:[t.jsx("div",{className:"flex items-center gap-2",children:P?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-brand-aqua/20 dark:bg-brand-aqua/30 flex items-center justify-center",children:t.jsx("span",{className:"text-brand-aqua font-bold text-xs",children:P.nome.charAt(0).toUpperCase()})}),t.jsx("span",{className:"text-brand-midnight dark:text-brand-clean text-sm",children:P.nome})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(p.Z,{size:18,className:"text-brand-midnight/50 dark:text-brand-clean/50"}),t.jsx("span",{className:"text-brand-midnight/50 dark:text-brand-clean/50 text-sm",children:"Selecione um usu\xe1rio"})]})}),t.jsx(k.Z,{size:18,className:"text-brand-aqua"})]}),t.jsx("p",{className:"mt-1 text-[10px] text-brand-midnight/60 dark:text-brand-clean/60",children:"Selecione a pessoa respons\xe1vel ou envolvida neste registro. Ex: Voc\xea mesmo, C\xf4njuge, Filho, etc."})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Tipo de registro *"}),(0,t.jsxs)("div",{className:`grid gap-2 ${e&&"divida"===e.tipo?"grid-cols-3":"grid-cols-2"}`,children:[t.jsx("button",{type:"button",onClick:()=>U({...B,tipo:"entrada"}),className:`px-4 py-2.5 rounded-lg font-medium transition-smooth text-sm ${"entrada"===B.tipo?"bg-green-500 text-white shadow-md":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800"}`,children:"Entrada"}),t.jsx("button",{type:"button",onClick:()=>U({...B,tipo:"saida"}),className:`px-4 py-2.5 rounded-lg font-medium transition-smooth text-sm ${"saida"===B.tipo?"bg-red-500 text-white shadow-md":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:"Sa\xedda"}),e&&"divida"===e.tipo&&t.jsx("button",{type:"button",onClick:()=>U({...B,tipo:"divida"}),className:`px-4 py-2.5 rounded-lg font-medium transition-smooth text-sm ${"divida"===B.tipo?"bg-orange-500 text-white shadow-md":"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 border border-orange-200 dark:border-orange-800"}`,children:"D\xedvida"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Valor *"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-brand-midnight/70 dark:text-brand-clean/70 font-medium text-sm",children:"R$"}),t.jsx("input",{type:"text",required:!0,value:B.valor,onChange:e=>{let a=(0,Z.v)(e.target.value);U({...B,valor:a})},placeholder:"0,00",className:"w-full pl-10 pr-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Categoria"}),t.jsx("div",{className:"grid grid-cols-5 gap-2",children:G.map(e=>{let a=e.icon,r=B.categoria===e.id;return(0,t.jsxs)("button",{type:"button",onClick:()=>U({...B,categoria:r?"":e.id}),className:`flex flex-col items-center gap-1 px-2 py-2 rounded-lg font-medium transition-smooth text-xs overflow-hidden ${r?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"}`,title:e.nome,children:[t.jsx(a,{size:18,strokeWidth:2}),t.jsx("span",{className:"text-[10px] leading-tight text-center break-words max-w-full px-1",children:e.nome})]},e.id)})})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"M\xe9todo de Pagamento *"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>U({...B,metodo_pagamento:"pix"}),className:`flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ${"pix"===B.metodo_pagamento?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"}`,children:[t.jsx(f.Z,{size:18,strokeWidth:2}),t.jsx("span",{children:"PIX"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>U({...B,metodo_pagamento:"cartao"}),className:`flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ${"cartao"===B.metodo_pagamento?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"}`,children:[t.jsx(y.Z,{size:18,strokeWidth:2}),t.jsx("span",{children:"Cart\xe3o"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>U({...B,metodo_pagamento:"dinheiro"}),className:`flex flex-col items-center gap-1.5 px-3 py-2.5 rounded-lg font-medium transition-smooth text-xs ${"dinheiro"===B.metodo_pagamento?"bg-brand-aqua text-brand-midnight shadow-md":"bg-gray-100 dark:bg-brand-midnight/50 text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10 hover:bg-gray-200 dark:hover:bg-white/10"}`,children:[t.jsx(v.Z,{size:18,strokeWidth:2}),t.jsx("span",{children:"Dinheiro"})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Etiquetas"}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[t.jsx("input",{type:"text",value:E,onChange:e=>F(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),ee()),className:"flex-1 px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50",placeholder:"Adicionar etiqueta"}),t.jsx("button",{type:"button",onClick:ee,className:"px-3 py-2 bg-brand-aqua text-brand-midnight rounded-lg hover:bg-brand-aqua/90 transition-smooth text-sm",children:t.jsx(k.Z,{size:16})})]}),M.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:M.map((e,a)=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-brand-aqua/20 dark:bg-brand-aqua/30 text-brand-aqua rounded text-xs border border-brand-aqua/30 dark:border-brand-aqua/40",children:[e,t.jsx("button",{type:"button",onClick:()=>ea(e),className:"hover:text-brand-midnight",children:t.jsx(g.Z,{size:14})})]},a))})]}),e&&"divida"===e.tipo&&W.length>0&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-2",children:"Parcelas da D\xedvida *"}),(0,t.jsxs)("div",{className:"space-y-3",children:[W.map((a,r)=>{let d=a.id===e.id;return(0,t.jsxs)("div",{className:`rounded-lg p-3 border ${d?"bg-brand-aqua/10 dark:bg-brand-aqua/20 border-brand-aqua dark:border-brand-aqua/50":"bg-gray-50 dark:bg-brand-midnight/50 border-gray-200 dark:border-white/10"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-brand-midnight dark:text-brand-clean",children:["Parcela ",r+1]}),d&&t.jsx("span",{className:"px-2 py-0.5 bg-brand-aqua/20 dark:bg-brand-aqua/30 text-brand-aqua text-xs rounded font-medium",children:"Editando"})]}),W.length>1&&t.jsx("button",{type:"button",onClick:()=>K(r),className:"p-1 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-smooth",title:"Remover parcela",children:t.jsx(j.Z,{size:16})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight/70 dark:text-brand-clean/70 mb-1",children:"Valor *"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-brand-midnight/50 dark:text-brand-clean/50 text-xs",children:"R$"}),t.jsx("input",{type:"text",required:!0,value:a.valor,onChange:e=>{Q(r,"valor",(0,Z.v)(e.target.value))},placeholder:"0,00",className:"w-full pl-7 pr-2 py-1.5 bg-white dark:bg-brand-royal border border-gray-300 dark:border-white/10 rounded focus:outline-none focus:border-brand-aqua transition-smooth text-xs text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight/70 dark:text-brand-clean/70 mb-1",children:"Data *"}),t.jsx("input",{type:"datetime-local",required:!0,value:a.data,onChange:e=>Q(r,"data",e.target.value),className:"w-full px-2 py-1.5 bg-white dark:bg-brand-royal border border-gray-300 dark:border-white/10 rounded focus:outline-none focus:border-brand-aqua transition-smooth text-xs text-brand-midnight dark:text-brand-clean"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight/70 dark:text-brand-clean/70 mb-1",children:"Qtd *"}),t.jsx("input",{type:"number",min:"1",required:!0,value:a.quantidade,onChange:e=>Q(r,"quantidade",e.target.value),placeholder:"1",className:"w-full px-2 py-1.5 bg-white dark:bg-brand-royal border border-gray-300 dark:border-white/10 rounded focus:outline-none focus:border-brand-aqua transition-smooth text-xs text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]})]},a.id||r)}),X()>0&&t.jsx("div",{className:"bg-brand-aqua/10 dark:bg-brand-aqua/20 rounded-lg p-2.5 border border-brand-aqua/20 dark:border-brand-aqua/30",children:(0,t.jsxs)("p",{className:"text-xs font-medium text-brand-midnight dark:text-brand-clean text-center",children:["Total: ",t.jsx("span",{className:"text-brand-aqua font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(X())})]})})]})]}),(!e||"divida"!==e.tipo||0===W.length)&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Parcelas totais"}),t.jsx("input",{type:"number",min:"1",value:B.parcelas_totais,onChange:e=>U({...B,parcelas_totais:e.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Parcelas pagas"}),t.jsx("input",{type:"number",min:"0",value:B.parcelas_pagas,onChange:e=>U({...B,parcelas_pagas:e.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/50"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Data e hora"}),t.jsx("input",{type:"datetime-local",value:B.data_registro,onChange:e=>U({...B,data_registro:e.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-brand-midnight border border-gray-300 dark:border-white/10 rounded-lg focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm"})]})]}),t.jsx("div",{className:"flex-shrink-0 bg-white dark:bg-brand-midnight border-t border-gray-200 dark:border-white/10 px-5 py-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-brand-royal text-brand-midnight dark:text-brand-clean rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-white/10 border border-gray-200 dark:border-white/10 transition-smooth text-sm",children:"Cancelar"}),t.jsx("button",{type:"submit",disabled:S,className:"flex-1 px-4 py-2.5 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:S?e?"Salvando...":"Registrando...":e?"Salvar Altera\xe7\xf5es":"REGISTRAR"})]})})]})]}),t.jsx(q.Z,{isOpen:I,onClose:()=>R(!1),onSelect:e=>{A(e),U({...B,user_id:e.id})},selectedUserId:B.user_id})]})}},39395:(e,a,r)=>{r.d(a,{Z:()=>m});var t=r(95344),d=r(3729),n=r(29103),i=r(13746),o=r(14513),s=r(28765),l=r(51838),c=r(22254),b=r(27100);function m({isOpen:e,onClose:a,onSelect:r,selectedUserId:m}){let h=(0,c.useRouter)(),[x,u]=(0,d.useState)([]),[g,p]=(0,d.useState)(!1),[k,f]=(0,d.useState)(""),[y,v]=(0,d.useState)(!1),[j,w]=(0,d.useState)("");(0,d.useEffect)(()=>{e&&N()},[e]);let N=async()=>{let e=await (0,n.CG)();e.data&&u(e.data)},q=async()=>{if(!j.trim())return;p(!0);let e=new FormData;e.append("nome",j.trim());let t=await (0,n.ht)(e);t.error?(0,b.createNotification)("Erro ao criar usu\xe1rio: "+t.error,"warning"):((0,b.createNotification)(`Usu\xe1rio "${j.trim()}" criado com sucesso!`,"success"),await N(),t.data&&(r(t.data),a()),w(""),v(!1)),p(!1)},Z=x.filter(e=>e.nome.toLowerCase().includes(k.toLowerCase()));return e?t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-white via-white to-gray-50 dark:from-brand-royal dark:via-brand-midnight dark:to-brand-royal rounded-3xl max-w-lg w-full max-h-[85vh] flex flex-col shadow-2xl animate-slide-up overflow-hidden border-2 border-brand-aqua/30 dark:border-brand-aqua/40",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 border-b-2 border-brand-aqua/20 dark:border-brand-aqua/30 px-6 py-5 flex items-center justify-between bg-gradient-to-r from-brand-aqua/10 via-brand-aqua/5 to-transparent dark:from-brand-aqua/20 dark:via-brand-aqua/10",children:[t.jsx("h2",{className:"text-2xl font-display text-brand-midnight dark:text-brand-clean",children:"Selecionar Usu\xe1rio"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{a(),h.push("/configuracoes?tab=usuarios")},className:"p-2 hover:bg-brand-aqua/20 dark:hover:bg-brand-aqua/30 rounded-xl transition-smooth",title:"Gerenciar usu\xe1rios",children:t.jsx(i.Z,{size:20,className:"text-brand-midnight dark:text-brand-clean",strokeWidth:2.5})}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-red-500/20 dark:hover:bg-red-500/30 rounded-xl transition-smooth",children:t.jsx(o.Z,{size:20,className:"text-brand-midnight dark:text-brand-clean",strokeWidth:2.5})})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-5 space-y-4 bg-white/50 dark:bg-brand-midnight/60",children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx(s.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-brand-aqua dark:text-brand-aqua",size:20,strokeWidth:2.5}),t.jsx("input",{type:"text",value:k,onChange:e=>f(e.target.value),placeholder:"Buscar usu\xe1rio...",className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-brand-midnight border-2 border-gray-200 dark:border-white/20 rounded-xl focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean text-sm placeholder-gray-400 dark:placeholder-brand-clean/60 shadow-sm hover:shadow-md"})]}),(0,t.jsxs)("button",{onClick:()=>v(!y),className:"w-full px-5 py-3 bg-gradient-to-r from-brand-aqua to-brand-blue text-brand-midnight rounded-xl font-bold hover:from-brand-aqua/90 hover:to-brand-blue/90 transition-smooth flex items-center justify-center gap-2 text-sm shadow-lg hover:shadow-xl",children:[t.jsx(l.Z,{size:20,strokeWidth:3}),"Adicionar Novo Usu\xe1rio"]}),y&&t.jsx("div",{className:"p-4 bg-gradient-to-br from-brand-aqua/10 via-brand-aqua/5 to-transparent dark:from-brand-aqua/20 dark:via-brand-aqua/10 rounded-xl border-2 border-brand-aqua/30 dark:border-brand-aqua/40 shadow-lg",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:j,onChange:e=>w(e.target.value),onKeyPress:e=>"Enter"===e.key&&q(),placeholder:"Digite o nome do novo usu\xe1rio...",className:"flex-1 px-4 py-2.5 bg-white dark:bg-brand-midnight border-2 border-gray-200 dark:border-white/20 rounded-xl text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/60 focus:outline-none focus:border-brand-aqua transition-smooth text-sm shadow-sm"}),t.jsx("button",{onClick:q,disabled:g||!j.trim(),className:"px-5 py-2.5 bg-brand-aqua text-brand-midnight rounded-xl hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed font-bold text-sm shadow-md hover:shadow-lg",children:g?"Criando...":"Criar"}),t.jsx("button",{onClick:()=>{v(!1),w("")},className:"px-3 py-2.5 bg-gray-100 dark:bg-brand-midnight text-brand-midnight dark:text-brand-clean rounded-xl hover:bg-gray-200 dark:hover:bg-white/10 transition-smooth border-2 border-gray-200 dark:border-white/20",children:t.jsx(o.Z,{size:18,strokeWidth:2.5})})]})}),t.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:0===Z.length?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-brand-midnight/60 dark:text-brand-clean/70",children:k?"Nenhum usu\xe1rio encontrado":"Nenhum usu\xe1rio cadastrado"})}):Z.map(e=>t.jsx("button",{onClick:()=>{r(e),a()},className:`w-full p-4 rounded-xl transition-all duration-300 text-left ${m===e.id?"bg-gradient-to-r from-brand-aqua/30 via-brand-aqua/20 to-brand-blue/20 dark:from-brand-aqua/40 dark:via-brand-aqua/30 dark:to-brand-blue/30 border-2 border-brand-aqua shadow-xl shadow-brand-aqua/30 scale-[1.02]":"bg-white dark:bg-brand-midnight/80 border-2 border-gray-200 dark:border-white/20 hover:bg-gradient-to-r hover:from-brand-aqua/10 hover:to-brand-blue/10 dark:hover:from-brand-aqua/20 dark:hover:to-brand-blue/20 hover:border-brand-aqua/50 hover:shadow-lg"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-aqua/30 to-brand-blue/30 dark:from-brand-aqua/40 dark:to-brand-blue/40 flex items-center justify-center border-2 border-brand-aqua/30 dark:border-brand-aqua/50",children:t.jsx("span",{className:"text-brand-aqua dark:text-brand-aqua font-bold text-lg",children:e.nome.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-brand-midnight dark:text-brand-clean text-base",children:e.nome}),(0,t.jsxs)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/70 mt-0.5",children:["Criado em ",new Date(e.created_at).toLocaleDateString("pt-BR")]})]}),m===e.id&&t.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-aqua flex items-center justify-center shadow-md",children:t.jsx("span",{className:"text-white text-xs font-bold",children:"âœ“"})})]})},e.id))})]})]})}):null}},66341:(e,a,r)=>{function t(e){try{if(!e||""===e.trim())return"";let a=e.replace(/\D/g,"");if(!a)return"";a.length>8&&(a=a.slice(0,8));let r=parseInt(a,10);if(isNaN(r)||!isFinite(r))return"";let t=r/100;if(t>1e6)return"1.000.000,00";return new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}).format(t)}catch(e){return console.error("Erro ao formatar valor:",e),""}}function d(e){return parseFloat(e.replace(/\./g,"").replace(",","."))||0}r.d(a,{d:()=>d,v:()=>t})},45961:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},98026:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},52175:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},62312:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},42916:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]])},40718:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]])},70491:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]])},51354:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},48120:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},97118:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]])},28765:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},73714:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},16588:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},38271:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},79741:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]])},67925:(e,a,r)=>{r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])}};