exports.id=115,exports.ids=[115],exports.modules={14329:(e,a,r)=>{Promise.resolve().then(r.bind(r,30748))},52313:(e,a,r)=>{Promise.resolve().then(r.bind(r,3183)),Promise.resolve().then(r.bind(r,6210)),Promise.resolve().then(r.bind(r,51055)),Promise.resolve().then(r.bind(r,94322))},59148:(e,a,r)=>{Promise.resolve().then(r.bind(r,93211))},77431:(e,a,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,26840,23)),Promise.resolve().then(r.t.bind(r,38771,23)),Promise.resolve().then(r.t.bind(r,13225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,43982,23))},30748:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>n});var t=r(95344);function n({error:e,reset:a}){return t.jsx("div",{className:"min-h-screen bg-brand-clean dark:bg-brand-midnight flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-brand-royal rounded-xl shadow-lg p-6 border border-gray-200 dark:border-white/10",children:[t.jsx("h2",{className:"text-2xl font-bold text-brand-midnight dark:text-brand-clean mb-4",children:"Algo deu errado!"}),t.jsx("p",{className:"text-gray-600 dark:text-brand-clean/70 mb-6",children:e.message||"Ocorreu um erro inesperado"}),t.jsx("button",{onClick:a,className:"w-full px-4 py-2 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth",children:"Tentar novamente"})]})})}},93211:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>o});var t=r(95344),n=r(20783),s=r.n(n);function o(){return t.jsx("div",{className:"min-h-screen bg-brand-clean dark:bg-brand-midnight flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-brand-royal rounded-xl shadow-lg p-6 border border-gray-200 dark:border-white/10 text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-brand-midnight dark:text-brand-clean mb-4",children:"P\xe1gina n\xe3o encontrada"}),t.jsx("p",{className:"text-gray-600 dark:text-brand-clean/70 mb-6",children:"A p\xe1gina que voc\xea est\xe1 procurando n\xe3o existe."}),t.jsx(s(),{href:"/home",className:"inline-block px-4 py-2 bg-brand-aqua text-brand-midnight rounded-lg font-semibold hover:bg-brand-aqua/90 transition-smooth",children:"Voltar para Home"})]})})}},3183:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>m});var t=r(95344),n=r(3729),s=r(35851),o=r(55560),i=r(14513),d=r(36135),l=r(36234),c=r(22254);function m(){let e=(0,c.useRouter)(),a=(0,c.usePathname)(),[r,m]=(0,n.useState)(!1),[u,b]=(0,n.useState)(!1),[h,x]=(0,n.useState)([]),[g,f]=(0,n.useState)(""),[p,v]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1),[y,N]=(0,n.useState)(!1),[k,S]=(0,n.useState)(!1),[C,D]=(0,n.useState)(!1),[E,q]=(0,n.useState)({nome:"",email:"",motivo:""}),[T,P]=(0,n.useState)(!1),[I,z]=(0,n.useState)(!1),[A,M]=(0,n.useState)(null),O=(0,n.useRef)(null),Z=(0,n.useRef)(null),$=(0,n.useRef)(null),F=(0,n.useRef)(null),R=(0,n.useRef)(null),B=(0,n.useRef)(!1),J=(0,n.useRef)(null),U=()=>{O.current&&O.current.scrollIntoView({behavior:"smooth",block:"end"})},W=()=>{};(0,n.useEffect)(()=>{(async()=>{try{let e=(0,l.createClient)(),{data:{user:a}}=await e.auth.getUser();w(!!a),a||(x([]),N(!1),f(""))}catch(e){console.error("Erro ao verificar autentica\xe7\xe3o:",e),w(!1),x([]),N(!1)}})();let{data:{subscription:e}}=(0,l.createClient)().auth.onAuthStateChange((e,a)=>{"SIGNED_OUT"!==e&&a?"SIGNED_IN"===e&&a&&w(!0):(w(!1),x([]),N(!1),D(!1),f(""),q({nome:"",email:"",motivo:""}),m(!1),b(!1))});return()=>{e.unsubscribe()}},[]),(0,n.useEffect)(()=>{h.length>0&&r&&!u&&setTimeout(()=>{U()},100)},[h.length,r,u]),(0,n.useEffect)(()=>{r&&!u&&Z.current?.focus()},[r,u]);let L=async()=>{try{(await fetch("/api/chat/send-automatic",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"inactivity",message:"Ol\xe1! Voc\xea ainda est\xe1 no chat? Se precisar de ajuda, estou aqui! \uD83D\uDE0A"})})).ok&&(B.current=!0,G(),R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{let e=new Date,a=$.current;a&&e.getTime()-a.getTime()>=12e4&&fetch("/api/chat/send-automatic",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"close",message:"Como n\xe3o recebemos resposta, estamos encerrando este chat. Se precisar de ajuda novamente, \xe9 s\xf3 abrir um novo ticket! Obrigado! \uD83D\uDC4B"})}).then(()=>{G(),setTimeout(()=>{m(!1),b(!1)},3e3)})},12e4))}catch(e){console.error("Erro ao enviar mensagem de inatividade:",e)}},V=()=>{F.current&&clearTimeout(F.current),R.current&&clearTimeout(R.current),B.current=!1,$.current=new Date,r&&!u&&(F.current=setTimeout(()=>{let e=new Date,a=$.current;a&&e.getTime()-a.getTime()>=3e5&&!B.current&&L()},3e5))},_=async()=>{if(!g.trim())return;if(I){alert("Esta conversa foi finalizada. Por favor, inicie uma nova conversa.");return}let e={id:Date.now().toString(),text:g.trim(),sender:"user",timestamp:new Date};x(a=>[...a,e]);let a=g.trim();f(""),v(!0),$.current=new Date,V();try{(await fetch("/api/chat/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a})})).ok?setTimeout(()=>{G()},500):console.error("Erro ao enviar mensagem")}catch(e){console.error("Erro ao enviar mensagem:",e)}finally{v(!1)}},G=async()=>{if(j)try{let e=await fetch("/api/chat/messages");if(e.ok){let a=await e.json(),t=(a.messages||[]).map(e=>({id:e.id,text:e.message,sender:"support"===e.sender_type?"support":"user",timestamp:new Date(e.created_at)})),n=t.filter(e=>"support"===e.sender),s=J.current;if(n.length>0){let e=n[n.length-1];null!==s&&e.id!==s&&W(),J.current=e.id}x(t);let o=a.isClosed||!1;z(o),o?(M(null),console.log("\uD83D\uDD12 Conversa fechada - nome do atendente removido")):a.assignedAgentName?(console.log("âœ… Nome do atendente recebido:",a.assignedAgentName),M(a.assignedAgentName)):(console.log("â„¹ï¸ Conversa aberta mas sem nome de atendente ainda"),M(null)),o?(z(!0),N(!0),D(!1),J.current=null,M(null)):t.length>0?(N(!0),D(!1)):r&&!u&&(D(!0),N(!1))}}catch(e){console.error("Erro ao carregar mensagens:",e)}},H=async()=>{if(!j){e.push("/login");return}S(!0);try{let e=await fetch("/api/chat/messages");if(e.ok){let a=await e.json(),r=a.isClosed||!1;r||!a.messages||0===a.messages.length?(D(!0),N(!1),z(!1),r&&x([])):(N(!0),D(!1),G())}else D(!0),N(!1)}catch(e){console.error("Erro ao iniciar chat:",e),D(!0),N(!1)}finally{S(!1)}},K=async e=>{if(e.preventDefault(),e.stopPropagation(),console.log("\uD83D\uDCDD Iniciando envio do formul\xe1rio...",E),!E.nome||!E.nome.trim()){console.error("âŒ Nome n\xe3o preenchido"),alert("Por favor, preencha seu nome completo");return}if(!E.email||!E.email.trim()||!E.email.includes("@")){console.error("âŒ Email inv\xe1lido"),alert("Por favor, preencha um email v\xe1lido");return}if(!E.motivo||!E.motivo.trim()){console.error("âŒ Motivo n\xe3o preenchido"),alert("Por favor, descreva o motivo da sua solicita\xe7\xe3o");return}P(!0);try{let e=`Nome: ${E.nome}
Email: ${E.email}
Motivo: ${E.motivo}`;console.log("\uD83D\uDCE4 Enviando mensagem:",e);let a=await fetch("/api/chat/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});if(console.log("\uD83D\uDCE5 Resposta do servidor:",a.status,a.ok),!a.ok){let e=await a.json();throw console.error("âŒ Erro na resposta:",e),Error(e.error||"Erro ao enviar mensagem")}let r=await a.json();console.log("âœ… Mensagem enviada com sucesso:",r),await new Promise(e=>setTimeout(e,300));let t=`Ol\xe1 ${E.nome}! ðŸ‘‹

Obrigado pelas informa\xe7\xf5es! Recebemos sua solicita\xe7\xe3o:

ðŸ“§ Email: ${E.email}
ðŸ“ Motivo: ${E.motivo}

Nossa equipe de suporte ir\xe1 atend\xea-lo o mais breve poss\xedvel. Aguarde um momento! ðŸ˜Š`;console.log("\uD83D\uDCE4 Enviando mensagem autom\xe1tica de confirma\xe7\xe3o...");let n=await fetch("/api/chat/send-automatic",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"info",message:t})});n.ok?console.log("âœ… Mensagem autom\xe1tica enviada com sucesso"):console.error("âŒ Erro ao enviar mensagem autom\xe1tica:",await n.json()),D(!1),N(!0),z(!1),q({nome:"",email:"",motivo:""}),J.current=null,console.log("\uD83D\uDD04 Carregando mensagens..."),setTimeout(()=>{G()},1e3)}catch(a){console.error("âŒ Erro ao enviar formul\xe1rio:",a);let e=a.message||"Erro desconhecido";alert("Erro ao enviar formul\xe1rio: "+e),P(!1)}};(0,n.useEffect)(()=>{if(r&&!u&&j){if(G(),y&&!C&&!I&&h.length>0){let e=setInterval(G,3e3);return V(),()=>{clearInterval(e),F.current&&clearTimeout(F.current),R.current&&clearTimeout(R.current)}}}else F.current&&clearTimeout(F.current),R.current&&clearTimeout(R.current)},[r,u,j,y,C,I,h.length]),(0,n.useEffect)(()=>{r&&!u&&g&&($.current=new Date,V())},[g,r,u]);let X=e=>e.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return a?.startsWith("/administracaosecr")||!j?null:(0,t.jsxs)(t.Fragment,{children:[!r&&(0,t.jsxs)("button",{onClick:()=>{m(!0),b(!1)},className:"fixed bottom-6 right-6 z-[70] w-14 h-14 bg-brand-aqua text-brand-midnight rounded-full shadow-2xl hover:shadow-3xl hover:scale-110 transition-all duration-300 flex items-center justify-center group animate-bounce-subtle","aria-label":"Abrir chat de suporte",children:[t.jsx(s.Z,{size:24,className:"group-hover:scale-110 transition-transform"}),t.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white dark:border-brand-midnight animate-pulse"})]}),r&&(0,t.jsxs)("div",{className:`fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-[70] bg-white dark:bg-brand-midnight rounded-2xl shadow-2xl border-2 border-gray-200 dark:border-brand-aqua/30 flex flex-col transition-all duration-300 ${u?"w-[calc(100vw-2rem)] sm:w-80 h-14 overflow-hidden":"w-[calc(100vw-2rem)] sm:w-96 h-[calc(100vh-10rem)] sm:h-[680px] max-h-[calc(100vh-10rem)] sm:max-h-[680px] overflow-hidden"}`,style:{height:u?"3.5rem":"calc(100vh - 10rem)",maxHeight:u?"3.5rem":"calc(100vh - 10rem)"},children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-brand-aqua to-brand-royal dark:from-brand-midnight dark:to-brand-royal rounded-t-2xl overflow-hidden flex-shrink-0",children:[(0,t.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white/20 dark:bg-brand-aqua/20 rounded-full flex items-center justify-center",children:t.jsx(s.Z,{size:20,className:"text-white"})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-white font-semibold text-sm",children:"Suporte ao Vivo"}),t.jsx("p",{className:"text-white/80 text-xs",children:"Estamos aqui para ajudar"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>b(!u),className:"p-1.5 hover:bg-white/20 rounded-lg transition-smooth","aria-label":u?"Expandir chat":"Minimizar chat",children:t.jsx(o.Z,{size:18,className:"text-white"})}),t.jsx("button",{onClick:()=>{m(!1),b(!1),J.current=null},className:"p-1.5 hover:bg-white/20 rounded-lg transition-smooth","aria-label":"Fechar chat",children:t.jsx(i.Z,{size:18,className:"text-white"})})]})]}),t.jsx("div",{className:"px-4 pb-3 border-t border-white/10 pt-3",children:A?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-brand-aqua overflow-hidden bg-brand-aqua/20 flex items-center justify-center",children:t.jsx("span",{className:"text-brand-aqua text-xs font-bold",children:A.split(" ").map(e=>e[0]).join("")})}),t.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white dark:border-brand-midnight"})]}),(0,t.jsxs)("p",{className:"text-white text-sm font-medium",children:[t.jsx("span",{className:"text-brand-aqua",children:A})," est\xe1 te atendendo agora"]})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("p",{className:"text-white/70 text-xs mb-2 font-medium",children:"Atendentes dispon\xedveis:"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[[{name:"Ana Silva",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=AnaSilva&backgroundColor=b6e3f4,c0aede,d1d4f9,ffd5dc,ffdfbf"},{name:"Carlos Santos",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=CarlosSantos&backgroundColor=b6e3f4,c0aede,d1d4f9,ffd5dc,ffdfbf"},{name:"Mariana Costa",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=MarianaCosta&backgroundColor=b6e3f4,c0aede,d1d4f9,ffd5dc,ffdfbf"},{name:"Rafael Oliveira",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=RafaelOliveira&backgroundColor=b6e3f4,c0aede,d1d4f9,ffd5dc,ffdfbf"}].map((e,a)=>(0,t.jsxs)("div",{className:"relative group",children:[t.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/30 overflow-hidden bg-white/10 flex items-center justify-center",children:t.jsx("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover",onError:a=>{let r=a.target;r.style.display="none";let t=r.parentElement;t&&(t.innerHTML=`<span class="text-white text-xs font-semibold">${e.name.charAt(0)}</span>`)}})}),t.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white dark:border-brand-midnight"})]},a)),t.jsx("div",{className:"ml-1 text-white/60 text-xs font-medium",children:"+4 online"})]})]})})]}),!u&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-4 bg-gray-50 dark:bg-brand-royal/30 min-h-0",style:{WebkitOverflowScrolling:"touch",scrollbarWidth:"thin"},children:y||C?C?(0,t.jsxs)("div",{className:"flex flex-col h-full py-4 overflow-y-auto overflow-x-hidden min-h-0",style:{WebkitOverflowScrolling:"touch",scrollbarWidth:"thin"},children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-brand-royal rounded-2xl rounded-bl-sm px-4 py-3 border border-gray-200 dark:border-white/10 mb-4",children:[t.jsx("h3",{className:"text-base font-semibold text-brand-midnight dark:text-brand-clean mb-2",children:I?"Iniciar Nova Conversa":"Ol\xe1! \uD83D\uDC4B Bem-vindo ao nosso suporte!"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-brand-clean/70",children:I?"Preencha o formul\xe1rio abaixo para iniciar uma nova conversa com nosso suporte:":"Para come\xe7armos, precisamos de algumas informa\xe7\xf5es:"})]}),(0,t.jsxs)("form",{onSubmit:e=>{console.log("\uD83D\uDCCB Form submit event disparado!"),K(e)},className:"space-y-4",noValidate:!0,children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Nome Completo *"}),t.jsx("input",{type:"text",required:!0,value:E.nome,onChange:e=>q({...E,nome:e.target.value}),placeholder:"Seu nome completo",className:"w-full px-4 py-2.5 bg-white dark:bg-brand-midnight border border-gray-200 dark:border-white/10 rounded-xl focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50 text-sm",disabled:T})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"E-mail *"}),t.jsx("input",{type:"email",required:!0,value:E.email,onChange:e=>q({...E,email:e.target.value}),placeholder:"seu@email.com",className:"w-full px-4 py-2.5 bg-white dark:bg-brand-midnight border border-gray-200 dark:border-white/10 rounded-xl focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50 text-sm",disabled:T})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-brand-midnight dark:text-brand-clean mb-1.5",children:"Motivo da Ajuda *"}),t.jsx("textarea",{required:!0,value:E.motivo,onChange:e=>q({...E,motivo:e.target.value}),placeholder:"Descreva como podemos ajud\xe1-lo...",rows:4,className:"w-full px-4 py-2.5 bg-white dark:bg-brand-midnight border border-gray-200 dark:border-white/10 rounded-xl focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50 text-sm resize-none",disabled:T})]}),t.jsx("button",{type:"submit",onClick:e=>{console.log("\uD83D\uDD18 Bot\xe3o clicado!"),console.log("\uD83D\uDCCB Estado do formul\xe1rio:",{nome:E.nome,email:E.email,motivo:E.motivo,isSubmitting:T,nomeValido:!!E.nome.trim(),emailValido:!!E.email.trim(),motivoValido:!!E.motivo.trim()})},disabled:T||!E.nome.trim()||!E.email.trim()||!E.motivo.trim(),className:"w-full px-4 py-3 bg-brand-aqua text-brand-midnight rounded-xl font-semibold hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",style:{cursor:!T&&E.nome.trim()&&E.email.trim()&&E.motivo.trim()?"pointer":"not-allowed"},children:T?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-brand-midnight border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Enviando..."})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.Z,{size:18,strokeWidth:2.5}),t.jsx("span",{children:"Enviar e Iniciar Conversa"})]})})]})]}):I&&h.length>0?t.jsx("div",{className:"flex flex-col items-center justify-center h-full py-12",children:(0,t.jsxs)("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"w-20 h-20 bg-orange-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(s.Z,{size:40,className:"text-orange-500"})}),t.jsx("h3",{className:"text-lg font-semibold text-brand-midnight dark:text-brand-clean mb-2",children:"Conversa Finalizada"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-brand-clean/70 mb-6",children:"Esta conversa foi finalizada. Clique no bot\xe3o abaixo para iniciar uma nova conversa com nosso suporte."}),(0,t.jsxs)("button",{onClick:()=>{D(!0),N(!1),z(!1),x([]),M(null)},className:"px-6 py-3 bg-brand-aqua text-brand-midnight rounded-xl font-semibold hover:bg-brand-aqua/90 transition-smooth shadow-lg hover:shadow-xl flex items-center gap-2 mx-auto",children:[t.jsx(s.Z,{size:20}),t.jsx("span",{children:"Iniciar Nova Conversa"})]})]})}):(0,t.jsxs)(t.Fragment,{children:[h.map(e=>t.jsx("div",{className:`flex ${"user"===e.sender?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${"user"===e.sender?"bg-brand-aqua text-brand-midnight rounded-br-sm":"bg-white dark:bg-brand-royal text-brand-midnight dark:text-brand-clean rounded-bl-sm border border-gray-200 dark:border-white/10"}`,children:[t.jsx("p",{className:"text-sm leading-relaxed",children:e.text}),t.jsx("p",{className:`text-xs mt-1 ${"user"===e.sender?"text-brand-midnight/60":"text-brand-midnight/50 dark:text-brand-clean/50"}`,children:X(e.timestamp)})]})},e.id)),p&&t.jsx("div",{className:"flex justify-start",children:t.jsx("div",{className:"bg-white dark:bg-brand-royal rounded-2xl rounded-bl-sm px-4 py-2 border border-gray-200 dark:border-white/10",children:(0,t.jsxs)("div",{className:"flex gap-1",children:[t.jsx("span",{className:"w-2 h-2 bg-brand-aqua rounded-full animate-bounce"}),t.jsx("span",{className:"w-2 h-2 bg-brand-aqua rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("span",{className:"w-2 h-2 bg-brand-aqua rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),t.jsx("div",{ref:O})]}):t.jsx("div",{className:"flex flex-col items-center justify-center h-full py-12",children:(0,t.jsxs)("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"w-20 h-20 bg-brand-aqua/20 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(s.Z,{size:40,className:"text-brand-aqua"})}),t.jsx("h3",{className:"text-lg font-semibold text-brand-midnight dark:text-brand-clean mb-2",children:"Bem-vindo ao Suporte!"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-brand-clean/70 mb-6",children:"Clique no bot\xe3o abaixo para iniciar uma conversa com nosso suporte"}),t.jsx("button",{onClick:H,disabled:k,className:"px-6 py-3 bg-brand-aqua text-brand-midnight rounded-xl font-semibold hover:bg-brand-aqua/90 transition-smooth shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 mx-auto",children:k?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-brand-midnight border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Iniciando..."})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(s.Z,{size:20}),t.jsx("span",{children:"Iniciar Chat"})]})})]})})}),y&&!C&&!I&&(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-white/10 bg-white dark:bg-brand-midnight flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("input",{ref:Z,type:"text",value:g,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_())},placeholder:"Digite sua mensagem...",className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-brand-royal border border-gray-200 dark:border-white/10 rounded-xl focus:outline-none focus:border-brand-aqua transition-smooth text-brand-midnight dark:text-brand-clean placeholder-gray-400 dark:placeholder-brand-clean/50 text-sm"}),t.jsx("button",{onClick:_,disabled:!g.trim(),className:"p-2.5 bg-brand-aqua text-brand-midnight rounded-xl hover:bg-brand-aqua/90 transition-smooth disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center","aria-label":"Enviar mensagem",children:t.jsx(d.Z,{size:18,strokeWidth:2.5})})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-brand-clean/50 mt-2 text-center",children:"Resposta m\xe9dia: menos de 1 minuto"})]}),y&&!C&&I&&(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-white/10 bg-orange-50 dark:bg-orange-900/20 flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-orange-100 dark:bg-orange-900/30 rounded-xl border border-orange-200 dark:border-orange-800",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(s.Z,{size:20,className:"text-orange-600 dark:text-orange-400"})}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-semibold text-orange-900 dark:text-orange-200 mb-1",children:"Conversa Finalizada"}),t.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:"Esta conversa foi finalizada pelo suporte. Clique no bot\xe3o abaixo para iniciar uma nova conversa."})]})]}),(0,t.jsxs)("button",{onClick:()=>{D(!0),N(!1),z(!1),x([]),M(null)},className:"w-full mt-3 px-4 py-2.5 bg-brand-aqua text-brand-midnight rounded-xl font-semibold hover:bg-brand-aqua/90 transition-smooth shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[t.jsx(s.Z,{size:18}),t.jsx("span",{children:"Iniciar Nova Conversa"})]})]})]})]})]})}},43470:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>l});var t=r(95344),n=r(41223),s=r.n(n),o=r(20783),i=r.n(o),d=r(3729);function l(){let[e,a]=(0,d.useState)(!1);return e?t.jsx(i(),{href:"/home",className:"flex items-center justify-center py-2 px-3 w-full cursor-pointer hover:opacity-80 transition-opacity",children:t.jsx("div",{className:"text-2xl font-bold text-brand-aqua",children:"PLENIPAY"})}):t.jsx(i(),{href:"/home",className:"flex items-center justify-center py-1 px-2 w-full cursor-pointer hover:opacity-80 transition-opacity",children:t.jsx(s(),{src:"/logo.png",alt:"PLENIPAY",width:240,height:60,className:"w-full h-auto object-contain",style:{maxHeight:"65px",width:"100%",objectFit:"contain",display:"block"},priority:!0,unoptimized:!0,onError:()=>a(!0)})})}},6210:(e,a,r)=>{"use strict";r.r(a),r.d(a,{MenuButton:()=>N,MenuProvider:()=>y,default:()=>k,useMenuContext:()=>w});var t=r(95344),n=r(3729),s=r(20783),o=r.n(s),i=r(22254),d=r(72086),l=r(37121),c=r(85674),m=r(10703),u=r(55794),b=r(50340),h=r(84013),x=r(13746),g=r(14513),f=r(98200),p=r(43470);let v=[{href:"/home",label:"Home",icon:d.Z,color:"text-blue-400"},{href:"/registros",label:"Registros",icon:l.Z,color:"text-green-400"},{href:"/dividas",label:"D\xedvidas",icon:c.Z,color:"text-red-400"},{href:"/minhas-metas",label:"Minhas Metas",icon:m.Z,color:"text-yellow-400"},{href:"/calendario",label:"Calend\xe1rio",icon:u.Z,color:"text-purple-400"},{href:"/dashboard",label:"Dashboard",icon:b.Z,color:"text-cyan-400"},{href:"/tutoriais",label:"Tutoriais",icon:h.Z,color:"text-pink-400"},{href:"/configuracoes",label:"Configura\xe7\xf5es",icon:x.Z,color:"text-gray-400"}],j=(0,n.createContext)(null);function w(){let e=(0,n.useContext)(j);if(!e)throw Error("useMenuContext deve ser usado dentro de MenuProvider");return e}function y({children:e}){let[a,r]=(0,n.useState)(!1);return t.jsx(j.Provider,{value:{isOpen:a,setIsOpen:r},children:e})}function N({className:e=""}){let{isOpen:a,setIsOpen:r}=w();return t.jsx("button",{onClick:()=>r(!a),className:`p-2 bg-brand-white dark:bg-brand-royal rounded-xl shadow-lg lg:hidden transition-smooth border border-gray-200 dark:border-white/10 ${e}`,"aria-label":"Abrir menu",children:a?t.jsx(g.Z,{size:20,className:"text-brand-midnight dark:text-brand-clean"}):t.jsx(f.Z,{size:20,className:"text-brand-midnight dark:text-brand-clean"})})}function k(){let{isOpen:e,setIsOpen:a}=w(),r=(0,i.usePathname)();return t.jsx(t.Fragment,{children:e&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-brand-midnight/50 z-40 lg:hidden animate-fade-in",onClick:()=>a(!1)}),t.jsx("aside",{className:"fixed left-0 top-0 h-screen w-64 bg-brand-royal border-r border-brand-midnight shadow-lg z-40 lg:hidden animate-slide-in-from-left",children:(0,t.jsxs)("div",{className:"p-6 pt-20",children:[t.jsx("div",{className:"mb-8",children:t.jsx(p.default,{})}),t.jsx("nav",{className:"space-y-2",children:v.map(e=>{let n=e.icon,s=r===e.href||"/home"!==e.href&&r?.startsWith(e.href);return(0,t.jsxs)(o(),{href:e.href,onClick:()=>a(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-smooth ${s?"bg-brand-aqua shadow-lg":"hover:bg-brand-midnight/50"}`,children:[t.jsx(n,{size:20,strokeWidth:2,className:s?"text-brand-midnight":e.color}),t.jsx("span",{className:`font-medium ${s?"text-brand-midnight":"text-brand-clean"}`,children:e.label})]},e.href)})})]})})]})})}},27100:(e,a,r)=>{"use strict";r.r(a),r.d(a,{createNotification:()=>h,default:()=>b});var t=r(95344),n=r(3729),s=r(64290),o=r(66138),i=r(91991),d=r(33037),l=r(14513),c=r(22254),m=r(83598),u=r(49494);function b(){let[e,a]=(0,n.useState)(!1),[b,h]=(0,n.useState)([]);(0,c.useRouter)(),(0,n.useEffect)(()=>{let e=localStorage.getItem("notifications");if(e)try{let a=JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp),read:void 0!==e.read&&e.read}));h(a)}catch(e){console.error("Erro ao carregar notifica\xe7\xf5es:",e)}(async function(){try{let{createClient:e}=await Promise.resolve().then(r.bind(r,36234)),a=e(),{data:{user:t}}=await a.auth.getUser();if(!t)return;let n=await fetch(`/api/admin/avisos?userId=${t.id}`,{cache:"no-store"});if(n.ok){let e=((await n.json()).avisos||[]).map(e=>({id:`admin-${e.id}`,message:e.titulo,type:"error"===e.tipo?"warning":e.tipo,timestamp:new Date(e.created_at),read:!1}));e.length>0&&h(a=>{let r=new Set(a.map(e=>e.id)),t=[...e.filter(e=>!r.has(e.id)),...a].slice(0,10);return localStorage.setItem("notifications",JSON.stringify(t)),t})}}catch(e){console.error("Erro ao carregar avisos admin:",e)}})()},[]),(0,n.useEffect)(()=>{let e=e=>{let a={id:Date.now().toString(),message:e.detail.message,type:e.detail.type||"info",timestamp:new Date,read:!1};h(e=>{let r=[a,...e].slice(0,10);return localStorage.setItem("notifications",JSON.stringify(r)),r})};return window.addEventListener("notification",e),()=>{window.removeEventListener("notification",e)}},[]),(0,n.useEffect)(()=>{e&&h(e=>{if(e.some(e=>!e.read)){let a=e.map(e=>({...e,read:!0}));return localStorage.setItem("notifications",JSON.stringify(a)),a}return e})},[e]);let x=b.filter(e=>!e.read).length,g=e=>{switch(e){case"success":return{icon:s.Z,borderColor:"border-l-green-500",bgGradient:"from-green-50/80 via-emerald-50/60 to-green-50/80 dark:from-green-950/40 dark:via-emerald-950/30 dark:to-green-950/40",iconBg:"bg-gradient-to-br from-green-500/20 to-emerald-500/10 dark:from-green-500/30 dark:to-emerald-500/20",iconColor:"text-green-600 dark:text-green-400",glow:"shadow-green-500/30"};case"warning":return{icon:o.Z,borderColor:"border-l-orange-500",bgGradient:"from-orange-50/80 via-amber-50/60 to-orange-50/80 dark:from-orange-950/40 dark:via-amber-950/30 dark:to-orange-950/40",iconBg:"bg-gradient-to-br from-orange-500/20 to-amber-500/10 dark:from-orange-500/30 dark:to-amber-500/20",iconColor:"text-orange-600 dark:text-orange-400",glow:"shadow-orange-500/30"};default:return{icon:i.Z,borderColor:"border-l-brand-aqua",bgGradient:"from-brand-aqua/10 via-blue-50/60 to-brand-aqua/10 dark:from-brand-aqua/20 dark:via-brand-royal/40 dark:to-brand-aqua/20",iconBg:"bg-gradient-to-br from-brand-aqua/25 to-blue-500/15 dark:from-brand-aqua/35 dark:to-blue-500/25",iconColor:"text-brand-aqua dark:text-brand-aqua",glow:"shadow-brand-aqua/30"}}},f=e=>{let a=Math.floor((new Date().getTime()-e.getTime())/6e4);return a<1?"Agora":a<60?`${a}m atr\xe1s`:a<1440?`${Math.floor(a/60)}h atr\xe1s`:(0,m.WU)(e,"dd/MM/yyyy HH:mm",{locale:u.F})},p=(e,a)=>{a.stopPropagation(),h(a=>{let r=a.filter(a=>a.id!==e);return localStorage.setItem("notifications",JSON.stringify(r)),r})};return(0,t.jsxs)("div",{className:"relative flex items-center",children:[t.jsx("button",{onClick:()=>a(!e),className:"relative p-2.5 text-brand-midnight dark:text-brand-clean hover:bg-brand-clean dark:hover:bg-white/10 rounded-xl transition-all duration-300 flex items-center justify-center group hover:scale-110 active:scale-95",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(d.Z,{size:24,strokeWidth:2.5,className:"relative z-10 transition-transform duration-300 group-hover:rotate-12"}),x>0&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"absolute inset-0 bg-brand-aqua/20 rounded-full blur-lg animate-pulse"}),t.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-br from-brand-aqua to-brand-aqua/80 text-white dark:text-brand-midnight text-[11px] font-black rounded-full min-w-[22px] h-[22px] flex items-center justify-center shadow-lg ring-2 ring-white dark:ring-brand-midnight animate-bounce-subtle z-20",children:x>9?"9+":x})]})]})}),e&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-[90] bg-transparent",onClick:()=>a(!1)}),(0,t.jsxs)("div",{className:"fixed top-[120px] sm:top-[130px] right-2 sm:right-4 lg:right-6 w-[calc(100vw-1rem)] sm:w-[380px] max-w-[calc(100vw-1rem)] sm:max-w-[380px] bg-gradient-to-br from-white/98 via-white/95 to-gray-50/90 dark:from-brand-midnight/98 dark:via-brand-royal/95 dark:to-brand-midnight/90 backdrop-blur-2xl rounded-2xl shadow-2xl z-[95] max-h-[calc(100vh-8rem)] sm:max-h-[calc(100vh-9rem)] overflow-hidden flex flex-col animate-scale-up pointer-events-auto border border-gray-200/30 dark:border-brand-aqua/20 ring-1 ring-black/5 dark:ring-white/10",children:[t.jsx("div",{className:"relative p-4 border-b border-gray-200/40 dark:border-brand-aqua/15 bg-gradient-to-r from-brand-aqua/8 via-purple-500/5 to-brand-aqua/8 dark:from-brand-midnight/90 dark:via-brand-royal/80 dark:to-brand-midnight/90 overflow-hidden",children:(0,t.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"relative p-2 bg-gradient-to-br from-brand-aqua/20 to-brand-aqua/10 dark:from-brand-aqua/30 dark:to-brand-aqua/20 rounded-xl shadow-lg ring-1 ring-brand-aqua/20 dark:ring-brand-aqua/30",children:t.jsx(d.Z,{size:18,className:"text-brand-aqua dark:text-brand-aqua",strokeWidth:2.5})})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-display font-bold text-base text-brand-midnight dark:text-brand-clean tracking-tight",children:"Notifica\xe7\xf5es"}),x>0&&(0,t.jsxs)("p",{className:"text-xs text-brand-midnight/60 dark:text-brand-clean/60 font-medium mt-0.5",children:[x," ",1===x?"n\xe3o lida":"n\xe3o lidas"]})]})]}),b.length>0&&t.jsx("button",{onClick:()=>{h([]),localStorage.removeItem("notifications")},className:"px-3 py-1.5 text-xs font-bold text-brand-aqua hover:text-white dark:hover:text-brand-midnight transition-all rounded-lg hover:bg-gradient-to-r hover:from-brand-aqua hover:to-brand-aqua/80 dark:hover:from-brand-aqua dark:hover:to-brand-aqua/80 hover:shadow-lg hover:shadow-brand-aqua/30 hover:scale-105 active:scale-95 border border-brand-aqua/20 hover:border-brand-aqua/40",children:"Limpar todas"})]})}),t.jsx("div",{className:"overflow-y-auto flex-1 bg-gradient-to-b from-gray-50/30 via-white/20 to-gray-50/30 dark:from-brand-midnight/50 dark:via-brand-royal/30 dark:to-brand-midnight/50 custom-scrollbar",children:0===b.length?(0,t.jsxs)("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"relative inline-block mb-4",children:t.jsx("div",{className:"relative bg-gradient-to-br from-brand-aqua/10 to-purple-500/5 dark:from-brand-aqua/20 dark:to-purple-500/10 p-4 rounded-2xl",children:t.jsx(d.Z,{size:40,className:"relative mx-auto text-brand-midnight/30 dark:text-brand-clean/30"})})}),t.jsx("p",{className:"text-brand-midnight/70 dark:text-brand-clean/70 text-sm font-bold mb-1",children:"Nenhuma notifica\xe7\xe3o"}),t.jsx("p",{className:"text-brand-midnight/50 dark:text-brand-clean/50 text-xs",children:"Voc\xea est\xe1 em dia! âœ¨"})]}):t.jsx("div",{className:"p-3 space-y-2",children:b.map((e,a)=>{let r=g(e.type),n=r.icon,s=!e.read;return(0,t.jsxs)("div",{className:`group relative p-3 rounded-xl border-l-[4px] ${r.borderColor} bg-gradient-to-br ${r.bgGradient} hover:shadow-lg ${r.glow} transition-all duration-300 cursor-pointer transform hover:scale-[1.01]`,style:{animationDelay:`${50*a}ms`},children:[s&&t.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-0.5 ${"success"===e.type?"bg-green-500":"warning"===e.type?"bg-orange-500":"bg-brand-aqua"} rounded-r-full`}),(0,t.jsxs)("div",{className:"relative flex items-start gap-3",children:[t.jsx("div",{className:`relative flex-shrink-0 ${r.iconBg} rounded-lg p-2 ${r.glow}`,children:t.jsx(n,{size:18,className:`relative z-10 ${r.iconColor}`,strokeWidth:2.5})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-bold text-brand-midnight dark:text-brand-clean leading-snug mb-1.5 line-clamp-2",children:e.message}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("span",{className:"inline-flex items-center gap-1 text-[10px] text-brand-midnight/60 dark:text-brand-clean/60 font-medium",children:f(e.timestamp)}),s&&t.jsx("span",{className:"px-1.5 py-0.5 bg-gradient-to-r from-brand-aqua/20 to-brand-aqua/10 dark:from-brand-aqua/30 dark:to-brand-aqua/20 text-brand-aqua text-[9px] font-black rounded-full uppercase tracking-wider",children:"Nova"})]})]}),t.jsx("button",{onClick:a=>p(e.id,a),className:"flex-shrink-0 p-1.5 hover:bg-black/5 dark:hover:bg-white/10 rounded-lg transition-all duration-200 opacity-0 group-hover:opacity-100 hover:scale-110 active:scale-95","aria-label":"Fechar notifica\xe7\xe3o",children:t.jsx(l.Z,{size:16,className:"text-brand-midnight/50 dark:text-brand-clean/50 hover:text-red-500 transition-colors",strokeWidth:2.5})})]})]},e.id)})})})]})]})]})}function h(e,a="info"){let r=new CustomEvent("notification",{detail:{message:e,type:a}});window.dispatchEvent(r)}},51055:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>h});var t=r(95344),n=r(3729),s=r(14513),o=r(30473),i=r(42739),d=r(75),l=r(22137),c=r(36135),m=r(27100),u=r(36234),b=r(22254);function h(){let e=(0,b.usePathname)(),[a,r]=(0,n.useState)(!1),[h,x]=(0,n.useState)(!1);(0,n.useRef)(null);let[g,f]=(0,n.useState)([{id:"1",role:"assistant",content:"Ol\xe1! Eu sou o PLEN, seu assistente financeiro inteligente. Como posso ajudar? Voc\xea pode me pedir para registrar gastos, consultar d\xedvidas, ver seus gastos da semana, e muito mais!",timestamp:new Date}]),[p,v]=(0,n.useState)(""),[j,w]=(0,n.useState)(!1),[y,N]=(0,n.useState)(!1),[k,S]=(0,n.useState)(null),C=(0,n.useRef)(null),D=(0,n.useRef)(null),E=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{try{let e=(0,u.createClient)(),{data:{user:a}}=await e.auth.getUser();r(!!a),a||(f([{id:"1",role:"assistant",content:"Ol\xe1! Eu sou o PLEN, seu assistente financeiro inteligente. Como posso ajudar? Voc\xea pode me pedir para registrar gastos, consultar d\xedvidas, ver seus gastos da semana, e muito mais!",timestamp:new Date}]),v(""),x(!1))}catch(e){console.error("Erro ao verificar autentica\xe7\xe3o:",e),r(!1)}})();let{data:{subscription:e}}=(0,u.createClient)().auth.onAuthStateChange((e,a)=>{"SIGNED_OUT"!==e&&a?"SIGNED_IN"===e&&a&&r(!0):(r(!1),f([{id:"1",role:"assistant",content:"Ol\xe1! Eu sou o PLEN, seu assistente financeiro inteligente. Como posso ajudar? Voc\xea pode me pedir para registrar gastos, consultar d\xedvidas, ver seus gastos da semana, e muito mais!",timestamp:new Date}]),v(""),x(!1))});return()=>{e.unsubscribe()}},[]),(0,n.useEffect)(()=>{C.current?.scrollIntoView({behavior:"smooth"})},[g]),(0,n.useEffect)(()=>{h&&D.current&&setTimeout(()=>D.current?.focus(),100)},[h]),(0,n.useEffect)(()=>{},[]),(0,n.useEffect)(()=>{},[]);let q=async e=>{let a=e||p.trim();if(!a||j)return;let r={id:Date.now().toString(),role:"user",content:a,timestamp:new Date};f(e=>[...e,r]),v(""),w(!0);try{let e=await fetch("/api/plen/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a,conversationHistory:g.slice(-10).map(e=>({role:e.role,content:e.content}))})}),r=await e.json();if(r.error)throw Error(r.error);r.pendingAction?S(r.pendingAction):S(null);let t={id:(Date.now()+1).toString(),role:"assistant",content:r.response,timestamp:new Date,actionData:r.actionData};f(e=>[...e,t]),r.actionData?.action==="created"&&((0,m.createNotification)(r.actionData.message||"A\xe7\xe3o executada com sucesso!","success"),S(null))}catch(a){console.error("Erro ao enviar mensagem:",a);let e={id:(Date.now()+1).toString(),role:"assistant",content:"Desculpe, ocorreu um erro ao processar sua mensagem. Por favor, tente novamente.",timestamp:new Date};f(a=>[...a,e]),(0,m.createNotification)("Erro ao processar mensagem","warning")}finally{w(!1)}},T=async e=>{k&&(S(null),await q(e?"sim":"n\xe3o"))};return e?.startsWith("/administracaosecr")||!a?null:(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[60] flex items-center justify-center",children:(0,t.jsxs)("button",{onClick:()=>x(!h),className:`relative w-16 h-16 rounded-full bg-gradient-to-r from-brand-aqua to-blue-500 text-white shadow-2xl hover:shadow-3xl transition-all duration-300 flex items-center justify-center hover:scale-110 overflow-hidden ${h?"":"animate-plen-glow"}`,title:"PLEN - Assistente Inteligente",children:[!h&&t.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none",style:{background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.5) 50%, transparent 100%)",backgroundSize:"200% 100%",animation:"plenShine 3s ease-in-out infinite"}}),t.jsx("div",{className:"relative z-10",children:h?t.jsx(s.Z,{size:24,strokeWidth:2.5}):t.jsx(o.Z,{size:24,strokeWidth:2.5,style:{animation:"plenRotate 8s linear infinite",filter:"drop-shadow(0 0 4px rgba(255,255,255,0.6))"}})})]})}),h&&(0,t.jsxs)("div",{className:"fixed bottom-28 z-[60] w-[calc(100vw-2rem)] sm:w-[calc(100%-2rem)] max-w-md h-[600px] max-h-[calc(100vh-8rem)] bg-white dark:bg-brand-midnight rounded-2xl shadow-2xl border-2 border-brand-aqua/30 flex flex-col overflow-hidden",style:{left:"50%",transform:"translateX(-50%)"},children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-brand-aqua to-blue-500 px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:t.jsx(o.Z,{size:18,className:"text-white"})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-white font-semibold text-sm",children:"PLEN"}),t.jsx("p",{className:"text-white/80 text-xs",children:"Assistente Financeiro"})]})]}),t.jsx("button",{onClick:()=>x(!1),className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:t.jsx(s.Z,{size:18,className:"text-white"})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-brand-royal/30",children:[g.map(e=>t.jsx("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-[80%] rounded-2xl px-4 py-2.5 ${"user"===e.role?"bg-brand-aqua text-white":"bg-white dark:bg-brand-midnight text-brand-midnight dark:text-brand-clean border border-gray-200 dark:border-white/10"}`,children:[t.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:e.content}),e.actionData&&t.jsx("div",{className:"mt-2 pt-2 border-t border-white/20 dark:border-white/10",children:(0,t.jsxs)("p",{className:"text-xs opacity-80",children:["âœ“ ",e.actionData.message||"A\xe7\xe3o executada"]})}),"assistant"===e.role&&e.id===g[g.length-1]?.id&&k&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-white/10 flex gap-2",children:[t.jsx("button",{onClick:()=>T(!0),disabled:j,className:"flex-1 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"âœ“ Sim"}),t.jsx("button",{onClick:()=>T(!1),disabled:j,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"âœ— N\xe3o"})]})]})},e.id)),j&&t.jsx("div",{className:"flex justify-start",children:t.jsx("div",{className:"bg-white dark:bg-brand-midnight rounded-2xl px-4 py-2.5 border border-gray-200 dark:border-white/10",children:t.jsx(i.Z,{size:16,className:"animate-spin text-brand-aqua"})})}),t.jsx("div",{ref:C})]}),t.jsx("div",{className:"p-4 bg-white dark:bg-brand-midnight border-t border-gray-200 dark:border-white/10",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative flex items-center justify-center w-12 h-12",children:[y&&(0,t.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[t.jsx("div",{className:"absolute w-10 h-10 rounded-full border-2 border-red-500/60 animate-sound-wave"}),t.jsx("div",{className:"absolute w-10 h-10 rounded-full border-2 border-red-500/50 animate-sound-wave-delayed"}),t.jsx("div",{className:"absolute w-10 h-10 rounded-full border-2 border-red-500/40 animate-sound-wave",style:{animationDelay:"0.8s"}}),t.jsx("div",{className:"absolute w-6 h-6 rounded-full bg-red-500/40 animate-pulse",style:{animationDuration:"0.6s"}})]}),t.jsx("button",{onClick:y?()=>{E.current&&y&&(E.current.stop(),N(!1))}:()=>{E.current&&!y&&(N(!0),E.current.start())},disabled:!E.current,className:`relative z-10 p-2.5 rounded-full transition-all duration-300 ${y?"bg-red-500 text-white shadow-lg shadow-red-500/50 scale-110 ring-2 ring-red-500/30":"bg-gray-100 dark:bg-brand-royal text-gray-600 dark:text-brand-clean hover:bg-gray-200 dark:hover:bg-brand-royal/80"} disabled:opacity-50 disabled:cursor-not-allowed`,title:y?"Parar grava\xe7\xe3o":"Falar",children:y?t.jsx(d.Z,{size:18,className:"animate-pulse"}):t.jsx(l.Z,{size:18})})]}),t.jsx("input",{ref:D,type:"text",value:p,onChange:e=>v(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),q())},placeholder:"Digite ou fale sua mensagem...",className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-brand-royal border border-gray-200 dark:border-white/10 rounded-lg text-brand-midnight dark:text-brand-clean placeholder-gray-400 focus:outline-none focus:border-brand-aqua transition-colors",disabled:j}),t.jsx("button",{onClick:()=>q(),disabled:!p.trim()||j,className:"p-2 bg-brand-aqua text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j?t.jsx(i.Z,{size:18,className:"animate-spin"}):t.jsx(c.Z,{size:18})})]})})]})]})}},94322:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>s});var t=r(95344),n=r(3729);function s({children:e}){let[a,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{r(!0);try{let e=localStorage.getItem("theme");"dark"===e||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),document.body.style.backgroundColor="#0D1B2A"):(document.documentElement.classList.remove("dark"),document.body.style.backgroundColor="")}catch(e){console.error("Erro ao aplicar tema:",e)}},[]),t.jsx(t.Fragment,{children:e})}},36234:(e,a,r)=>{"use strict";r.d(a,{createClient:()=>n});var t=r(86662);function n(){return(0,t.createBrowserClient)("https://frhxqgcqmxpjpnghsvoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyaHhxZ2NxbXhwanBuZ2hzdm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTM3NTYsImV4cCI6MjA3OTIyOTc1Nn0.p1OxLRA5DKgvetuy-IbCfYClNSjrvK6fm43aZNX3T7I",{cookies:{getAll:()=>document.cookie.split(";").map(e=>e.trim()).filter(e=>e.length>0).map(e=>{let a=e.indexOf("=");if(-1===a)return{name:e,value:""};let r=e.substring(0,a).trim(),t=e.substring(a+1).trim();try{return{name:r,value:decodeURIComponent(t)}}catch{return{name:r,value:t}}}),setAll(e){e.forEach(({name:e,value:a,options:r})=>{let t=`${e}=${encodeURIComponent(a)}`;r?.maxAge&&(t+=`; max-age=${r.maxAge}`),r?.domain&&(t+=`; domain=${r.domain}`),r?.path?t+=`; path=${r.path}`:t+="; path=/",r?.secure&&(t+="; secure"),r?.sameSite&&(t+=`; samesite=${r.sameSite}`),document.cookie=t})}}})}},20429:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$typeof:()=>s,__esModule:()=>n,default:()=>o});let t=(0,r(86843).createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/error.tsx`),{__esModule:n,$$typeof:s}=t,o=t.default},63203:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>v,metadata:()=>p});var t=r(25036);r(67272);var n=r(86843);let s=(0,n.createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/components/ThemeProvider.tsx`),{__esModule:o,$$typeof:i}=s,d=s.default,l=(0,n.createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/components/ChatWidget.tsx`),{__esModule:c,$$typeof:m}=l,u=l.default,b=(0,n.createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/components/PlenAssistant.tsx`),{__esModule:h,$$typeof:x}=b,g=b.default;var f=r(17273);let p={title:"Sistema de Contas - Controle Financeiro",description:"Sistema completo de controle financeiro pessoal e de d\xedvidas"};function v({children:e}){return t.jsx("html",{lang:"pt-BR",children:t.jsx("body",{children:t.jsx(d,{children:(0,t.jsxs)(f.Kb,{children:[e,t.jsx(f.ZP,{}),t.jsx(u,{}),t.jsx(g,{})]})})})})}},1429:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$typeof:()=>s,__esModule:()=>n,default:()=>o});let t=(0,r(86843).createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/app/not-found.tsx`),{__esModule:n,$$typeof:s}=t,o=t.default},17273:(e,a,r)=>{"use strict";r.d(a,{Kb:()=>d,ZP:()=>c,j2:()=>l});var t=r(86843);let n=(0,t.createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/components/MobileMenu.tsx`),{__esModule:s,$$typeof:o}=n,i=n.default;(0,t.createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/components/MobileMenu.tsx#useMenuContext`);let d=(0,t.createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/components/MobileMenu.tsx#MenuProvider`),l=(0,t.createProxy)(String.raw`/Users/charllestabordas/Documents/SISTEMA DE CONTAS/components/MobileMenu.tsx#MenuButton`),c=i},67272:()=>{}};